<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title> Map and WeakMap Objects </title>   
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.3.1/css/all.css" integrity="sha384-mzrmE5qonljUremFsqc01SB46JvROS7bZs3IO2EmfFsd15uHvIt+Y8vEf7N7fWAU" crossorigin="anonymous"> 
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <link rel="stylesheet" href="../../../Assets/stylesPages.css">
    <script src="../../../Assets/scriptPages.js"></script>
</head>
<body>
<h1> Map and WeakMap Objects (ver 4.0.0) </h1>
    <p> Updated ( 2018-07-10 / 2019-12-16 )</p>
    <p class="sitenav"> <a href="../../../index.html">MySite></a>
        <a href="../../index.html">JavaScript></a>
        <a href="../index.html"> Objects> </a> Map and WeakMap Objects 
    </p>
<table class="table">
<caption> 
    Map Object 
    <span class="changeListOrder">[Ordered: <span>Alphabetically</span>]</span>
</caption>
    <tr>
        <th style="width:30%;"> Method / Property </th>
        <th> Descriptions </th>
    </tr>
    <tr class="01">
        <td> new Map(<i>iterbaleObj</i>) </td>
        <td> - creates and returns a new Map object from the passed iterable object (iterator object must contain key value pairs like <mark>[[key, val], ...]</mark>) <br>
             - the Map object is an <u>iterator</u> object which holds key-value pairs, <u>any data type can be used as key or as value</u> <br>
             - keys are unique if they are primitives or object references (but keys still can be same objects) 
            <span id="browserSupport" title="updated : 2019-12-17">
                <span><i class="fab fa-chrome"></i> 38 </span>
                <span><i class="fab fa-firefox"></i> 13 </span>
                <span><i class="fab fa-opera"></i> 25 </span>
                <span><i class="fab fa-internet-explorer"></i><i class="fab fa-edge"></i> 11 </span>
                <span><i class="fab fa-safari"></i> 8 </span>
                <span><i class="fab fa-node-js"></i> 0.12 </span>
            </span>
        </td>
    </tr>
    <tr class="03.02">
        <td> <strong>map</strong>.clear() </td>
        <td> - removes all items (key-value pairs) from the map object (no return value) 
            <span id="browserSupport" title="updated : 2019-12-17">
                <span><i class="fab fa-chrome"></i> 38 </span>
                <span><i class="fab fa-firefox"></i> 19 </span>
                <span><i class="fab fa-opera"></i> 25 </span>
                <span><i class="fab fa-internet-explorer"></i><i class="fab fa-edge"></i> 11 </span>
                <span><i class="fab fa-safari"></i> 8 </span>
                <span><i class="fab fa-node-js"></i> 0.12 </span>
            </span>
        </td>
    </tr>
    <tr class="03.01">
        <td> <strong>map</strong>.delete(<strong>key:any</strong>) </td>
        <td> - removes the specified key-value pair (referenced by the key) from the map object, and returns a boolean indicating the success or the failure of the operation <br>
             - this does not leave a hole in the Map object, itmes (key-value pairs) will shift to fill the gap     
            <span id="browserSupport" title="updated : 2019-12-17">
                <span><i class="fab fa-chrome"></i> 38 </span>
                <span><i class="fab fa-firefox"></i> 13 </span>
                <span><i class="fab fa-opera"></i> 25 </span>
                <span><i class="fab fa-internet-explorer"></i><i class="fab fa-edge"></i> 11 </span>
                <span><i class="fab fa-safari"></i> 8 </span>
                <span><i class="fab fa-node-js"></i> 0.12 </span>
            </span>
        </td>
    </tr>
    <tr class="04.03">
        <td> <strong>map</strong>.entries() </td>
        <td> - returns an iterator object containing the Map object's key-value pairs 
            <span id="browserSupport" title="updated : 2019-12-17">
                <span><i class="fab fa-chrome"></i> 38 </span>
                <span><i class="fab fa-firefox"></i> 20 </span>
                <span><i class="fab fa-opera"></i> 25 </span>
                <span><i class="fab fa-internet-explorer"></i><i class="fab fa-edge"></i> 12 </span>
                <span><i class="fab fa-safari"></i> 8 </span>
                <span><i class="fab fa-node-js"></i> 0.12 </span>
            </span>
        </td>
    </tr>
    <tr class="02.05">
        <td> <strong>map</strong>.forEach(<strong>fn(key, val, mapObj)</strong>, <i>thisValue</i>) </td>
        <td> - runs the callback fuction for each key-value pair in the map object in the insertion order 
            <span id="browserSupport" title="updated : 2019-12-17">
                <span><i class="fab fa-chrome"></i> 38 </span>
                <span><i class="fab fa-firefox"></i> 25 </span>
                <span><i class="fab fa-opera"></i> 25 </span>
                <span><i class="fab fa-internet-explorer"></i><i class="fab fa-edge"></i> 11 </span>
                <span><i class="fab fa-safari"></i> 8 </span>
                <span><i class="fab fa-node-js"></i> 0.12 </span>
            </span>
        </td>
    </tr>
    <tr class="02.02">
        <td> <strong>map</strong>.get(<strong>key:any</strong>) </td>
        <td> - returns the associated value of the passed key, if no such key found returns <mark>undefined</mark> 
            <span id="browserSupport" title="updated : 2019-12-17">
                <span><i class="fab fa-chrome"></i> 38 </span>
                <span><i class="fab fa-firefox"></i> 13 </span>
                <span><i class="fab fa-opera"></i> 25 </span>
                <span><i class="fab fa-internet-explorer"></i><i class="fab fa-edge"></i> 11 </span>
                <span><i class="fab fa-safari"></i> 8 </span>
                <span><i class="fab fa-node-js"></i> 0.12 </span>
            </span>
        </td>
    </tr>
    <tr class="02.04">
        <td> <strong>map</strong>.has(<strong>key:any</strong>) </td>
        <td> - returns <mark>true</mark> if the passed value exist as key in the map object, otherwise returns <mark>false</mark> 
            <span id="browserSupport" title="updated : 2019-12-17">
                <span><i class="fab fa-chrome"></i> 38 </span>
                <span><i class="fab fa-firefox"></i> 13 </span>
                <span><i class="fab fa-opera"></i> 25 </span>
                <span><i class="fab fa-internet-explorer"></i><i class="fab fa-edge"></i> 11 </span>
                <span><i class="fab fa-safari"></i> 8 </span>
                <span><i class="fab fa-node-js"></i> 0.12 </span>
            </span>
        </td>
    </tr>
    <tr class="04.01">
        <td> <strong>map</strong>.keys() </td>
        <td> - returns an iterator object containing the Map object's all keys 
            <span id="browserSupport" title="updated : 2019-12-17">
                <span><i class="fab fa-chrome"></i> 38 </span>
                <span><i class="fab fa-firefox"></i> 20 </span>
                <span><i class="fab fa-opera"></i> 25 </span>
                <span><i class="fab fa-internet-explorer"></i><i class="fab fa-edge"></i> 12 </span>
                <span><i class="fab fa-safari"></i> 8 </span>
                <span><i class="fab fa-node-js"></i> 0.12 </span>
            </span>
        </td>
    </tr>
    <tr class="02.03">
        <td> <strong>map</strong>.set(<strong>key:any</strong>, <strong>val:any</strong>) </td>
        <td> - adds a new key-value pair at the end of the row and returns the map object itself (with the newly added key-value pair) 
            <span id="browserSupport" title="updated : 2019-12-17">
                <span><i class="fab fa-chrome"></i> 38 </span>
                <span><i class="fab fa-firefox"></i> 13 </span>
                <span><i class="fab fa-opera"></i> 25 </span>
                <span><i class="fab fa-internet-explorer"></i><i class="fab fa-edge"></i> 12 / 11 returns undefined </span>
                <span><i class="fab fa-safari"></i> 8 </span>
                <span><i class="fab fa-node-js"></i> 0.12 </span>
            </span>
        </td>
    </tr>
    <tr class="02.01">
        <td> <strong>map</strong>.size </td>
        <td> - returns the number of key-value pairs held by the map object 
            <span id="browserSupport" title="updated : 2019-12-17">
                <span><i class="fab fa-chrome"></i> 38 </span>
                <span><i class="fab fa-firefox"></i> 19 </span>
                <span><i class="fab fa-opera"></i> 25 </span>
                <span><i class="fab fa-internet-explorer"></i><i class="fab fa-edge"></i> 11 </span>
                <span><i class="fab fa-safari"></i> 8 </span>
                <span><i class="fab fa-node-js"></i> 0.12 </span>
            </span>
        </td>
    </tr>
    <tr class="04.02">
        <td> <strong>map</strong>.values() </td>
        <td> - returns an iterator object containing the Map object's all values 
            <span id="browserSupport" title="updated : 2019-12-17">
                <span><i class="fab fa-chrome"></i> 38 </span>
                <span><i class="fab fa-firefox"></i> 20 </span>
                <span><i class="fab fa-opera"></i> 25 </span>
                <span><i class="fab fa-internet-explorer"></i><i class="fab fa-edge"></i> 12 </span>
                <span><i class="fab fa-safari"></i> 8 </span>
                <span><i class="fab fa-node-js"></i> 0.12 </span>
            </span>
        </td>
    </tr>
</table>
    <br>
<table class="table">
<caption>
    WeakMap Object 
    <span class="changeListOrder">[Ordered: <span>Alphabetically</span>]</span>
</caption>
    <tr>
        <th style="width:30%;"> Method / Property </th>
        <th> Descriptions </th>
    </tr>
    <tr class="01">
        <td> new WeakMap(<i>iterableObj</i>) </td>
        <td> - creates and returns a WeakMap object from the passed iterable object (iterator object must contain key-value pairs like <mark>[[key, val], ...]</mark>) <br>
             - it is a garbage collection tool (not iterable), holds key-value pairs where the <u>keys can be only unique object references and their values can be any data</u> <br>
             - if a WeakMap key is not referenced than it is marked for garbage collection along with its value <br>
             - once the marked key-value pair is garbage collected they are automatically removed from the WeakMap object 
            <span id="browserSupport" title="updated : 2019-12-17">
                <span><i class="fab fa-chrome"></i> 36 </span>
                <span><i class="fab fa-firefox"></i> 6 </span>
                <span><i class="fab fa-opera"></i> 23 </span>
                <span><i class="fab fa-internet-explorer"></i><i class="fab fa-edge"></i> 11 </span>
                <span><i class="fab fa-safari"></i> 8 </span>
                <span><i class="fab fa-node-js"></i> 0.12 </span>
            </span>
        </td>
    </tr>
    <tr class="3">
        <td> <strong>weakMap</strong>.delete(<strong>key:objRef</strong>) </td>
        <td> - removes the specified key-value pair (referenced by the key) from the weakmap object, and returns a boolean indicating the success or the failure of the operation
            <span id="browserSupport" title="updated : 2019-12-17">
                <span><i class="fab fa-chrome"></i> 36 </span>
                <span><i class="fab fa-firefox"></i> 6 </span>
                <span><i class="fab fa-opera"></i> 23 </span>
                <span><i class="fab fa-internet-explorer"></i><i class="fab fa-edge"></i> 11 </span>
                <span><i class="fab fa-safari"></i> 8 </span>
                <span><i class="fab fa-node-js"></i> 0.12 </span>
            </span>
        </td>
    </tr>
    <tr class="2.1">
        <td> <strong>weakMap</strong>.get(<strong>key:objRef</strong>) </td>
        <td> - returns the associated value of the passed key, if no such key found returns <mark>undefined</mark>   
            <span id="browserSupport" title="updated : 2019-12-17">
                <span><i class="fab fa-chrome"></i> 36 </span>
                <span><i class="fab fa-firefox"></i> 6 </span>
                <span><i class="fab fa-opera"></i> 23 </span>
                <span><i class="fab fa-internet-explorer"></i><i class="fab fa-edge"></i> 11 </span>
                <span><i class="fab fa-safari"></i> 8 </span>
                <span><i class="fab fa-node-js"></i> 0.12 </span>
            </span>
        </td>
    </tr>
    <tr class="2.3">
        <td> <strong>weakMap</strong>.has(<strong>key:objRef</strong>) </td>
        <td> - returns <mark>true</mark> if the passed value exist as key in the weakmap object, otherwise returns <mark>false</mark>
            <span id="browserSupport" title="updated : 2019-12-17">
                <span><i class="fab fa-chrome"></i> 36 </span>
                <span><i class="fab fa-firefox"></i> 6 </span>
                <span><i class="fab fa-opera"></i> 23 </span>
                <span><i class="fab fa-internet-explorer"></i><i class="fab fa-edge"></i> 11 </span>
                <span><i class="fab fa-safari"></i> 8 </span>
                <span><i class="fab fa-node-js"></i> 0.12 </span>
            </span>
        </td>
    </tr>
    <tr class="2.2">
        <td> <strong>weakMap</strong>.set(<strong>key:objRef</strong>, <strong>val:any</strong>) </td>
        <td> - adds a new key-value pair and returns the weakmap object itself (newly added key-value pair included)
            <span id="browserSupport" title="updated : 2019-12-17">
                <span><i class="fab fa-chrome"></i> 36 </span>
                <span><i class="fab fa-firefox"></i> 6 </span>
                <span><i class="fab fa-opera"></i> 23 </span>
                <span><i class="fab fa-internet-explorer"></i><i class="fab fa-edge"></i> 12 / 11 returns undefined </span>
                <span><i class="fab fa-safari"></i> 8 </span>
                <span><i class="fab fa-node-js"></i> 0.12 </span>
            </span>
        </td>
    </tr>
</table>
<h2 style="color:green;"><u> Notes : </u></h2>
    <details class="example" id="notes">
    <summary> Notes :</summary>
    <!-- <p> - paragraph removes the 'empty' message from the detail TAG -->
    </details>
<h2 style="color:green;"><u> Useful Links : </u></h2>
    <p><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Map" target="_blank"> MDN Map Object </a></p>
<h2 style="color:green;"><u> Remember This : </u></h2>
<h2 style="color:green;"><u> Description and Demonstration : </u></h2>
<h2 class="headerExtra"><u> The <mark>Map</mark> Object </u></h2>
    <p> - the <mark>Map</mark> object is an <u>iterator</u> object which holds key-value pairs, <u>any data type can be used as key or value BUT the keys must be unique primitives or object referenes</u> (keys can be same objects) </p>
    <p> - the <mark>Map</mark> object uses the <mark>===</mark> (same value equality operator) to check for equal primitives or equal object references as keys, <u>the latest equal key overwrites the previous key-value pair!</u> </p>
<details class="example">
<summary> DEMO </summary>
    <pre>
    var myMap = new Map([
        [false, 'value1'],
        [2, [1, 2, 3]],                                                                 
        [2, {p1:'val'}],                                                               // overwrites the previous same key (key-value pair)
        [[1], 32],                                                                     // bot key-value pair is kept because the Map object doesn't do same object checking  
        [[1], 21]                                                                      // bot key-value pair is kept because the Map object doesn't do same object checking  
    ]);
    
    myMap;                                                                             // -> Map{[false, 'value1'], [2, {p1:'val'}], [[1], 32], [[1], 21]}
// ------------------------------------------------------------------------------------
    for(let i of myMap) {                                                              // Map is an iterator object os the for... of loop can loop over it 
        i                                                                              // -> [false, 'value1'] | [2, {p1:'val'}] | [[1], 32] | [[1], 21]
    }
    </pre>
</details>
<details class="example">
<summary> Example : </summary>
<h4><u> Simple Demo : </u></h4>
<script>
    var obj_JS = {41:41, prop:"val"};
    var thisMap = new Map([[obj_JS, "val"]]);
    thisMap.get(obj_JS);                            // returns "val"
</script>
        <details>
        <summary> CODE : </summary>
        <pre>
&lt;script&gt;
    var obj_JS = {41:41, prop:"val"};
    var thisMap = new Map([[obj_JS, "val"]]);
    thisMap.get(obj_JS);                            // returns "val"
&lt;/script&gt;
        </pre>
        </details>
<h4><u> using and returning complex data as keys : </u></h4>
<script>
    var keyObj = {rabit:41, rooster:4};
    var myMap = new Map();
    myMap.set(keyObj);
    myMap.forEach(clFunc);
    function clFunc(val, key) {
        key.rabit;                  // returns "41"
        key.rooster;                // returns "4"
    }
</script>
        <details>
        <summary> CODE : </summary>
        <pre>
&lt;script&gt;
    var keyObj = {rabit:41, rooster:4};
    var myMap = new Map();
    myMap.set(keyObj);
    myMap.forEach(clFunc);
    function clFunc(val, key) {
        key.rabit;                  // returns "41"
        key.rooster;                // returns "4"
    }
&lt;/script&gt;
        </pre>
        </details>
</details>
<!---------------------------------------------------------------------------------------------------------------------------->    
<hr>    
<h2 style="color:darkblue;"><u> The <mark>size</mark> / <mark>get()</mark> / <mark>set()</mark> / <mark>has()</mark> / <mark>forEach()</mark> property and methods </u></h2>
<details class="example">
<summary> DEMO </summary>
    <pre>
    var myMap = new Map([['mark', 'BMW'], ['sport', true]]);
    
// size -------------------------------------------------------------------------------
    myMap.size;                                                                        // -> 2
    
// get() ------------------------------------------------------------------------------
    myMap.get('sport');                                                                // -> true 
    myMap.get('color');                                                                // -> undefined                                                  // no such key found 
    
// has() / set() ----------------------------------------------------------------------
    myMap.has(3000);                                                                   // -> false                                                      // no such key found
    myMap.set(3000, 'engine');                                                         // -> Map{['mark', 'BMW'], ['sport', true], [3000, 'engine']}    // new key-value pair added at the end of the row  
    myMap.has(3000);                                                                   // -> true 
    
// forEach() --------------------------------------------------------------------------
    myMap.forEach(function(key, val, mapObj){                                          // runs one pass for each key-value pairs  
        key;                                                                           // -> 'mark' | 'sport' | 3000
        val;                                                                           // -> 'BMW'  | true    | 'engine'
        mapObj;                                                                        // -> Map{['mark', 'BMW'], ['sport', true], [3000, 'engine']} | ...
    });
    </pre>
</details>
<details class="example">
<summary> Example : </summary>
<h4 style="color:darkblue;"><u> <mark>size</mark> TEST </u></h4>
    <p id="countIt"></p>
<script>
jQuery(document).ready(function(){
    let animals = new Map([["cow", 4], ["dog", 1], ["han", 41], ["chicken", 12]]);
    $("#countIt").text(animals.size);
});
</script>
        <details>
        <summary> CODE : </summary>
        <pre>
    &lt;p id="countIt"&gt;&lt;/p&gt;
&lt;script&gt;
jQuery(document).ready(function(){
    let animals = new Map([["cow", 4], ["dog", 1], ["han", 41], ["chicken", 12]]);
    $("#countIt").text(animals.size);
});
&lt;/script&gt;
        </pre>
        </details>
<!---------------------------------------------------------------------------------------------------------------------------->    
<hr>    
<h4 style="color:darkblue;"><u> <mark>get()</mark> / <mark>set()</mark> / <mark>has()</mark> TEST </u></h4>
    <p id="hasIt"></p>
<script>
"use strict";
$(document).ready(function(){
    var myMap = new Map([["prop_A", 21]]);
    myMap.set("prop_B", 22);
    myMap.has("prop_B");                        // returns "true";
    $("#hasIt").text(myMap.get("prop_B"));      // created element printed
});   
</script>
        <details>
        <summary> CODE : </summary>
        <pre>
    &lt;p id="hasIt"&gt;&lt;/p&gt;
&lt;script&gt;
"use strict";
$(document).ready(function(){
    var myMap = new Map([["prop_A", 21]]);
    myMap.set("prop_B", 22);
    myMap.has("prop_B");                        // returns "true";
    $("#hasIt").text(myMap.get("prop_B"));      // created element printed
});   
&lt;/script&gt;
        </pre>
        </details>
</details>
<!---------------------------------------------------------------------------------------------------------------------------->    
<hr>    
<h2 style="color:darkblue;"><u> The <mark>delete()</mark> / <mark>clear()</mark> methods </u></h2>    
<details class="example">
<summary> DEMO </summary>
    <pre>
    var myMap = new Map([["p1", 33], ["p2", 32]]);
    
// delete() ---------------------------------------------------------------------------
    myMap.delete('p2');                                                                // -> true       // key-value pair successfully removed 
    myMap.delete('p3');                                                                // -> false      // operation failed (no such key exist)   
    
// clear() ----------------------------------------------------------------------------
    myMap.clear();                                                                     // map object cleared entirely 
    myMap;                                                                             // -> Map{}
    </pre>
</details>
<details class="example">
    <summary> Example : </summary>
<script>
$(document).ready(function(){
    var myMap = new Map([["A", 1], ["B", 2], ["C", 3], ["D", 4]]);
    var del_A = myMap.delete("B");                                      // returns "true" -> item deleted
    var del_B = myMap.delete("X");                                      // returns "false" -> no item to delete
    myMap.clear();                                                      // "myMap" cleared out!
});
</script>
        <details>
        <summary> CODE : </summary>
        <pre>
&lt;script&gt;
$(document).ready(function(){
    var myMap = new Map([["A", 1], ["B", 2], ["C", 3], ["D", 4]]);
    var del_A = myMap.delete("B");                                      // returns "true" -> item deleted
    var del_B = myMap.delete("X");                                      // returns "false" -> no item to delete
    myMap.clear();                                                      // "myMap" cleared out!
});
&lt;/script&gt;
        </pre>
        </details>
</details>
<!---------------------------------------------------------------------------------------------------------------------------->    
<hr>    
<h2 style="color:darkblue;"><u> The <mark>keys()</mark> / <mark>values()</mark> / <mark>entries()</mark> methods </u></h2>
<details class="example">
<summary> DEMO </summary>
    <pre>
    var myMap = new Map([['str', 21], [false, 32n], [null, undefined]]);
    
    var keyIterator = myMap.keys();                                                    // -> MapIterator{'str', false, null}
        keyIterator.next();                                                            // -> {value:'str', done:false}
    
    var valIterator = myMap.values();                                                  // -> MapIterator{21, 32n, undefined}
        valIterator.next();                                                            // -> {value:21, done:false}
        
    var entriesIterator = myMap.entries();                                             // -> MapIterator{['str', 21], [false, 32n], [null, undefined]}
        entriesIterator.next();                                                        // -> {value:['str', 21], done:false}
    </pre>
</details>
<details class="example">
<summary> Example : </summary>
<h4 style="color:darkblue;"><u> <mark>keys()</mark> / <mark>values()</mark> / <mark>entries()</mark> TEST </u></h4>
    <button onmouseup="mapIterators()"> RUN TEST (result in console) </button>
<script>
var mapIterators = function(){
    var myMap = new Map([['egy', 1], ['ketto', 2], ['harom', 3]]);
    
    console.log( myMap.keys() );                                // -> MapIterator{'egy', 'ketto', 'harom'}
    console.log( myMap.values() );                              // -> MapIterator{1, 2, 3}
    console.log( myMap.entries() );                             // -> MapIterator{['egy', 1], ['ketto', 2], ['harom', 3]}
};
</script>
        <details>
        <summary> CODE : </summary>
        <pre>
    &lt;button onmouseup="mapIterators()"&gt; RUN TEST (result in console) &lt;/button&gt;
&lt;script&gt;
var mapIterators = function(){
    var myMap = new Map([['egy', 1], ['ketto', 2], ['harom', 3]]);
    
    console.log( myMap.keys() );                                       // -&gt; MapIterator{'egy', 'ketto', 'harom'}
    console.log( myMap.values() );                                     // -&gt; MapIterator{1, 2, 3}
    console.log( myMap.entries() );                                    // -&gt; MapIterator{['egy', 1], ['ketto', 2], ['harom', 3]}
};
&lt;/script&gt;
        </pre>
        </details>
</details>
<!----------------------------------------------------------------------------------------------------------------------------> 
<hr>
<h2 class="headerExtra"><u> The <mark>WeakMap</mark> Object </u></h2>    
    <p> - the WeakMap object holds key-value pairs where the <u>keys can be only unique object references</u> </p>
    <p> - WeakMap keys (object references) are 'weakly' held, if it is not referenced it will be garbage collected along with its value and removed from the WeakMap object automatically </p>
    <p> - because the WeakMap object 'weakly' holds its keys <u>the WeakMap object is not iterable</u> </p>
<details class="example">
<summary> DEMO </summary>
    <pre>
// !! the WeakMark object marks unreferenced object references (as key) for gargabe collection, BUT the garbage collection is platform specific, so this code might result different outcomes depending on platform garbage collection speed    
    var myObj1 = {p1:'val1'}
    var myObj2 = {p2:'val2'}
    
    var myWeakMap = new WeakMap([[myObj1, 1], [myObj2, 2], [{p3:'val3'}, 3]]);         // the 3rd item (key-value) [{p3:'val3'}, 3] is automatically garbage collected because it is not referenced   
    
    myWeakMap;                                                                         // -> WeakMap{[myObj1, 1], [myObj2, 2]}
        
    var myObj2 = 'new value';                                                          // the 'myObj2' variable not references the {p2:'val2'} object any more 
    
    myWeakMap;                                                                         // -> WeakMap{[myObj1, 1]}           // the [myObj2, 2] is garbage collected 
    </pre>
</details>
<details class="example">
<summary> Example : </summary>
<h4 style="color:darkblue;"><u> <mark>WeakMap</mark> TEST </u></h4>
    <button onmouseup="weakMapTest()"> RUN TEST (result in console) </button>
<script>
var weakMapTest = function(){
    var myObj1 = {};
    var myObj2 = {};
    
    var myWeakMap = new WeakMap([[myObj1, 1], [myObj2, 2], [[1], 3]]);   // the 3rd item [[1], 3] is immediately garbage collected 
        console.log(myWeakMap.has(myObj1));                              // -> true         // object reference and its value is present in the WeakSet object 
        console.log(myWeakMap.has(myObj2));                              // -> true         // object reference and its value is present in the WeakSet object 
        
    myObj2 = {};                                                         // the myObj2 variable is reasigned (not references the previous assigned object any more)
        
        console.log(myWeakMap.has(myObj1));                              // -> true         // object reference and its value is present in the WeakSet object 
        console.log(myWeakMap.has(myObj2));                              // -> false        // object reference and its value is NOT present in the WeakSet object because it is garbage collected 
};
</script>
        <details>
        <summary> CODE : </summary>
        <pre>
    &lt;button onmouseup="weakMapTest()"&gt; RUN TEST (result in console) &lt;/button&gt;
&lt;script&gt;
var weakMapTest = function(){
    var myObj1 = {};
    var myObj2 = {};
    
    var myWeakMap = new WeakMap([[myObj1, 1], [myObj2, 2], [[1], 3]]);   // the 3rd item [[1], 3] is immediately garbage collected 
        console.log(myWeakMap.has(myObj1));                              // -&gt; true         // object reference and its value is present in the WeakSet object 
        console.log(myWeakMap.has(myObj2));                              // -&gt; true         // object reference and its value is present in the WeakSet object 
        
    myObj2 = {};                                                         // the myObj2 variable is reasigned (not references the previous assigned object any more)
        
        console.log(myWeakMap.has(myObj1));                              // -&gt; true         // object reference and its value is present in the WeakSet object 
        console.log(myWeakMap.has(myObj2));                              // -&gt; false        // object reference and its value is NOT present in the WeakSet object because it is garbage collected 
};
&lt;/script&gt;
        </pre>
        </details>
</details>
<!----------------------------------------------------------------------------------------------------------------------------> 
<hr>
<h2 style="color:darkblue;"><u> The <mark>get()</mark> / <mark>set()</mark> / <mark>has()</mark> / <mark>delete()</mark> methods </u></h2>    
<details class="example">
<summary> DEMO </summary>
    <pre>
    var myObj1 = {p1:'val1'};
    var myObj2 = {p2:'val2'};
    
    var myWeakMap = new WeakMap();
    
// get() / set() / delete() -----------------------------------------------------------
    myWeakMap.set(myObj1, 'first');                                                    // -> WeakMap{[myObj1, 'first']}     // new items (key-value pair) added    
    myWeakMap.set(myObj2, 'second');                                                   // -> WeakMap{[myObj1, 'first'], [myObj2, 'second']}
    
    myWeakMap.delete(myObj2);                                                          // -> true                           // [myObj2, 'second'] key-value pair deleted from the WeakMap object    
    myWeakMap.delete(noObj);                                                           // -> false                          // delete operation failed (no such key found)    
    
    myWeakMap.get(myObj1);                                                             // -> 'first'                        // value associated to the 'myObj1' object reference is returned  
    myWeakMap.get(myObj2);                                                             // -> undefined                      // no such WeakMap key found  
    
// has() ------------------------------------------------------------------------------
    myWeakMap.has(myObj1);                                                             // -> true                           // WeakMap contains the myObj1 object reference as key    
    
    myObj1 = 'new value';                                                              // varialbe has a new value assigned to (so it does not references the {p1:'val1'} object any more = WeakMap marks it and its value for garbage collection)    
    myWeakMap.has(myObj1);                                                             // -> false                          // WeakMap does not have the myObj1 object reference as key any more because it is garbage collected along with its value    
    </pre>
</details>
<details class="example">
<summary> Example : </summary>
<h4 style="color:darkblue;"><u> <mark>WeakMap</mark> TEST </u></h4>
    <button onmouseup="weakMapMethods()"> RUN TEST (result in console) </button>
<script>
var weakMapMethods = function(){
    var myObj1 = {p1:'val1'};
    var myObj2 = {p2:'val2'};
    var noObj = {};
    
    var myWeakMap = new WeakMap();
    
// set() -------------------------------------------------------
    console.log( myWeakMap.set(myObj1, 4154n) );                // -> WeakMap{[myObj1, 4154n]}
    console.log( myWeakMap.set(myObj2, 1452n) );                // -> WeakMap{[myObj1, 4154n], [myObj2, 1452n]}
    
// get() -------------------------------------------------------
    console.log( myWeakMap.get(myObj1) );                       // -> 4154n
    console.log( myWeakMap.get(noObj) );                        // -> undefined         // no such object reference found  
    
// delete() ----------------------------------------------------
    console.log( myWeakMap.delete(myObj1) );                    // -> true              // delete operation successful
    console.log( myWeakMap.delete(noObj) );                     // -> false             // delete failed (no such key found)   
    
// has() -------------------------------------------------------
    console.log( myWeakMap.has(myObj2) );                       // -> true              // object reference is present as key in the WeakMap object 
    
    myObj2 = {}                                                 // new value assigned to the 'myObj2' variable 
    
    console.log( myWeakMap.has(myObj2) );                       // -> false             // object reference and its value are garbage collected 
};
</script>
        <details>
        <summary> CODE : </summary>
        <pre>
    &lt;button onmouseup="weakMapMethods()"&gt; RUN TEST (result in console) &lt;/button&gt;
&lt;script&gt;
var weakMapMethods = function(){
    var myObj1 = {p1:'val1'};
    var myObj2 = {p2:'val2'};
    var noObj = {};
    
    var myWeakMap = new WeakMap();
    
// set() -------------------------------------------------------
    console.log( myWeakMap.set(myObj1, 4154n) );                // -&gt; WeakMap{[myObj1, 4154n]}
    console.log( myWeakMap.set(myObj2, 1452n) );                // -&gt; WeakMap{[myObj1, 4154n], [myObj2, 1452n]}
    
// get() -------------------------------------------------------
    console.log( myWeakMap.get(myObj1) );                       // -&gt; 4154n
    console.log( myWeakMap.get(noObj) );                        // -&gt; undefined         // no such object reference found  
    
// delete() ----------------------------------------------------
    console.log( myWeakMap.delete(myObj1) );                    // -&gt; true              // delete operation successful
    console.log( myWeakMap.delete(noObj) );                     // -&gt; false             // delete failed (no such key found)   
    
// has() -------------------------------------------------------
    console.log( myWeakMap.has(myObj2) );                       // -&gt; true              // object reference is present as key in the WeakMap object 
    
    myObj2 = {}                                                 // new value assigned to the 'myObj2' variable 
    
    console.log( myWeakMap.has(myObj2) );                       // -&gt; false             // object reference and its value are garbage collected 
};
&lt;/script&gt;
        </pre>
        </details>
</details>
    
    <br><br>
</body>
</html>