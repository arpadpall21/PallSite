<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title> Proxy </title> 
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.3.1/css/all.css" integrity="sha384-mzrmE5qonljUremFsqc01SB46JvROS7bZs3IO2EmfFsd15uHvIt+Y8vEf7N7fWAU" crossorigin="anonymous"> 
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <link rel="stylesheet" href="../../../Assets/stylesPages.css"> 
    <script src="../../../Assets/scriptPages.js"></script>
</head>
<body>
<h1> Proxy (ver 4.0.0) </h1>
    <p> Updated ( 2021-09-08 )</p>
    <p class="sitenav"> <a href="../../../index.html">MySite></a>
        <a href="../../index.html">JavaScript></a> 
        <a href="../index.html">Objects></a> Proxy
    </p>
<table class="table">
<caption>
    <span class="changeListOrder">[Ordered: <span>Alphabetically</span>]</span>
</caption>
    <tr>
        <th style="width:30%;"> Method </th>
        <th> Description </th>
    </tr>
<tr class="05.01">
  <td> 
      new Proxy(<strong>target:obj|fn</strong>, <strong class="openable">handlerObj<div>
        <p> ex: registering a get handler </p>
        <p><mark>new Proxy(targetObj, {get:function(target, prop){  //business logic here...  }}</mark></p>
      </div></strong>)
  </td>
  <td> 
      - returns a <strong>proxy</strong> object which 'traps' calls between the the call and the <strong>target</strong> object <br>
      - calls are trapped when made on the <strong>proxy</strong> object, <u>(the <strong>proxy</strong> has no effect when we make direct calls on the <strong>target</strong> object)</u> <br>
      - the <strong>handler</strong> object where we can program trapped calls through handlers 
      <span class="browserSupport" title="updated : 2021-09-27">
          <span><i class="fab fa-chrome"></i> 49 </span>
          <span><i class="fab fa-firefox"></i> 18 </span>
          <span><i class="fab fa-opera"></i> 36 </span>
          <span><i class="fab fa-internet-explorer"></i><i class="fab fa-edge"></i> 10 </span>
          <span><i class="fab fa-safari"></i> 10 </span>
          <span><i class="fab fa-node-js"></i> 6.0.0 </span>
      </span>
  </td>
</tr>
<tr class="10.01">
  <td> 
      Proxy.revocable(<strong>target:obj|fn</strong>, <strong class="openable">handlerObj<div>
        <p> ex: registering a get handler </p>
        <p><mark>Proxy.recoverable(targetObj, {get:function(target, prop){  //business logic here...  }}</mark></p>
      </div></strong>)
  </td>
  <td> 
      - return a <strong>revocableProxy</strong> object which has the ability to disable its <strong>proxy</strong>   
      <span class="browserSupport" title="updated : 2021-09-27">
          <span><i class="fab fa-chrome"></i> 63 </span>
          <span><i class="fab fa-firefox"></i> 34 </span>
          <span><i class="fab fa-opera"></i> 50 </span>
          <span><i class="fab fa-internet-explorer"></i><i class="fab fa-edge"></i> 12 </span>
          <span><i class="fab fa-safari"></i> 10 </span>
          <span><i class="fab fa-node-js"></i> 6.0.0 </span>
      </span>
  </td>
</tr>
<tr class="10.02">
  <td> 
      <strong>revocableProxy</strong>.proxy
  </td>
  <td> 
      - returns the <strong>proxy</strong> object of the <strong>revocableProxy</strong>  
      <span class="browserSupport" title="updated : 2021-09-27">
          <span><i class="fab fa-chrome"></i> 63 </span>
          <span><i class="fab fa-firefox"></i> 34 </span>
          <span><i class="fab fa-opera"></i> 50 </span>
          <span><i class="fab fa-internet-explorer"></i><i class="fab fa-edge"></i> 12 </span>
          <span><i class="fab fa-safari"></i> 10 </span>
          <span><i class="fab fa-node-js"></i> 6.0.0 </span>
      </span>
  </td>
</tr>
<tr class="10.03">
  <td> 
      <strong>revocableProxy</strong>.revoke()
  </td>
  <td> 
      - disables the revocableProxy <u>(afther this call calls to <mark><strong>revocableProxy</strong>.proxy</mark> will throw a TypeError)</u>
      <span class="browserSupport" title="updated : 2021-09-27">
          <span><i class="fab fa-chrome"></i> 63 </span>
          <span><i class="fab fa-firefox"></i> 34 </span>
          <span><i class="fab fa-opera"></i> 50 </span>
          <span><i class="fab fa-internet-explorer"></i><i class="fab fa-edge"></i> 12 </span>
          <span><i class="fab fa-safari"></i> 10 </span>
          <span><i class="fab fa-node-js"></i> 6.0.0 </span>
      </span>
  </td>
</tr>
<tr class="15.01">
  <td colspan="2"> Proxy handlers </td>
</tr>
<tr class="15.02">
  <td> 
      <strong>handlerObj</strong>.get(<strong>target:obj</strong>, <strong>prop:str</strong>, <strong class="openable">receiver:obj<div>
        <p> - when calling the <strong>proxy</strong> with <mark>Reflect.get()</mark> the received object here is passed as 3rd argument in <mark>Reflect.get()</mark> </p>
        <p> ex: </p>
        <p> <mark>Reflect.get(<strong>proxy</strong>, <strong>prop</strong>, <strong>receiver:obj</strong>)</mark> </p>
      </div></strong>)
  </td>
  <td> 
      - traps get calls to object properties 
      <span class="browserSupport" title="updated : 2021-09-27">
          <span><i class="fab fa-chrome"></i> 49 </span>
          <span><i class="fab fa-firefox"></i> 18 </span>
          <span><i class="fab fa-opera"></i> 36 </span>
          <span><i class="fab fa-internet-explorer"></i><i class="fab fa-edge"></i> 10 </span>
          <span><i class="fab fa-safari"></i> 10 </span>
          <span><i class="fab fa-node-js"></i> 6.0.0 </span>
      </span>
  </td>
</tr>
<tr class="15.03">
  <td> 
      <strong>handlerObj</strong>.set(<strong>target:obj</strong>, <strong>prop:str</strong>, <strong>val</strong>, <strong class="openable">receiver:obj<div>
        <p> - when calling the <strong>proxy</strong> with <mark>Reflect.set()</mark> the received object here is passed as 4th argument in <mark>Reflect.set()</mark> </p>
        <p> ex: </p>
        <p> <mark>Reflect.set(<strong>proxy</strong>, <strong>prop</strong>, <strong>val</strong>, <strong>receiver:obj</strong>)</mark> </p>
      </div></strong>)
  </td>
  <td> 
      - traps set calls to object properties (must return <mark>true</mark>)
      <span class="browserSupport" title="updated : 2021-09-27">
          <span><i class="fab fa-chrome"></i> 49 </span>
          <span><i class="fab fa-firefox"></i> 18 </span>
          <span><i class="fab fa-opera"></i> 36 </span>
          <span><i class="fab fa-internet-explorer"></i><i class="fab fa-edge"></i> 10 </span>
          <span><i class="fab fa-safari"></i> 10 </span>
          <span><i class="fab fa-node-js"></i> 6.0.0 </span>
      </span>
  </td>
</tr>
<tr class="20.01">
  <td> 
      <strong>handlerObj</strong>.construct(<strong>class:fn</strong>, <strong>[arg, ...]</strong>, <strong class="openable">newTrg:class<div>
        <p> - when calling the <strong>proxy</strong> with <mark>Reflect.construct()</mark> the received constructor here is passed as 3rd argument in <mark>Reflect.construct()</mark> </p>
        <p> ex: </p>
        <p> <mark>Reflect.construct(<strong>class:fn</strong>, <strong>[arg, ...]</strong>, <strong>newTrg:fn</strong>)</mark> </p>
      </div></strong>)
  </td>
  <td> 
      - traps <mark>new</mark> keyword function calls 
      <span class="browserSupport" title="updated : 2021-09-27">
          <span><i class="fab fa-chrome"></i> 49 </span>
          <span><i class="fab fa-firefox"></i> 18 </span>
          <span><i class="fab fa-opera"></i> 36 </span>
          <span><i class="fab fa-internet-explorer"></i><i class="fab fa-edge"></i> 10 </span>
          <span><i class="fab fa-safari"></i> 10 </span>
          <span><i class="fab fa-node-js"></i> 6.0.0 </span>
      </span>
  </td>
</tr>
<tr class="20.02">
  <td> 
      <strong>handlerObj</strong>.apply(<strong>fn</strong>, <strong class="openable">thisVal<div>
        <p> - when the <strong>proxy</strong> is called with <mark>Reflect.apply()</mark> the received this value here is passed as 2nd argument in <mark>Reflect.apply()</mark> </p>
        <p> ex: </p>
        <p> <mark>Reflect.apply(<strong>fn</strong>, <strong>thisVal:any</strong>, <strong>[arg, ...]</strong>)</mark> </p>
      </div></strong>, <strong>[arg, ...]</strong>)
  </td>
  <td> 
      - traps function calls 
      <span class="browserSupport" title="updated : 2021-09-28">
          <span><i class="fab fa-chrome"></i> 49 </span>
          <span><i class="fab fa-firefox"></i> 18 </span>
          <span><i class="fab fa-opera"></i> 36 </span>
          <span><i class="fab fa-internet-explorer"></i><i class="fab fa-edge"></i> 10 </span>
          <span><i class="fab fa-safari"></i> 10 </span>
          <span><i class="fab fa-node-js"></i> 6.0.0 </span>
      </span>
  </td>
</tr>
<tr class="25.01">
  <td> 
      <strong>handlerObj</strong>.ownKeys(<strong>target:obj</strong>)
  </td>
  <td> 
      - trap <mark>Object.getOwnPropertyKeys()</mark> / <mark>Object.keys()</mark> / <mark>Object.getOwnPropertySymbols()</mark> calls <br>
      - the handler <span class="openable">return value<div>
        <p> - for <mark>Object.getOwnPropertyKeys()</mark> must return an Array with strings </p>
        <p> - for <mark>Object.getOwnPropertySymbols()</mark> must return an Array with symbols (strings are ignored) </p>
        <p> - for <mark>Object.keys()</mark> must return an iterator object containing strings  </p>
      </div></span> must be specific to the trap  
      <span class="browserSupport" title="updated : 2021-09-28">
          <span><i class="fab fa-chrome"></i> 49 </span>
          <span><i class="fab fa-firefox"></i> 18 </span>
          <span><i class="fab fa-opera"></i> 36 </span>
          <span><i class="fab fa-internet-explorer"></i><i class="fab fa-edge"></i> 10 </span>
          <span><i class="fab fa-safari"></i> 10 </span>
          <span><i class="fab fa-node-js"></i> 6.0.0 </span>
      </span>
  </td>
</tr>
<tr class="25.02">
  <td> 
      <strong>handlerObj</strong>.has(<strong>target:obj</strong>, <strong>prop:str</strong>)
  </td>
  <td> 
      - traps <mark>in</mark> operator calls 
      <span class="browserSupport" title="updated : 2021-09-28">
          <span><i class="fab fa-chrome"></i> 49 </span>
          <span><i class="fab fa-firefox"></i> 18 </span>
          <span><i class="fab fa-opera"></i> 36 </span>
          <span><i class="fab fa-internet-explorer"></i><i class="fab fa-edge"></i> 10 </span>
          <span><i class="fab fa-safari"></i> 10 </span>
          <span><i class="fab fa-node-js"></i> 6.0.0 </span>
      </span>
  </td>
</tr>
<tr class="25.03">
  <td> 
      <strong>handlerObj</strong>.getOwnPropertyDescriptor(<strong>target:obj</strong>, <strong>prop:str</strong>)
  </td>
  <td> 
      - traps <mark>Object.getOwnPropertyDescriptor()</mark> calls <br>
      - must return a <strong class="openable">propertyDescriptorObj<div>
        <p> <mark>{configurable:<strong>bol</strong>, writable:<strong>bol</strong>, enumerable:<strong>bol</strong>, value:<strong>val:any</strong>}</mark>
      </div></strong> (other properties will be ignored) 
      <span class="browserSupport" title="updated : 2021-09-28">
          <span><i class="fab fa-chrome"></i> 49 </span>
          <span><i class="fab fa-firefox"></i> 18 </span>
          <span><i class="fab fa-opera"></i> 36 </span>
          <span><i class="fab fa-internet-explorer"></i><i class="fab fa-edge"></i> 10 </span>
          <span><i class="fab fa-safari"></i> 10 </span>
          <span><i class="fab fa-node-js"></i> 6.0.0 </span>
      </span>
  </td>
</tr>
<tr class="25.04">
  <td> 
      <strong>handlerObj</strong>.defineProperty(<strong>target:obj</strong>, <strong>prop:str</strong>, <strong>propertyDescriptorObj</strong>)
  </td>
  <td> 
      - traps <mark>Object.defineProperty()</mark> calls (must return <mark>true</mark>) 
      <span class="browserSupport" title="updated : 2021-09-29">
          <span><i class="fab fa-chrome"></i> 49 </span>
          <span><i class="fab fa-firefox"></i> 18 </span>
          <span><i class="fab fa-opera"></i> 36 </span>
          <span><i class="fab fa-internet-explorer"></i><i class="fab fa-edge"></i> 10 </span>
          <span><i class="fab fa-safari"></i> 10 </span>
          <span><i class="fab fa-node-js"></i> 6.0.0 </span>
      </span>
  </td>
</tr>
<tr class="25.05">
  <td> 
      <strong>handlerObj</strong>.deleteProperty(<strong>target:obj</strong>, <strong>prop:str</strong>)
  </td>
  <td> 
      - traps <mark>delete</mark> operator calls (must return <mark>true</mark>) 
      <span class="browserSupport" title="updated : 2021-09-29">
          <span><i class="fab fa-chrome"></i> 49 </span>
          <span><i class="fab fa-firefox"></i> 18 </span>
          <span><i class="fab fa-opera"></i> 36 </span>
          <span><i class="fab fa-internet-explorer"></i><i class="fab fa-edge"></i> 10 </span>
          <span><i class="fab fa-safari"></i> 10 </span>
          <span><i class="fab fa-node-js"></i> 6.0.0 </span>
      </span>
  </td>
</tr>
<tr class="30.01">
  <td> 
      <strong>handlerObj</strong>.getPrototypeOf(<strong>target:obj</strong>)
  </td>
  <td> 
      - traps <mark>Object.getPrototypeOf()</mark> calls (must return some kind of object) 
      <span class="browserSupport" title="updated : 2021-09-29">
          <span><i class="fab fa-chrome"></i> 49 </span>
          <span><i class="fab fa-firefox"></i> 49 </span>
          <span><i class="fab fa-opera"></i> 36 </span>
          <span><i class="fab fa-internet-explorer"></i><i class="fab fa-edge"></i> 79 </span>
          <span><i class="fab fa-safari"></i> 10 </span>
          <span><i class="fab fa-node-js"></i> 6.0.0 </span>
      </span>
  </td>
</tr>
<tr class="30.02">
  <td> 
      <strong>handlerObj</strong>.setPrototypeOf(<strong>target:obj</strong>)
  </td>
  <td> 
      - traps <mark>Object.setPrototypeOf()</mark> calls (must return <mark>true</mark>) 
      <span class="browserSupport" title="updated : 2021-09-29">
          <span><i class="fab fa-chrome"></i> 49 </span>
          <span><i class="fab fa-firefox"></i> 49 </span>
          <span><i class="fab fa-opera"></i> 36 </span>
          <span><i class="fab fa-internet-explorer"></i><i class="fab fa-edge"></i> 12 </span>
          <span><i class="fab fa-safari"></i> 10 </span>
          <span><i class="fab fa-node-js"></i> 6.0.0 </span>
      </span>
  </td>
</tr>
<tr class="35.01">
  <td> 
      <strong>handlerObj</strong>.preventExtensions(<strong>target:obj</strong>)
  </td>
  <td> 
      - traps <mark>Object.preventExtensions()</mark> calls <br> 
      - must return <mark>true</mark> <u>(the <strong>target</strong> must be not extensible before we return <mark>true</mark>)</u>
      <span class="browserSupport" title="updated : 2021-09-29">
          <span><i class="fab fa-chrome"></i> 49 </span>
          <span><i class="fab fa-firefox"></i> 22 </span>
          <span><i class="fab fa-opera"></i> 36 </span>
          <span><i class="fab fa-internet-explorer"></i><i class="fab fa-edge"></i> 12 </span>
          <span><i class="fab fa-safari"></i> 10 </span>
          <span><i class="fab fa-node-js"></i> 6.0.0 </span>
      </span>
  </td>
</tr>
<tr class="35.02">
  <td> 
      <strong>handlerObj</strong>.isExtensible(<strong>target:obj</strong>)
  </td>
  <td> 
      - traps <mark>Object.preventExtensions()</mark> calls <br> 
      - must return a boolean which <span class="openable">reflects the <strong>target</strong> object's extensibility<div>
        <p> - if the <strong>target</strong> object is extensible, we must return <mark>true</mark> </p>
        <p> - if the <strong>target</strong> object is non extensible, we must return <mark>false</mark> </p>
      </div></span>
      <span class="browserSupport" title="updated : 2021-09-29">
          <span><i class="fab fa-chrome"></i> 49 </span>
          <span><i class="fab fa-firefox"></i> 31 </span>
          <span><i class="fab fa-opera"></i> 36 </span>
          <span><i class="fab fa-internet-explorer"></i><i class="fab fa-edge"></i> 12 </span>
          <span><i class="fab fa-safari"></i> 10 </span>
          <span><i class="fab fa-node-js"></i> 6.0.0 </span>
      </span>
  </td>
</tr>
</table>
    <br>
    <details class="example" id="notes">
    <summary> Notes :</summary>
        <!-- <p> - paragraph removes the 'empty' message from the detail TAG -->
    </details>
<h2 style="color:green;"><u> Useful Links : </u></h2>
    <p><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Proxy" target="_blank">Proxy Object (MDN)</a></p>
<h2 style="color:green;"><u> Remember This : </u></h2>
    
<h2 style="color:green;"><u> Description and Demonstration : </u></h2>
  <p> - a Proxy object acts as a 'trap' between the call and the original object </p>
  <p> - the proxy is linked to the original object and controls it, the proxy is programmed through handlers how it should control the original object </p>
  <p> - calls are made on the proxy object </p> 
  <pre class="syntax">
SYNTAX:   <strong>obj</strong>
  
          var <strong>proxy</strong> = new Proxy(<strong>obj</strong>, {                                                 <span style="color:darkgray;">// traps object operation</span>
            <strong>hander</strong>: function(<strong>target</strong>){                                                  <span style="color:darkgray;">// the handler traps the specified operation (ex: <mark>get</mark>)</span>    
              <strong>target</strong>                                                                   <span style="color:rgb(100, 149, 237);">// -> <strong>obj</strong></span>
              <span style="color:darkgray;">// trapped call business logic...</span>   
            }
          })
          
          <strong>proxy</strong><span style="color:darkgray;">[doing some object operation]</span>                                           <span style="color:darkgray;">// operations are maed on the <strong>proxy</strong> object (not on <strong>obj</strong>)</span>    
  </pre>
<h2 style="color:darkblue;"><u> <mark>Proxy()</mark> / <mark>Proxy.revocable()</mark> </u></h2> 
<details class="example">
<summary> DEMO </summary>
  <pre>
  const someObj = {p1:21};
  
  const proxy = new Proxy(someObj, {
    get: function(target, prop, receiver){                                             // get handler 
      return target[prop] + 1;
    },
    set: function(target, prop, val, receiver){                                        // set handler 
      target[prop] = val + 1;
      return true;
    }
  })
  
  proxy.p1;                                                                            // -> 22          // get call 'trapped' by the proxy  
  proxy.p2 = 30;                                                                       // set call 'trapped' by the proxy   
  
  someObj;                                                                             // -> {p1:21, p2:30} 
  
  // -! direct calls on the object are not trapped! 
  someObj.p1;                                                                          // -> 21 
  someObj.p2 = 20;
  someObj;                                                                             // -> {p1:21, p2:20} 
  
// Proxy.recoverable() ----------------------------------------------------------------
  const someObj2 = {p1:21};
  
  const proxyRecoverable = Proxy.revocable(someObj2, {
    get: function(target, prop, receiver){
      return target[prop] + 1;
    }
  })
  
  proxyRecoverable.proxy.p1;                                                           // -> 22          // the 'proxy' property is the proxy object 
  
  proxyRecoverable.revoke();                                                           // the revoke method disables the revocalbe proxy 
  proxyRecoverable.proxy.p1;                                                           // -> TypeError   // -! revocable proxy is not usable anymore 
  </pre>
  </details>
<details class="example">
<summary> Example : </summary>
<h4 style="color:darkblue;"><u> <mark>Proxy()</mark> TEST </u></h4>
  <pre>
  const someObj = {p1:21};
  
  const proxy = new Proxy(someObj, {
    get: function(target, prop, receiver){                                             // get handler 
      return target[prop] + 1;
    },
    set: function(target, prop, val, receiver){                                        // set handler 
      target[prop] = val + 1;
      return true;
    }
  })
  
  console.log( proxy.p1 );                                                             // -> 22          // get call 'trapped' by the proxy  
  proxy.p2 = 30;                                                                       // set call 'trapped' by the proxy   
  
  console.log( someObj );                                                              // -> {p1:21, p2:30} 
  
  // -! direct calls on the object are not trapped! 
  console.log( someObj.p1 );                                                           // -> 21 
  someObj.p2 = 20;
  console.log( someObj );                                                              // -> {p1:21, p2:20} 
  
// Proxy.recoverable() ----------------------------------------------------------------
  const someObj2 = {p1:21};
  
  const proxyRecoverable = Proxy.revocable(someObj2, {
    get: function(target, prop, receiver){
      return target[prop] + 1;
    }
  })
  
  console.log( proxyRecoverable.proxy.p1 );                                            // -> 22          // the 'proxy' property is the proxy object 
  
  proxyRecoverable.revoke();                                                           // the revoke method disables the revocalbe proxy 
  console.log( proxyRecoverable.proxy.p1 );                                            // -> TypeError   // -! revocable proxy is not usable anymore 
  </pre>
</details>
<hr>
<!---------------------------------------------------------------------------------------------------->
<h2 class="headerExtra"><u> Proxy handlers </u></h2>
<h2 style="color:darkblue;"><u> <mark>get</mark> / <mark>set</mark> / <mark>construct</mark> / <mark>apply</mark> / <mark>ownKeys</mark> / <mark>has</mark> / <mark>getOwnPropertyDescriptor</mark> / <mark>defineProperty</mark> / <mark>deleteProperty</mark> / <mark>getPrototypeOf</mark> / <mark>setPrototypeOf</mark> / <mark>preventExtensions</mark> / <mark>isExtensible</mark> </u></h2>
<details class="example">
<summary> DEMO </summary>
  <p> - <mark>get</mark> handler </p>
  <pre>
  const someObj1 = {p1:11};
  const someObj2 = {p1:21};
  
  const proxy = new Proxy(someObj1, {
    get(target, prop, receiver){   
      target;                                                                          // -> someObj1  |  someObj1
      prop;                                                                            // -> 'noProp'  |  'someProp' 
      receiver;                                                                        // -> someObj1  |  someObj2      // the 'receiver' is the object which is passed by Reflect    
      
      return 'mockedValue';                                                            // we return what we want  
    }
  })
  
  proxy.noProp;                                                                        // -> 'mockedValue'
  Reflect.get(proxy, 'someProp', someObj2);                                            // -> 'mockedValue'
  </pre>
  <p> - <mark>set</mark> handler </p>
  <pre>
  const someObj1 = {p1:11}
  const someObj2 = {p1:21}
  
  const proxy = new Proxy(someObj1, {
    set(target, prop, val, receiver){
      target;                                                                          // -> someObj1  |  someObj1 
      prop;                                                                            // -> 'newProp' | 'newProp2'
      val;                                                                             // -> 'newVal'  |  'newVal2'
      receiver;                                                                        // -> someObj1  |  someObj2   // the 'receiver' is the object which is passed by Reflect  
      
      target[prop] = val;                                                              // we can use anykind of business logic here to set properties   
      return true;                                                                     // we must return true 
    }
  })
  
  proxy.newProp = 'newVal';                                                            // -> {p1:11}
  Reflect.set(proxy, 'newProp2', 'newVal2', someObj2);                                 // -> true
  
  someObj1;                                                                            // -> {p1:11, newProp:'newVal', newProp2:'newVal2'}  
  </pre>
  <p> - <mark>construct</mark> handler </p>
  <pre>
  function Constructor1(a){
    this.a = a;
  }
  function Constructor2(){}
  
  const proxy = new Proxy(Constructor1, {
    construct: function(target, args, newTarget){       
      target;                                                                          // -> Constructor1  |  Constructor1  
      args;                                                                            // -> [10]          |  [20]
      newTarget;                                                                       // -> Constructor1  |  Constructor2    // the 'receiver' is the constructor passed in Reflect   
      
      return new target(args[0] + 1);                                                  // we return what we want here 
    }
  })
  
  const objA = new proxy(10);
  objA;                                                                                // -> {a:11}    
  
  const objB = Reflect.construct(proxy, [20], Constructor2);
  objB;                                                                                // -> {a:21}    
  </pre>
  <p> - <mark>apply</mark> handler </p>
  <pre>
  const someObj = {
    add: function(a, b){
      return a + b;
    }
  }
  
  const proxy = new Proxy(someObj.add, {
    apply: function(target, thisVal, args){
      target;                                                                          // -> someObj.add (function)  | someObj.add 
      thisVal;                                                                         // -> undefined               | 'x'           // this value passed in Reflect()     
      args;                                                                            // -> [2, 3]                  | [10, 20]
      
      return (args[0] + args[1]) / 2;
    }
  })
  
  proxy(2, 3);                                                                         // -> 2.5 
  Reflect.apply(proxy, 'x', [10, 20]);                                                 // -> 15 
   
// traps for calling object functions -------------------------------------------------
  const someObj = {
    someFn(a, b) {
      return a + b;
    }
  }
  
  const trap = Proxy.revocable(someObj, {
    get() {                                                                            // the get handler traps any attemt to get a property   
      return function(a, b) {                                                          // since the property is a function we return a function which is then called    
        return a + b + 1;
      }
    },
  })
  
  const proxy = trap.proxy;
  
  proxy.someFn(1, 1);                                                                  // -> 3
  </pre>  
  <p> - <mark>ownKeys</mark> handler </p>
  <pre>
// Reflect.ownKeys() / Object.getOwnPropertyNames() -----------------------------------
  const someObj = {p1:21, p2:22};
  
  const proxy = new Proxy(someObj, {
    ownKeys: function(target){
      target;                                                                          // -> someObj
      
      return ['x', 'y'];                                                               // must return an Array of strings   
    }
  })
  
  Reflect.ownKeys(proxy);                                                              // -> ['x', 'y']
  Object.getOwnPropertyNames(proxy);                                                   // -> ['x', 'y']
  
// Object.keys() ----------------------------------------------------------------------
  const someObj2 = {p1:21, p2:22};
  
  const proxy2 = new Proxy(someObj2, {
    ownKeys: function(target){
      target;                                                                          // -> someObj
      
      return Object.keys(target);                                                      // must return an iterator object containing strings  
    }
  })
  
  Object.keys(proxy2);                                                                 // -> ['p1', 'p2']
  
// Object.getOwnPropertySymbols() -----------------------------------------------------
  const someObj3 = {p1:21, p2:22};
  
  const proxy3 = new Proxy(someObj3, {
    ownKeys: function(target){
      target;                                                                         // -> someObj
      
      const arr = [];
      const symbol1 = Symbol();
      arr[0] = symbol1;
      
      return arr;                                                                     // must return an Array containing Symbols (strings are ignored)    
    }
  })
  
  Object.getOwnPropertySymbols(proxy3);                                               // -> [symbol1]
  </pre>
  <p> - <mark>has</mark> handler </p>
  <pre>
  const someObj = {p1:21};
  
  const proxy = new Proxy(someObj, {
    has: function(target, prop){
      target;                                                                          // -> {p1:21}  |  {p1:21}
      prop;                                                                            // -> 'p1'     |  'noProp'
      
      return true;                                                                     // we always return true   
    }
  })
  
  'p1' in proxy;                                                                       // -> true 
  'noProp' in proxy;                                                                   // -> true 
  </pre>
  <p> <mark>getOwnPropertyDescriptor</mark> handler </p>
  <pre>
  const someObj = {p1:21};
  
  const proxy = new Proxy(someObj, {
    getOwnPropertyDescriptor: function(target, prop){
      target;                                                                          // -> {p1:21}
      prop;                                                                            // -> 'noProp'
    
      const propDescriptor = {
        configurable:true, 
        writable:true, enumerable:false, 
        value:'someVal', 
        extraProp:'ignored'                                                            // non property descriptor properties are simply ignored    
      }
      
      return propDescriptor;
    }
  })
  
  Object.getOwnPropertyDescriptor(proxy, 'noProp');                                    // -> {configurable:true, writable:true, enumerable:false, value:'someVal'}
  </pre>
  <p> <mark>defineProperty</mark> handler </p>
  <pre>
  const someObj = {p1:21, p2:22};
  
  const proxy = new Proxy(someObj, {
    defineProperty: function(target, prop, descriptor){
      target;                                                                          // -> {p1:21, p2:22}
      prop;                                                                            // -> 'newProp' 
      descriptor;                                                                      // -> {value:'x', configurable:true}      // -! invalid property descriptor properties are omitted 
    
      return true;                                                                     // must return true  
    }
  })
  
  const propertyDesc = {
    value:'x', 
    configurable:true, 
    ivalidDescriptor:true                                                              // this property will be omitted in the received handler   
  };
  
  console.log( Object.defineProperty(proxy, 'newProp', propertyDesc) );                // -> {p1:22, p2:22} 
  </pre>
  <p> <mark>deleteProperty</mark> handler </h4>
  <pre>
  const someObj = {p1:21, p2:22};
  
  const proxy = new Proxy(someObj, {
    deleteProperty: function(target, prop){
      target;                                                                          // -> {p1:21, p2:22}
      prop;                                                                            // -> 'someProp' 
    
      return true;                                                                     // must return true 
    }
  })
  
  delete proxy.someProp;                                                               // -> true 
  </pre>
  <p> <mark>getPrototypeOf</mark> handler </h4>
  <pre>
  const someObj = {p1:21, p2:22};
  
  const proxy = new Proxy(someObj, {
    getPrototypeOf: function(target){
      target;                                                                          // -> {p1:21, p2:22}
    
      return {fakeProxy:true}
    }
  })
  
  Object.getPrototypeOf(proxy);                                                        // -> {fakeProxy:true}
  </pre>
  <p> <mark>setPrototypeOf</mark> handler </p>
  <pre>
  const someObj = {p1:21, p2:22};
  
  const proxy = new Proxy(someObj, {
    setPrototypeOf: function(target, proto){
      target;                                                                          // -> {p1:21, p2:22}
      proto;                                                                           // -> {fakeProto:true}
    
      return true
    }
  })
  
  Object.setPrototypeOf(proxy, {fakeProto:true});                                      // -> {p1:21, p2:22}
  </pre>
  <p> <mark>preventExtensions</mark> handler </p>
  <pre>
  const someObj = {p1:21, p2:22};
  
  const proxy = new Proxy(someObj, {
    preventExtensions: function(target){
      target;                                                                          // -> {p1:21, p2:22}
      Object.preventExtensions(target);                                                // -! target must be not extensible before we return true 
      
      return true;
    }
  })
  
  Object.preventExtensions(proxy);                                                     // -> {p1:21, p2:22}
  </pre>
  <p> <mark>isExtensions</mark> handler </p>
  <pre>
  const someObj = {p1:21, p2:22};
  
  const proxy = new Proxy(someObj, {
    isExtensible: function(target){
      target;                                                                          // -> someObj
      
      // return false                                                                  // -! this would throw an Error, because target is extensible 
      return true
    }
  })
  
  Object.isExtensible(proxy);                                                          // -> true   
  </pre>
</details>
<details class="example">
<summary> Example : </summary>
<h4 style="color:darkblue;"><u> <mark>get</mark> / <mark>set</mark> handlers TEST </u></h4>
  <pre>
  const someObj1 = {p1:11}
  const someObj2 = {p1:21, p2:'someVal'}
  const someObj3 = {p1:31}
  
  const proxy = new Proxy(someObj, {
    get(target, prop, receiver){                                                       // the 'receiver' is the object which is passed by Reflect  
      console.log( target );                                                           // -> someObj1
      console.log( receiver );                                                         // -> someObj3
      return receiver[prop];                                                           // we can return the value of the receiver object's property   
    },
    set(target, prop, val, receiver){
      console.log( target );                                                           // -> someObj1
      console.log( receiver );                                                         // -> someObj3
      receiver[prop] = val;                                                            // we can set the receiver object's property  
      return true;                                                                     // we indicate the success of the operation 
    }
  })
  
  console.log( Reflect.get(proxy, 'p1', someObj2) );                                   // -> 21                      // the get operation is performed on 'someObj2'    
  console.log( Reflect.set(proxy, 'p1', 51, someObj3));                                // -> true 
  console.log( someObj3 );                                                             // -> {p1:51}                 // receiver's property set  
  
  console.log( Reflect.get(proxy, 'p2', someObj2) );                                   // -> 'someVal' 
  console.log( Reflect.set(proxy, 'p2', 'otherVal', someObj3));                        // -> true
  console.log( someObj3 );                                                             // -> {p1:51, p2:'otherVal'}  // receiver's property set  
  </pre>
<hr>
<!---------------------------------------------------------------------------------------------------->
<h4 style="color:darkblue;"><u> <mark>construct</mark> handler TEST </u></h4>
  <pre>
  function Constructor1(a){
    this.a = a;
  }
  function Constructor2(){}
  
  const proxy = new Proxy(Constructor1, {
    construct: function(target, args, newTarget){       
      console.log( newTarget );                                                        // -> Constructor1  |  Constructor2  
      
      return new target(args[0] + 1)
    }
  })
  
  const objA = new proxy(10);
  console.log( objA );                                                                 // -> {a:11}    
  
  const objB = Reflect.construct(proxy, [20], Constructor2);
  console.log( objB );                                                                 // -> {a:21}    
  </pre>
<hr>
<!---------------------------------------------------------------------------------------------------->
<h4 style="color:darkblue;"><u> <mark>apply</mark> handler TEST </u></h4>
  <pre>
  const someObj = {
    add: function(a, b){
      return a + b;
    }
  }
  
  const proxy = new Proxy(someObj.add, {
    apply: function(target, thisVal, args){
      console.log( target );                                                           // -> someObj.add (function)  | someObj.add 
      console.log( thisVal );                                                          // -> undefined               | 'x'           // the this value is available only when the proxy called by Reflect.apply()   
      console.log( args );                                                             // -> [2, 3]                  | [10, 20]
      
      return (args[0] + args[1]) / 2;
    }
  })
  
  console.log( proxy(2, 3) );                                                          // -> 2.5 
  console.log( Reflect.apply(proxy, 'x', [10, 20]) );                                  // -> 15 
  </pre>
<hr>
<!---------------------------------------------------------------------------------------------------->
<h4 style="color:darkblue;"><u> <mark>ownKeys</mark> handler TEST </u></h4>
  <pre>
// Reflect.ownKeys() / Object.getOwnPropertyNames() -----------------------------------
  const someObj = {p1:21, p2:22};
  
  const proxy = new Proxy(someObj, {
    ownKeys: function(target){
      console.log( target );                                                           // -> {p1:21, p2:22}
      return ['x', 'y'];                                                               // must return an Array of strings   
    }
  })
  
  console.log( Reflect.ownKeys(proxy) );                                               // -> ['x', 'y']
  console.log( Object.getOwnPropertyNames(proxy) );                                    // -> ['x', 'y']
  
// Object.keys() ----------------------------------------------------------------------
  const someObj2 = {p1:21, p2:22};
  
  const proxy2 = new Proxy(someObj2, {
    ownKeys: function(target){
      console.log( target );                                                           // -> {p1:21, p2:22}
      return Object.keys(target);                                                      // must return an iterator object containing strings  
    }
  })
  
  console.log( Object.keys(proxy2) );                                                  // -> ['p1', 'p2']
  
// Object.getOwnPropertySymbols() -----------------------------------------------------
  const someObj3 = {p1:21, p2:22};
  
  const proxy3 = new Proxy(someObj3, {
    ownKeys: function(target){
      console.log( target );                                                           // -> {p1:21, p2:22}
      
      const arr = [];
      const symbol = Symbol();
      arr[0] = symbol;
      
      return arr;                                                                     // must return an Array containing Symbols (strings are ignored)
    }
  })
  
  console.log( Object.getOwnPropertySymbols(proxy3) );                                // -> [Symbol]
  </pre>
<hr>
<!---------------------------------------------------------------------------------------------------->
<h4 style="color:darkblue;"><u> <mark>has</mark> handler TEST </u></h4>
  <pre>
  const someObj = {p1:21};
  
  const proxy = new Proxy(someObj, {
    has: function(target, prop){
      console.log( target );                                                           // -> {p1:21}  |  {p1:21}
      console.log( prop );                                                             // -> 'p1'     |  'noProp'
      
      return true;
    }
  })
  
  console.log( 'p1' in proxy );                                                        // -> true 
  console.log( 'noProp' in proxy );                                                    // -> true 
  </pre>
<hr>
<!---------------------------------------------------------------------------------------------------->
<h4 style="color:darkblue;"><u> <mark>getOwnPropertyDescriptor</mark> handler TEST </u></h4>
  <pre>
  const someObj = {p1:21};
  
  const proxy = new Proxy(someObj, {
    getOwnPropertyDescriptor: function(target, prop){
      console.log( target );                                                           // -> {p1:21}
      console.log( prop );                                                             // -> 'noProp'
    
      return {configurable:true, writable:true, enumerable:false, value:'someVal', extraProp:'ignored'}   // non property descriptor properties are ignored   
    }
  })
  
  console.log( Object.getOwnPropertyDescriptor(proxy, 'noProp') );                     // -> {configurable:true, writable:true, enumerable:false, value:'someVal'}
  </pre>
<hr>
<!---------------------------------------------------------------------------------------------------->
<h4 style="color:darkblue;"><u> <mark>defineProperty</mark> handler TEST </u></h4>
  <pre>
  const someObj = {p1:21, p2:22};
  
  const proxy = new Proxy(someObj, {
    defineProperty: function(target, prop, descriptor){
      console.log( target );                                                           // -> {p1:21, p2:22}
      console.log( prop );                                                             // -> 'newProp' 
      console.log( descriptor );                                                       // -> {value:'x', configurable:true}      // -! invalid property descriptor properties are omitted 
    
      return true;                                                                     // must indicate the success of the operation 
    }
  })
  
  const propertyDesc = {value:'x', configurable:true, ivalidDescriptor:true};
  
  console.log( Object.defineProperty(proxy, 'newProp', propertyDesc) );                // -> {p1:22, p2:22} 
  </pre>
<hr>
<!---------------------------------------------------------------------------------------------------->
<h4 style="color:darkblue;"><u> <mark>deleteProperty</mark> handler TEST </u></h4>
  <pre>
  const someObj = {p1:21, p2:22};
  
  const proxy = new Proxy(someObj, {
    deleteProperty: function(target, prop){
      console.log( target );                                                           // -> {p1:21, p2:22}
      console.log( prop );                                                             // -> 'someProp' 
    
      return true;                                                                     // must return true 
    }
  })
  
  console.log( delete proxy.someProp );                                                // -> true 
  </pre>
<hr>
<!---------------------------------------------------------------------------------------------------->
<h4 style="color:darkblue;"><u> <mark>getPrototypeOf</mark> handler TEST </u></h4>
  <pre>
  const someObj = {p1:21, p2:22};
  
  const proxy = new Proxy(someObj, {
    getPrototypeOf: function(target){
      console.log( target );                                                           // -> {p1:21, p2:22}
    
      return {fakeProxy:true}
    }
  })
  
  console.log( Object.getPrototypeOf(proxy) );                                         // -> {fakeProxy:true}
  </pre>
<hr>
<!---------------------------------------------------------------------------------------------------->
<h4 style="color:darkblue;"><u> <mark>setPrototypeOf</mark> handler TEST </u></h4>
  <pre>
  const someObj = {p1:21, p2:22};
  
  const proxy = new Proxy(someObj, {
    setPrototypeOf: function(target, proto){
      console.log( target );                                                           // -> {p1:21, p2:22}
      console.log( proto );                                                            // -> {fakeProto:true}
    
      return true
    }
  })
  
  console.log( Object.setPrototypeOf(proxy, {fakeProto:true}) );                       // -> {p1:21, p2:22}
  </pre>
<hr>
<!---------------------------------------------------------------------------------------------------->
<h4 style="color:darkblue;"><u> <mark>preventExtensions</mark> handler TEST </u></h4>
  <pre>
  const someObj = {p1:21, p2:22};
  
  const proxy = new Proxy(someObj, {
    preventExtensions: function(target){
      console.log( target );                                                           // -> {p1:21, p2:22}
      Object.preventExtensions(target);                                                // -! target must be not extensible before we return true 
      
      return true;
    }
  })
  
  console.log( Object.preventExtensions(proxy) );                                      // -> {p1:21, p2:22}
  </pre>
<hr>
<!---------------------------------------------------------------------------------------------------->
<h4 style="color:darkblue;"><u> <mark>isExtensions</mark> handler TEST </u></h4>
  <pre>
  const someObj = {p1:21, p2:22};
  const someObj2 = {p1:21, p2:22};
  
  const proxy = new Proxy(someObj, {
    isExtensible: function(target){
      console.log( target );                                  // -> {p1:21, p2:22}
      
      return true;                                            // we must return a boolean which reflects the extensibility of the target object 
    }
  })
  const proxy2 = new Proxy(someObj2, {
    isExtensible: function(target){
      Object.preventExtensions(target);
      
      return false;                                           // we must return a boolean which reflects the extensibility of the target object 
    }
  })
  
  console.log( Object.isExtensible(proxy) );                  // -> true   
  console.log( Object.isExtensible(proxy2) );                 // -> false
  </pre>
</details>
  
  
    <br><br>
</body>
</html>
