<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title> File System Promise API </title> 
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.3.1/css/all.css" integrity="sha384-mzrmE5qonljUremFsqc01SB46JvROS7bZs3IO2EmfFsd15uHvIt+Y8vEf7N7fWAU" crossorigin="anonymous"> 
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <link rel="stylesheet" href="../../../Assets/stylesPages.css"> 
    <script src="../../../Assets/scriptPages.js"></script>
</head>
<body>
<h1> File System Promise API (ver 3.4.1) </h1>
    <p> Updated ( 2019-10-11 / 2020-07-10)</p>
    <p class="sitenav"> <a href="../../../index.html">MySite></a>
        <a href="../../index.html">Node.js></a>  
        <a href="../index.html">File System></a> File System Promise API
    </p>
<table class="table">
<caption> File System Promise API </caption>
    <tr>
        <th style="width:30%;"> Method </th>
        <th> Description </th>
    </tr>
    <tr>
        <td> <strong>fs</strong>.promises </td>
        <td> provides access to the File System Promise API
            <span id="browserSupport" title="updated : 2019-10-11">
                <span><i class="fab fa-node-js"></i> 10.0.0 </span>
            </span>
        </td>
    </tr>
    <tr>
        <td colspan="2"> File Descriptor </td>
    </tr>
    <tr>
        <td> 
            <strong>fsPromises</strong>.open(<strong>path:str|buf|urlObj</strong>, <i class="openable">flag:str|nr<div>
                    <p> Default: <mark>r</mark> </p>
                    <p> <mark>a</mark> - append (open file for appending data to its content (creates a new file if it does not exist)) </p>
                    <p> <mark>ax</mark> - append - (creates a new file and appends the passed datas to it (fails if the file exist)) </p>
                    <p> <mark>a+</mark> - read and append (open file for reading and appending datas to its content (creates a new file if it does not exist)) </p>
                    <p> <mark>ax</mark> - read and append (creates a new file for reading and appending datas to it (fails if the file exist)) </p>
                    <p> <mark>as</mark> - append (synchronous) open file for appending data to its content (creates a new file if it does not exist)) </p>
                    <p> <mark>as+</mark> - read and append (synchronous) (open file for reading and appending datas to its content (creates a new file if it does not exist)) </p>
                    <p> <mark>r</mark> - read (open existing file for reading (fails if the file does not exist)) </p>
                    <p> <mark>r+</mark> - read and write (open existing file for reading and writing (fails if the file does not exist)) </p>
                    <p> <mark>rs+</mark> - read and write (synchronous) (open existing file for reading and writing (fails if the file does not exist)) </p>
                    <p> <mark>w</mark> - write (open file for writing (existing file will be truncated, a new file will be crated if it does not exist)) </p>
                    <p> <mark>wx</mark> - write (creates a new file for writing (file content will be truncated, fails if the file exist)) </p>
                    <p> <mark>w+</mark> - read and write (open file for reading and writing (existing file will be truncated, a new file will be crated if it does not exist)) </p>
                    <p> <mark>wx+</mark> - read and write (creates a new file for reading and writing (file content will be truncated, fails if the file exist))</p>
                </div></i>, <i class="openable">mode:nr<div>
                    <p> Default: <mark>0o666</mark> (read write) <u>this option works only when a new file is created</u> </p>
                    <p> - on Windows only <mark>0o666</mark> (read write) and <mark>0o400</mark> can be used </p>
                    <p> - linux file access mechanism used (ex: <mark>744</mark> = owner has full permission but the gropu and others can read only) </p>
                    <p> <mark>7</mark> - read, write, and execute </p>
                    <p> <mark>6</mark> - read and write </p>
                    <p> <mark>5</mark> - read and execute </p>
                    <p> <mark>4</mark> - read only </p>
                    <p> <mark>3</mark> - write and execute </p>
                    <p> <mark>2</mark> - write only </p>
                    <p> <mark>1</mark> - execute only </p>
                    <p> <mark>0</mark> - no permission </p>
                </div></i>) 
        </td>
        <td> 
            - returns a Promise which allocates a new file descriptor to the passed file <br>
            - the Promise resolves into a <mark>FileHandle</mark> object which is a file descriptor wrapper object (rejected Promise = error) <br>
            - the <mark>&lt;</mark> <mark>&gt;</mark> <mark>:</mark> <mark>"</mark> <mark>/</mark> <mark>\</mark> <mark>|</mark> <mark>?</mark> <mark>*</mark> characters are reserved in Windows 
    </pre>
            <span id="browserSupport" title="updated : 2020-07-09">
                <span><i class="fab fa-node-js"></i> 10.0.0 </span>
                <span><i class="fab fa-node-js"></i> 11.0.0 <i>flag</i> optional and default <mark>r</mark></span>
            </span>
        </td>
    </tr>
    <tr>
        <td colspan="2"> Read and Write files </td>
    </tr>
    <tr>
        <td> 
            <strong>fsPromises</strong>.appendFile(<strong>path:str|buf|urlObj|fileHandle</strong>, <strong>data:str|buf</strong>, <i class="openable">option:obj<div>
                <p> flag: <strong>str</strong> - (Default: <mark>a</mark> = append data / read-write) </p>
                <p> mode: <strong>str</strong> - (Default: <mark>0o666</mark> = readable writable when a new file is created) </p>
                <p> encoding: <strong>str</strong> - (Default: <mark>'utf-8'</mark>) </p> 
            </div></i>)
        </td>
        <td> returns a Promise which appends the data to the passed file's content (creates a new file if it doesn't exist) (rejected Promise = error)
            <span id="browserSupport" title="updated : 2020-07-09">
                <span><i class="fab fa-node-js"></i> 10.0.0 </span>
            </span>
        </td>
    </tr>
    <tr>
        <td> 
            <strong>fsPromises</strong>.readFile(<strong>path:str|buf|urlObj|fileHandle</strong>, <i class="openable">option:obj<div>
                <p> flag: <strong>str</strong> - (Default <mark>r</mark> read-only existing file) </p>
                <p> encoding: <strong>str</strong>
            </div></i>)
        </td>
        <td> 
            - returns a Promise which reads the entire content of the passed file of File Handle <br>
            - the Promise resolves into the read data (rejected Promise = error)  
            <span id="browserSupport" title="updated : 2020-07-09">
                <span><i class="fab fa-node-js"></i> 10.0.0 </span>
            </span>
        </td>
    </tr>
    <tr>
        <td> 
            <strong>fsPromises</strong>.truncate(<strong>path:str|buf|urlObj</strong>, <i>length:nr</i>) 
        </td>
        <td> 
            - returns a Promise which truncates the file's content <u>(truncates as bytes)</u> (rejected promise = err or) (LINUX <mark>truncate()</mark>) <br>
            - if <i>length:nr</i> is bigger than the file's content the remaining space is filled with <mark>\0</mark> characters) (Default: <mark>0</mark>) 
            <span id="browserSupport" title="updated : 2020-07-09">
                <span><i class="fab fa-node-js"></i> 10.0.0 </span>
            </span>
        </td>
    </tr>
    <tr>
        <td> 
            <strong>fsPromises</strong>.writeFile(<strong>path:str|buf|urlObj|fileHandle</strong>, <strong>data:str|buf|Uint8Array</strong>, <i class="openable">option:obj<div>
                <p> flag: <strong>str</strong> - (Default: <mark>w</mark> = (re)creates the file for wirting) </p>
                <p> mode: <strong>str</strong> - (Default: <mark>0o666</mark> = readable writable when a new file is created) </p>
                <p> encoding: <strong>str</strong> - (Default: <mark>'utf-8'</mark>) </p> 
            </div></i>)
        </td>
        <td> returns a Promise which (re)creates a file with the passed data (rejected promise = error)
            <span id="browserSupport" title="updated : 2020-07-09">
                <span><i class="fab fa-node-js"></i> 10.0.0 </span>
                <span class="openable"><i class="fab fa-node-js"></i> more... <div>
                    <p> - 14.0.0 - <strong>data</strong> is not coerced into string if an unsupported type is passed </p>
                </div></span>
            </span>
        </td>
    </tr>
    <tr>
        <td colspan="2"> Watching Files </td>
    </tr>
    <tr>
        <td> 
            <strong>fsPromises</strong>.lstat(<strong>path:str|buf|urlObj</strong>, <i class="openable">option:obj<div>
                <p> bigint: <strong>bol</strong> - stats are returned as BigInt value (ex: <mark>21n</mark>) </p>
            </div></i>) 
        </td>
        <td> 
            - returns a Promise which resolves to a <mark>Stats</mark> object (holds the stats of the passed file or symbolic-link) (rejected promise = error) (LINUX <mark>lstat()</mark>) <br>
            - does the same as <mark>stat()</mark> but this method points to the symbolic-link itself instead of the file)
            <span id="browserSupport" title="updated : 2020-07-10">
                <span><i class="fab fa-node-js"></i> 10.0.0 </span>
                <span><i class="fab fa-node-js"></i> 10.5.0 bigint option </span>
            </span>
        </td>
    </tr>
    <tr>
        <td>
            <strong>fsPromises</strong>.stat(<strong>path:str|buf|urlObj</strong>, <i class="openable">option:obj<div>
                <p> bigint: <strong>bol</strong> - stats are returned as BigInt value (ex: <mark>21n</mark>) </p>
            </div></i>) 
        </td>
        <td> returns a Promise which resolves to a <mark>Stats</mark> object (holds the stats of the passed file) (rejected promise = error) (LINUX <mark>stat()</mark>)   
            <span id="browserSupport" title="updated : 2020-07-09">
                <span><i class="fab fa-node-js"></i> 10.0.0 </span>
                <span><i class="fab fa-node-js"></i> 10.5.0 bigint option </span>
            </span>
        </td>
    </tr>
    <tr>
        <td> <strong>fsPromises</strong>.utimes(<strong>path:str|buf|urlObj</strong>, <strong>atime:nr|str|Date</strong>, <strong>mtime:nr|str|Date</strong>) </td>
        <td> returns a Promise which modifies the last access time and the last modified time of the passed file (rejected Promise = error)    
            <span id="browserSupport" title="updated : 2020-07-10">
                <span><i class="fab fa-node-js"></i> 10.0.0 </span>
            </span>
        </td>
    </tr>
    <tr>
        <td colspan="2"> Directories </td>
    </tr>
    <tr>
        <td> 
            <strong>fsPromises</strong>.mkdir(<strong>path:str|buf|urlObj</strong>, <i class="openable">option:obj<div>
                <p> recursive: <strong>bol</strong> - overrides existing directories and can create subdirectories (Default: <mark>false</mark>) </p>
                <p> mode: <strong>str</strong> - not supported on Windows (Default: <mark>0o777</mark>) </p>
            </div></i>) 
        </td>
        <td> returns a Promise which creates a directory (by default cannot overirde existing directories) (rejected Promise = error) (LINUX <mark>mkdir()</mark>)
            <span id="browserSupport" title="updated : 2020-07-10">
                <span><i class="fab fa-node-js"></i> 10.0.0 </span>
            </span>
        </td>
    </tr>
    <tr>
        <td> 
            <strong>fsPromises</strong>.mkdtemp(<strong>path:str</strong>, <i class="openable">option:obj<div>
                <p> recursive: <strong>bol</strong> - overrides existing directories and can create subdirectories (Default: <mark>false</mark>) </p>
                <p> mode: <strong>str</strong> - not supported on Windows (Default: <mark>0o777</mark>) </p>
            </div></i>)) 
        </td>
        <td> 
            - returns a Promise which creates a temporary directory (by default cannot overirde existing directories) (rejected Promise = error) (LINUX <mark>mkdir()</mark>) <br>
            - unique temporary directory is created by appending 6 random characters to the passed path  
            <span id="browserSupport" title="updated : 2020-07-10">
                <span><i class="fab fa-node-js"></i> 10.0.0 </span>
            </span>
        </td>
    </tr>
    <tr>
        <td> 
            <strong>fsPromises</strong>.opendir(<strong>path:str|buf|urlObj</strong>, <i class="openable">option:obj<div>
                <p> encoding: <strong>str</strong> </p>
                <p> bufferSize: <strong>nr</strong> - number of directory entries to be buffered (Default: <mark>32</mark>) </p>
            </div></i>)
        </td>
        <td> 
            - returns a Promise which opens a directory stream of the passed directory <br>
            - the Promise resoves into a <mark>Dir</mark> object which is the directory stream (rejected Promise = error) 
            <span id="browserSupport" title="updated : 2020-07-10">
                <span><i class="fab fa-node-js"></i> 12.12.0 </span>
                <span><i class="fab fa-node-js"></i> 12.16.0 / 13.1.0 <mark>bufferSize</mark> option </span>
            </span>
        </td>
    </tr>
    <tr>
        <td> 
            <strong>fsPromises</strong>.readdir(<strong>path:str|buf|urlObj</strong>, <i class="openable">option:obj<div>
                <p> encoding: <strong>str</strong> </p>
                <p> withFileTypes: <strong>bol</strong> - the Array contains <mark>fs.Dirent</mark> objects </p>
            </div></i>) 
        </td>
        <td> - returns a Promise which reads the passed directory content <br>
            - the Promise resolves into an Array which contains directory item names (rejected Promise = error) 
            <span id="browserSupport" title="updated : 2020-07-10">
                <span><i class="fab fa-node-js"></i> 10.0.0 </span>
                <span><i class="fab fa-node-js"></i> 10.11.0 <mark>withFileTypes</mark> option </span>
            </span>
        </td>
    </tr>
    <tr>
        <td> 
            <strong>fsPromises</strong>.rmdir(<strong>path:str|buf|urlObj</strong>, <i class="openable">option:obj<div>
                <p> recursive: <strong>bol</strong> - also removes files, subdirectories and subfiles (Default: <mark>false</mark>) <u style="color:orangered;">(Experimental but works fine on version 12.10.0 [TESTED: 2019-10-03])</u> </p>
                <p> maxRetries: <strong>nr</strong> - number of tries (retries) if an error is encountered (when <mark>recurssive: true</mark>) (Default: <mark>0</mark>) </p>
                <p> retryDelay: <strong>nr</strong> - time (milliseconds) between retries (when <mark>recurssive: true</mark>) (Default: <mark>100</mark>) </p>
            </div></i>) 
        </td>
        <td> returns a Promise which removes the targeted directory (by Default empty directories only) (rejceted Promise = error) (LINUX <mark>rmdir()</mark>)  
            <span id="browserSupport" title="updated : 2020-07-10">
                <span><i class="fab fa-node-js"></i> 10.0.0 </span>
                <span class="openable"><i class="fab fa-node-js"></i> more... <div>
                    <p> - 12.10.0 - <mark>recursive</mark> / <mark>maxBusyTries</mark> / <mark>emfileWait</mark> options </p>
                    <p> - 12.16.0 / 13.3.0 - (<mark>maxBusyTries</mark> option renamed to <mark>maxRetries</mark> and default <mark>0</mark>) (<mark>emfileWait</mark> option removed) (<mark>retryDelay</mark> option support) </p>
                </div></span>
            </span>
        </td>
    </tr>
    <tr>
        <td colspan="2"> File Management </td>
    </tr>
    <tr>
        <td> <strong>fsPromises</strong>.access(<strong>path:str|buf|urlObj</strong>, <i>access:nr</i>) </td>
        <td> 
            - returns a Promise what tests the file or directory access permission <br>
            - the Promise resolves into a number which indicates the access permission (rejected Promise = error) <br>
            - (<mark>0</mark> = visible (Default)) (<mark>1</mark> = executable (on Windows falls back to <mark>0</mark>)) (<mark>2</mark> = writable) (<mark>4</mark> = readable) <u>(values can be grouped ex: <mark>2|4</mark>)</u> 
            <span id="browserSupport" title="updated : 2019-10-11">
                <span><i class="fab fa-node-js"></i> 10.0.0 </span>
            </span>
        </td>
    </tr>
    <tr>
        <td> 
            <strong>fsPromises</strong>.chmod(<strong>path:str|buf|urlObj</strong>, <i class="openable">mode:str|nr<div>
                <p> - on Windows only the writing permission can be changed (<mark>0o666</mark> read-write) (<mark>0o400</mark> read-only) </p>
                <p> - linux file access mechanism used (ex: <mark>744</mark> = owner has full permission but the gropu and others can read only) </p>
                <p> <mark>7</mark> - read, write, and execute </p>
                <p> <mark>6</mark> - read and write </p>
                <p> <mark>5</mark> - read and execute </p>
                <p> <mark>4</mark> - read only </p>
                <p> <mark>3</mark> - write and execute </p>
                <p> <mark>2</mark> - write only </p>
                <p> <mark>1</mark> - execute only </p>
                <p> <mark>0</mark> - no permission </p>
            </div></i>) 
        </td>
        <td> returns a Promise which changes the access permissions of the passed item (rejected Promise = error) (LINUX <mark>chmod()</mark>)    
            <span id="browserSupport" title="updated : 2019-07-10">
                <span><i class="fab fa-node-js"></i> 10.0.0 </span>
            </span>
        </td>
    </tr>
    <tr>
        <td> <strong>fsPromises</strong>.chown(<strong>path:str|buf|urlObj</strong>, <strong>uid:nr</strong>, <strong>gid:nr</strong>) </td>
        <td> returns a Promise which changes the owner and the group of the passed file (LINUX <mark>chdown()</mark>) (rejected Promise = error)
            <span id="browserSupport" title="updated : 2020-07-10">
                <span><i class="fab fa-node-js"></i> 10.0.0 </span>
            </span>
        </td>
    </tr>
    <tr>
        <td> 
            <strong>fsPromises</strong>.copyFile(<strong>srcPath:str|buf|urlObj</strong>, <strong>destPath:str|buf|urlObj</strong>, <i class="openable">copyMode:nr<div>
                <p><b> - values can be grouped ex: <mark>2|4</mark> </b></p>
                <p> - <mark>0</mark> = overwrites existing (Default) </p>
                <p> - <mark>1</mark> = error if destination exist </p>
                <p> - <mark>2</mark> = copy-on-write (default if COW not supported) </p> 
                <p> - <mark>4</mark> = copy-on-write (error if COW not suported) </p>
            </div></i>) 
        </td>
        <td> returns a Promise which copies <u>and renames</u> the source file (cannot copy directories) (rejected Promise = error  
            <span id="browserSupport" title="updated : 2020-07-10">
                <span><i class="fab fa-node-js"></i> 10.0.0 </span>
            </span>
        </td>
    </tr>
    <tr>
        <td> 
            <strong>fsPromises</strong>.realpath(<strong>path:str|buf|urlObj</strong>, <i class="openable">option:obj<div>
                <p> encoding: <strong>str</strong> (Default: <mark>utf-8</mark>) </p>
            </div></i>) 
        </td>
        <td> 
            - returns a Promise which resolves the passed path to a real path (LINUX <mark>realpath()</mark>) <br>
            - the Promise resolves into the resolved path (rejected Promise = error) <br>
            - resolves <mark>..</mark> and <mark>.</mark>, <u>symbolic-links are resolved to their original file path</u> (uses the <mark>fs.realpath.native()</mark> semantics) (UTF-8 convertable paths only)   
            <span id="browserSupport" title="updated : 2020-07-10">
                <span><i class="fab fa-node-js"></i> 10.0.0 </span>
            </span>
        </td>
    </tr>
    <tr>
        <td> <strong>fsPromises</strong>.rename(<strong>oldPath:str|buf|urlObj</strong>, <strong>newPath:str|buf|urlObj</strong>) </td>
        <td> returns a Promise which <u>moves and renames</u> the passed item (cannot override existing items) (rejected Promise = error) (LINUX <mark>rename()</mark>)
            <span id="browserSupport" title="updated : 2020-07-10">
                <span><i class="fab fa-node-js"></i> 10.0.0 </span>
            </span>
        </td>
    </tr>
    <tr>
        <td> <strong>fsPromises</strong>.unlink(<strong>path:str|buf|urlObj</strong>) </td>
        <td> returns a Promise which removes (deletes) a file or symbolic-link (cannot remove directories) (rejected Promise = error) (LINUX <mark>unlink()</mark>)   
            <span id="browserSupport" title="updated : 2020-07-10">
                <span><i class="fab fa-node-js"></i> 10.0.0 </span>
            </span>
        </td>
    </tr>
    <tr>
        <td colspan="2"> Hard-Link and Symbolic-Link </td>
    </tr>
    <tr>
        <td> <strong>fsPromises</strong>.link(<strong>path:str|buf|urlObj</strong>, <strong>hardLink:str|buf|urlObj</strong>) </td>
        <td> returns a Promise which creates a hard-link of the original file (directory hard-links are not allowed) (rejected Promise = error)   
            <span id="browserSupport" title="updated : 2020-07-10">
                <span><i class="fab fa-node-js"></i> 10.0.0 </span>
            </span>
        </td>
    </tr>
    <tr>
        <td> <strong>fsPromises</strong>.symlink(<strong>targetPath:str|buf|urlObj</strong>, <strong>symLinkPath:str|buf|urlObj</strong>) </td>
        <td> 
            - returns a Promise which creates a symbolic-link to the passed file or directory (rejceted Promise = error) <br>
            - <strong>targetPath</strong> = path used by the symbolic-link to reference the file <u>(relative path = relative from the created symbolic-link)</u>
            <span id="browserSupport" title="updated : 2020-07-10">
                <span><i class="fab fa-node-js"></i> 10.0.0 </span>
            </span>
        </td>
    </tr>
    <tr>
        <td> <strong>fsPromises</strong>.readlink(<strong>symLinkPath:str|buf|urlObj</strong>, <i>encode:str</i>) </td>
        <td>
            - returns a Promise which resolves the path where the symbolic-link is pointing to <br>
            - the Promise resolves into the pointing path (rejected Promise = error) 
            <span id="browserSupport" title="updated : 2020-07-10">
                <span><i class="fab fa-node-js"></i> 10.0.0 </span>
            </span>
        </td>
    </tr>    
</table>
    <br>
<table class="table">
<caption> <mark>FileHandle</mark> object returned by the <mark>fsPromises.open()</mark> method </caption>
    <tr>
        <th style="width:30%;"> Method </th>
        <th> Description </th>
    </tr>
    <tr>
        <td> <strong>fileHandle</strong> </td>
        <td> file descriptor wrapper object for Promise based file system methods  
            <span id="browserSupport" title="updated : 2019-10-11">
                <span><i class="fab fa-node-js"></i> 10.0.0 </span>
            </span>
        </td>
    </tr>
    <tr>
        <td> <strong>filehandle</strong>.appendFile(<strong>data:str|buf</strong>, <i class="openable">option:obj<div>
                <p> flag: <strong>str</strong> - (Default: <mark>a</mark> append-data / read-write) </p>
                <p> encoding: <strong>str</strong> - (Default: <mark>utf-8</mark>) </p>
                <p> mode: <strong>nr</strong> - (Default: <mark>0o666</mark>) </p>
            </div></i>) 
        </td>
        <td> returns a Promise which appends the data to the fileHandle (rejected Promise = error)  
            <span id="browserSupport" title="updated : 2020-07-10">
                <span><i class="fab fa-node-js"></i> 10.0.0 </span>
            </span>
        </td>
    </tr>
    <tr>
        <td> 
            <strong>filehandle</strong>.chmod(<i class="openable">mode:str|nr<div>
                <p> - on Windows only the writing permission can be changed (<mark>0o666</mark> read-write) (<mark>0o400</mark> read-only) </p>
                <p> - linux file access mechanism used (ex: <mark>744</mark> = owner has full permission but the gropu and others can read only) </p>
                <p> <mark>7</mark> - read, write, and execute </p>
                <p> <mark>6</mark> - read and write </p>
                <p> <mark>5</mark> - read and execute </p>
                <p> <mark>4</mark> - read only </p>
                <p> <mark>3</mark> - write and execute </p>
                <p> <mark>2</mark> - write only </p>
                <p> <mark>1</mark> - execute only </p>
                <p> <mark>0</mark> - no permission </p>
            </div></i>) 
        </td>
        <td> returns a Promise which changes the access permissions of the fileHandle (rejected Promise = error)   
            <span id="browserSupport" title="updated : 2020-07-10">
                <span><i class="fab fa-node-js"></i> 10.0.0 </span>
            </span>
        </td>
    </tr>
    <tr>
        <td> <strong>filehandle</strong>.chown(<strong>path:str|buf|urlObj</strong>, <strong>uid:nr</strong>, <strong>gid:nr</strong>) </td>
        <td> returns a Promise which changes the owner and the group of the fileHandle (LINUX <mark>chdown()</mark>) (rejected Promise = error)
            <span id="browserSupport" title="updated : 2020-07-10">
                <span><i class="fab fa-node-js"></i> 10.0.0 </span>
            </span>
        </td>
    </tr>
    <tr>
        <td> <strong>filehandle</strong>.close() </td>
        <td> returns a Promise which closes the underlying file descriptor (rejecte Promise = error)
            <span id="browserSupport" title="updated : 2020-07-10">
                <span><i class="fab fa-node-js"></i> 10.0.0 </span>
            </span>
        </td>
    </tr>
    <tr>
        <td> <strong>filehandle</strong>.fd </td>
        <td> returns the file descriptor wrapped by the filehandle
            <span id="browserSupport" title="updated : 2020-07-10">
                <span><i class="fab fa-node-js"></i> 10.0.0 </span>
            </span>
        </td>
    </tr>
    <tr>
        <td> <strong>filehandle</strong>.lutimes(<strong>atime:nr|str|Date</strong>, <strong>mtime:nr|str|Date</strong>) </td>
        <td> 
            - returns a Promise which sets the access and modified times of the fileHandle (rejected Promise = error) <br>
            - does the same as <mark>utimes()</mark> but if a symbolic-link is targeted modifies the times of the symbolic-link itself <span class="openable">[TESTED: 2020-07-11 no really working]<div>
                <p> - attempts to change the time of the symbolic-link itself but it doesn't work, does not changes the original file's time either </p>
            </div></span>    
            <span id="browserSupport" title="updated : 2020-07-10">
                <span><i class="fab fa-node-js"></i> 14.5.0 </span>
            </span>
        </td>
    </tr>
    <tr>
        <td> 
            <strong>filehandle</strong>.read(<strong class="openable">buf:buf|Uint8Array, stBuf:nr, length:nr, pos:nr<div>
                <p> - <strong>buf</strong> - the buffer object where to stored the read data </p>
                <p> - <strong>stBuf</strong> - offset position where to write the data in to the passed buffer </p>
                <p> - <strong>length</strong> - number of bytes to read from the source </p>
                <p> - <strong>pos</strong> - offeste position where to start reading the data from the source (if <mark>null</mark> the data is read from the current position) </p>
            </div></strong>) 
        </td>
        <td> 
            - returns a Promise which reads a content protion of the fileHandle and writes it to the passed buffer (<strong>buf:buf|Uint8Array</strong>) <br>
            - the Promise is resolved into an object <mark>{bytesRead:nr, buffer:buffer}</mark> (rejected Promise = error) 
            <span id="browserSupport" title="updated : 2020-07-10">
                <span><i class="fab fa-node-js"></i> 13.11.0 </span>
            </span>
        </td>
    </tr>
    <tr>
        <td>  
            <strong>filehandle</strong>.readv(<strong class="openable">buf:view<div>
                <p> - <strong>buf</strong> - any TypedArray (ex: <mark>Uint16Array</mark>) or <mark>DavaView</mark> </p>
            </div></strong>, <i class="openable">pos:nr<div>
                <p> - offset position where to start reading the data from the source filehandle </p>
            </div></i>)
        </td>
        <td> 
            - returns a Promise which reads a content protion of the fileHandle and writes it to the passed buffer view <br>
            - the Promise is resolved into an object <mark>{bytesRead:nr, buffer:buffer}</mark> (rejected Promise = error) <br>
            - does the same as <mark>read()</mark> but the <strong>buf</strong> argument can be any ArrayBuffer view (ex: <mark>DataView</mark> / <mark>Uint16Array</mark> etc...)
            <span id="browserSupport" title="updated : 2020-07-12">
                <span><i class="fab fa-node-js"></i> 14.0.0 </span>
            </span>
        </td>
    </tr>
    <tr>
        <td> 
            <strong>filehandle</strong>.readFile(<i class="openable">option:obj<div>
                <p> encoding: <strong>str</strong> </p>
            </div></i>) 
        </td>
        <td> 
            - returns a Promise which read the entire content of the fileHandle <br>
            - the Promise is resolved into the read data (rejected Promise = error)
            <span id="browserSupport" title="updated : 2020-07-10">
                <span><i class="fab fa-node-js"></i> 10.0.0 </span>
            </span>
        </td>
    </tr>
    <tr>
        <td> 
            <strong>filehandle</strong>.stat(<i class="openable">option:obj<div>
                <p> bigint: <strong>bol</strong> - the <mark>Stats</mark> object values will be represented as bigint values indtead of number (Default: <mark>false</mark>) </p>
            </div></i>) 
        </td>
        <td> returns a Promise which resolves into a <mark>Stats</mark> object (holds the stats of the item) (rejected Promise = error)   
            <span id="browserSupport" title="updated : 2020-07-10">
                <span><i class="fab fa-node-js"></i> 10.0.0 </span>
                <span><i class="fab fa-node-js"></i> 10.5.0 <mark>bigint</mark> option </span>
            </span>
        </td>
    </tr>
    <tr>
        <td> <strong>filehandle</strong>.truncate(<i>length:nr</i>) </td>
        <td> 
            - returns a Promise which truncates the fileHandle <u>(truncates as bytes)</u> (rejected Promise = error) <br>
            - if <i>length:nr</i> is bigger than the file's content the remaining space is filled with <mark>\0</mark> characters) (Default: <mark>0</mark>) 
            <span id="browserSupport" title="updated : 2020-07-10">
                <span><i class="fab fa-node-js"></i> 10.0.0 </span>
            </span>
        </td>   
    </tr>
    <tr>
        <td> <strong>filehandle</strong>.utimes(<strong>atime:nr|str|Date</strong>, <strong>mtime:nr|str|Date</strong>) </td>
        <td> returns a Promise which sets the access and modified times of the fileHandle (rejected Promise = error)   
            <span id="browserSupport" title="updated : 2020-07-10">
                <span><i class="fab fa-node-js"></i> 10.0.0 </span>
            </span>
        </td>
    </tr>
    <tr>
        <td> 
            <strong>filehandle</strong>.write(<strong>buf:buf|Uint8Array</strong>, <i class="openable">stBuf:nr, length:nr, pos:nr<div>
                <p> - <i>stBuf</i> - index where to start reading the passed buffer </p>
                <p> - <i>length</i> - how many bytes to read from the buffer </p>
                <p> - <i>pos</i> - where to start writting the fileHandle </p>
            </div></i>) <br>
            <strong>filehandle</strong>.write(<strong>data:str</strong>, <i>pos:nr</i>, <i>encode:str</i>) 
        </td>
        <td> 
            - returns a Promise which writes the passed buffer|string to the fileHandle (re-write existing content) <br>
            - the Promise resolves into an object <mark>{bitesWritten:nr, buffer:buffer}</mark> (rejected Promise = error) 
            <span id="browserSupport" title="updated : 2020-07-10">
                <span><i class="fab fa-node-js"></i> 10.0.0 </span>
                <span class="openable"><i class="fab fa-node-js"></i> more... <div>
                    <p> - 14.0.0 - <strong>buf</strong> argument won't coerce unsupported input to buffers anymore </p>
                </div></span>
            </span>
        </td>
    </tr>
    <tr>
        <td> 
            <strong>filehandle</strong>.writev(<strong class="openable">buf:view<div>
                <p> - <strong>buf</strong> - any TypedArray (ex: <mark>Uint16Array</mark>) or <mark>DavaView</mark> </p>
            </div></strong>, <i class="openable">pos:nr<div>
                <p> - offset position where to start writing the data from the source filehandle </p>
            </div></i>)
        </td>
        <td> 
            - returns a Promise which writes the passed ArrayBuffer view to the file handle (re-write existing content) <br>
            - the Promise resolves into an object <mark>{bitesWritten:nr, buffer:buffer}</mark> (rejected Promise = error) <br>
            - does the same as <mark>write()</mark> but the <strong>buf</strong> argument can be any ArrayBuffer view type (ex: <mark>DataView</mark> / <mark>Uint8Array</mark> etc... )
            <span id="browserSupport" title="updated : 2020-07-12">
                <span><i class="fab fa-node-js"></i> 12.9.0 </span>
            </span>
        </td>
    </tr>
    <tr>
        <td> 
            <strong>filehandle</strong>.writeFile(<strong>data:str|buf|Uint8Array</strong>, <i class="openable">option:obj<div>
                <p> flag: <strong>str</strong> - (Default: <mark>w</mark> read-write re-create file) </p>
                <p> encoding: <strong>str</strong> - (Default: <mark>utf-8</mark>) </p>
                <p> mode: <strong>nr</strong> - (Default: <mark>0o666</mark>) </p>
            </div></i>) 
        </td>
        <td> returns a Promise which replaces the entire content of fileHandle (rejected Promise = error) 
            <span id="browserSupport" title="updated : 2020-07-10">
                <span><i class="fab fa-node-js"></i> 10.0.0 </span>
                <span class="openable"><i class="fab fa-node-js"></i> more... <div>
                    <p> - 14.0.0 - the <strong>data</strong> argument is not coerced to string if it is not one of the supported type </p>
                </div></span>
            </span>
        </td>
    </tr>
</table>
<h2 style="color:green;"><u> Notes : </u></h2>
    <details class="example" id="notes">
    <summary> Notes :</summary>
        <p> - the <mark>filehandle.chown()</mark>, <mark>filehandle.datasync()</mark> and <mark>filehandle.sync()</mark> methods are not tested here because they are POSIX specific [2019-10-18] </p>
    </details>
<h2 style="color:green;"><u> Useful Links : </u></h2>
    
<h2 style="color:green;"><u> Remember This : </u></h2>
    
<h2 style="color:green;"><u> Description and Demonstration : </u></h2>
    <p> - the File System Promise API provides an alternative asynchronous aproach to work with the file system, instead of using asynchronous methods we can use Promise objects </p> 
    <p> - the Promise is resolved when the operation succeedes and rejected when an error is thrown </p>
    <pre>
    const fsPromises = require("fs").promises;                                         // access the File System Promise API  
    
    var fsP = fsPromises.open('styles.css');                                           // open file descriptor 
    
    fsP.then(function(res){console.log(res)})                                          // -> FileHandle{{fd:3}...}      // if the promise is resolved returns the FileHandle object (file descriptor wrapper)
       .catch(function(rej){console.log(rej)});                                        // -> Error                      // if the promise is rejected returns the thrown error    
    </pre>
<!------------------------------------------------------------------------------------------------------------------>
<hr>
<h2 style="color:darkblue;"><u> File Descriptor <mark>open()</mark> </u></h2>
    <pre class="syntax">
SYNTAX :    <strong>fsPromises</strong>.open(<strong>path:str|buf|urlObj</strong>, <i class="openable">flag:str|nr<div>
                    <p> Default: <mark>r</mark> </p>
                    <p> <mark>a</mark> - append (open file for appending data to its content (creates a new file if it does not exist)) </p>
                    <p> <mark>ax</mark> - append - (creates a new file and appends the passed datas to it (fails if the file exist)) </p>
                    <p> <mark>a+</mark> - read and append (open file for reading and appending datas to its content (creates a new file if it does not exist)) </p>
                    <p> <mark>ax</mark> - read and append (creates a new file for reading and appending datas to it (fails if the file exist)) </p>
                    <p> <mark>as</mark> - append (synchronous) open file for appending data to its content (creates a new file if it does not exist)) </p>
                    <p> <mark>as+</mark> - read and append (synchronous) (open file for reading and appending datas to its content (creates a new file if it does not exist)) </p>
                    <p> <mark>r</mark> - read (open existing file for reading (fails if the file does not exist)) </p>
                    <p> <mark>r+</mark> - read and write (open existing file for reading and writing (fails if the file does not exist)) </p>
                    <p> <mark>rs+</mark> - read and write (synchronous) (open existing file for reading and writing (fails if the file does not exist)) </p>
                    <p> <mark>w</mark> - write (open file for writing (existing file will be truncated, a new file will be crated if it does not exist)) </p>
                    <p> <mark>wx</mark> - write (creates a new file for writing (file content will be truncated, fails if the file exist)) </p>
                    <p> <mark>w+</mark> - read and write (open file for reading and writing (existing file will be truncated, a new file will be crated if it does not exist)) </p>
                    <p> <mark>wx+</mark> - read and write (creates a new file for reading and writing (file content will be truncated, fails if the file exist))</p>
                </div></i>, <i class="openable">mode:nr<div>
                    <p> Default: <mark>0o666</mark> (read write) <u>this option works only when a new file is created</u> </p>
                    <p> - on Windows only <mark>0o666</mark> (read write) and <mark>0o400</mark> can be used </p>
                    <p> - linux file access mechanism used (ex: <mark>744</mark> = owner has full permission but the gropu and others can read only) </p>
                    <p> <mark>7</mark> - read, write, and execute </p>
                    <p> <mark>6</mark> - read and write </p>
                    <p> <mark>5</mark> - read and execute </p>
                    <p> <mark>4</mark> - read only </p>
                    <p> <mark>3</mark> - write and execute </p>
                    <p> <mark>2</mark> - write only </p>
                    <p> <mark>1</mark> - execute only </p>
                    <p> <mark>0</mark> - no permission </p>
                </div></i>)               // returns a Promise which allocates a new file descriptor to the passed file   
                                                                                          the Promise resolves into a <mark>FileHandle</mark> object which is a file descriptor wrapper object (rejected Promise = error)   
                                                                                          the <mark>&lt;</mark> <mark>&gt;</mark> <mark>:</mark> <mark>"</mark> <mark>/</mark> <mark>\</mark> <mark>|</mark> <mark>?</mark> <mark>*</mark> characters are reserved in Windows   
    </pre>
<details class="example">
<summary> DEMO </summary>
    <pre>
    const fsPromises = require("fs").promises;
    
    fsPromises.open('testFile.txt')                                                    // asynchronously allocates (opens) a new file descriptor 
        .then((res) => { console.log(res) })                                           // -> FileHandle {...}    // if resolved promise -> file descriptor wrapped in FileHandle object is returned   
        .catch((rej) => { console.log(rej) });                                         // -> Error               // if rejected promise -> opeartion failed error is returned   
    </pre>
</details>
<details class="example">
<summary> Example : </summary>
<h4 style="color:darkblue;"><u> <mark>open()</mark> TEST </u></h4>
    <pre style="margin-bottom:1px;">
    const fsPromises = require('fs').promises;
    
    var openPromise = fsPromises.open('testFile.txt');
    
    openPromise.then((data) => { console.log(data) })                                  // resolved promise returns the FileHandle object which wraps the file descriptor 
               .catch((data) => { console.log(data) });                                // handling errors 
    </pre>
    <pre class="cmd" style="margin-top:1px;">
    PS D:\safe\code +\My Site\03 improuve\learn webdesign\04 node.js\file system\07 Promise API\01 open() TEST> node main   
        FileHandle { [Symbol(handle)]: FileHandle { fd: 3 } }
    PS D:\safe\code +\My Site\03 improuve\learn webdesign\04 node.js\file system\07 Promise API\01 open() TEST>    
    </pre>
</details>
<!------------------------------------------------------------------------------------------------------------------>
<hr>
<h2 style="color:darkblue;"><u> Read Write files <mark>readFile()</mark> / <mark>writeFile()</mark> / <mark>appendFile()</mark> / <mark>truncate()</mark> </u></h2>
    <pre class="syntax">
SYNTAX :    <strong>fsPromises</strong>.readFile(<strong>path:str|buf|urlObj|fileHandle</strong>, <i class="openable">option:obj<div>
                <p> flag: <strong>str</strong> - (Default <mark>r</mark> read-only existing file) </p>
                <p> encoding: <strong>str</strong>
            </div></i>)           // returns a Promise which reads the entire content of the passed file of File Handle 
                                                                                          the Promise resolves into the read data (rejected Promise = error)  
                
            <strong>fsPromises</strong>.writeFile(<strong>path:str|buf|urlObj|fileHandle</strong>, <strong>data:str|buf|Uint8Array</strong>, <i class="openable">option:obj<div>
                <p> flag: <strong>str</strong> - (Default: <mark>w</mark> = (re)creates the file for wirting) </p>
                <p> mode: <strong>str</strong> - (Default: <mark>0o666</mark> = readable writable when a new file is created) </p>
                <p> encoding: <strong>str</strong> - (Default: <mark>'utf-8'</mark>) </p> 
            </div></i>)  // returns a Promise which (re)creates a file with the passed data (rejected promise = error)
                
            <strong>fsPromises</strong>.appendFile(<strong>path:str|buf|urlObj|fileHandle</strong>, <strong>data:str|buf</strong>, <i class="openable">option:obj<div>
                <p> flag: <strong>str</strong> - (Default: <mark>a</mark> = append data / read-write) </p>
                <p> mode: <strong>str</strong> - (Default: <mark>0o666</mark> = readable writable when a new file is created) </p>
                <p> encoding: <strong>str</strong> - (Default: <mark>'utf-8'</mark>) </p> 
            </div></i>)   // returns a Promise which appends the data to the passed file's content (creates a new file if it doesn't exist) (rejected Promise = error)    
            
            <strong>fsPromises</strong>.truncate(<strong>path:str|buf|urlObj</strong>, <i>length:nr</i>)                        // returns a Promise which truncates the file's content <u>(truncates as bytes)</u> (rejected promise = err or) (LINUX <mark>truncate()</mark>)    
                                                                                          if <i>length:nr</i> is bigger than the file's content the remaining space is filled with <mark>\0</mark> characters) (Default: <mark>0</mark>) 
    </pre>
<details class="example">
<summary> DEMO </summary>
    <pre>
    const fsPromises = require("fs").promises;
    
// readFile() -------------------------------------------------------------------------
    fsPromises.readFile('testFile.txt')                                                // asynchronously read the entire content of the file 
        .then((res) => { console.log(res) })                                           // -> &lt;Buffer ... &gt;       // if resolved promise -> read data returned here 
        .catch((rej) => { console.log(rej) });                                         // -> Error               // if rejected promise -> operation failed 
            
// writeFile() / appendFile() ---------------------------------------------------------
    fsPromises.writeFile('testFile.txt', 'write this data')                            // asynchronously (re)creates the file with the passed content 
        .catch((rej) => { console.log(rej) });                                         // -> Error               // if rejected promise -> operation failed 
    
    fsPromises.appendFile('testFile2.txt', 'append this data')                         // asynchronously appends the passed data to the file (file created if it does not exist)   
        .catch((rej) => { console.log(rej) });                                         // -> Error               // if rejected promise -> operation failed 
    
// truncate() -------------------------------------------------------------------------
    fsPromises.truncate('testFile.txt', 100)                                           // asynchronously truncates the file's content to 100 bytes (fills with /0 characters if the content is shorter)    
        .catch((rej) => { console.log(rej) });                                         // -> Error               // if rejected promise -> operation failed 
    </pre>
</details>
<details class="example">
<summary> Example : </summary>
<h4 style="color:darkblue;"><u> <mark>readFile()</mark> / <mark>writeFile()</mark> / <mark>appendFile()</mark> / <mark>truncate()</mark> TEST </u></h4>
    <pre style="margin-bottom:1px;">
    const fsPromises = require("fs").promises;
    
// readFile() -------------------------------------------------------------------------
    fsPromises.readFile('testFile1.txt')                                               // read the file content 
        .then((res) => { console.log(res) })                                           // file content returned here 
        .catch((rej) => { console.log(rej) });                                             // catch if error is thrown 
        
// writeFile() ------------------------------------------------------------------------
    fsPromises.writeFile('testFile2.txt', 'add this data')                             // (re)creates the file with the passed data 
        .catch((rej) => { console.log(rej) });                                             // catch if error is thrown 
    
// appendFine() -----------------------------------------------------------------------
    fsPromises.appendFile('testFile3.txt', 'new information')                          // appends the passed data to a file (file created if it does not exist yet)
        .catch((rej) => { console.log(rej) });                                             // catch if error is thrown 
    
// truncate() -------------------------------------------------------------------------
    fsPromises.truncate('testFile4.txt', 500)                                          // truncates the file content to 500 bytes (fills with /0 characters if content is shorter)
        .catch((rej) => { console.log(rej) });                                             // catch if error is thrown 
    </pre>
    <pre class="cmd" style="margin-top:1px;">
    PS D:\safe\code +\My Site\03 improuve\learn webdesign\04 node.js\file system\07 Promise API\02 readFile() writeFile() appendFile() truncate() TEST> node main 
// fsPromises.readFile('testFile1.txt') resolved promise data ------------------------
        &lt;Buffer 4c 6f 72 65 6d 20 49 70 73 75 6d 20 69 73 20 73 69 6d 70 6c 79 20 64 75 6d 6d 79 20 74 65 78 74 20 6f 66 20 74 68 65 20 70 72 69 6e 74 69 6e 67 20 61 ... 524 more bytes&gt;
    PS D:\safe\code +\My Site\03 improuve\learn webdesign\04 node.js\file system\07 Promise API\02 readFile() writeFile() appendFile() truncate() TEST>    
    </pre>
</details>
<!------------------------------------------------------------------------------------------------------------------>
<hr>
<h2 style="color:darkblue;"><u> Watching Files <mark>stat()</mark> / <mark>lstat()</mark> / <mark>utimes()</mark> </u></h2>
    <pre class="syntax">
SYNTAX :    <strong>fsPromises</strong>.stat(<strong>path:str|buf|urlObj</strong>, <i class="openable">option:obj<div>
                <p> bigint: <strong>bol</strong> - stats are returned as BigInt value (ex: <mark>21n</mark>) </p>
            </div></i>)                          // returns a Promise which resolves to a <mark>Stats</mark> object (holds the stats of the passed file) (rejected promise = error) (LINUX <mark>stat()</mark>)
            <strong>fsPromises</strong>.lstat(<strong>path:str|buf|urlObj</strong>, <i class="openable">option:obj<div>
                <p> bigint: <strong>bol</strong> - stats are returned as BigInt value (ex: <mark>21n</mark>) </p>
            </div></i>)                         // returns a Promise which resolves to a <mark>Stats</mark> object (holds the stats of the passed file or symbolic-link) (rejected promise = error) (LINUX <mark>lstat()</mark>)
                                                                                          does the same as <mark>stat()</mark> but this method points to the symbolic-link itself instead of the file)
            
            <strong>fsPromises</strong>.utimes(<strong>path:str|buf|urlObj</strong>, <strong>atime:nr|str|Date</strong>, <strong>mtime:nr|str|Date</strong>)  // returns a Promise which modifies the last access time and the last modified time of the passed file (rejected Promise = error)    
    </pre>
<details class="example">
<summary> DEMO </summary>
    <pre>
    const fsPromises = require("fs").promises;
    
// stat() / lstat() -------------------------------------------------------------------
    fsPromises.stat('testSymbLink.txt', {bigint:true})                                 // asynchronously returns the BigintStats object of the TARGET file     // -! this method targets the file where the symbolic-link points to not the symbolic-link itself    
        .then((res) => { console.log(res) })                                           // -> BigintStats {...}   // if resolved promise -> BigintStats object returned of the 'testFile' (bigint obtion)
        .catch((rej) => { console.log(rej) });                                         // -> Error               // if rejected promise -> operation failed 
        
    fsPromises.lstat('testSymbLink.txt')                                               // asynchronously returns the Stats object of the symbolic-link itself  // -! this method targets the symbolic-link itself not the the file what targets   
        .then((res) => { console.log(res) })                                           // -> Stats {...}         // if resolved promise -> Stats object returned of the symbolic-link itself   
        .catch((rej) => { console.log(rej) });                                         // -> Error               // if rejected promise -> operation failed 
    
// utimes() ---------------------------------------------------------------------------
    fsPromises.utimes('testFile.txt', 1546293600, 1570809856)                          // asynchronously modifies the last access and modified time of the file (Epoch times passed) 
        .catch((rej) => { console.log(rej) });                                         // -> Error               // if rejected promise -> operation failed   
    </pre>
</details>
<details class="example">
<summary> Example : </summary>
<h4 style="color:darkblue;"><u> <mark>stat()</mark> / <mark>lstat()</mark> / <mark>utimes()</mark> TEST </u></h4>
    <pre style="margin-bottom:1px;">
    const fsPromises = require("fs").promises;    
    const fs = require("fs");    
    
// stat() / lstat() -------------------------------------------------------------------
    fsPromises.stat('testSymbLink.txt')                                                // returns the stats of the file the symbolic link is pointing to ('testFile.txt)
        .then((res) => { console.log(res.isSymbolicLink()) })                          // Stats object returned here 
        .catch((rej) => { console.log(rej) });
        
    fsPromises.lstat('testSymbLink.txt')                                               // returns the stats of the symbolic-link itself 
        .then((res) => { console.log(res.isSymbolicLink()) })   // Stats object returned here 
        .catch((rej) => { console.log(rej) });
    
// utimes() ---------------------------------------------------------------------------
    fsPromises.utimes('testFile.txt', 60, 120)                                         // modifies the access and the modify time of the file 
        .catch((rej) => { console.log(rej) })
        .finally(() => {  
            console.log(fs.statSync('testFile.txt').atimeMs);                          // last access time 
            console.log(fs.statSync('testFile.txt').mtimeMs);                          // last modified time 
        });     
    </pre>
    <pre class="cmd" style="margin-top:1px;">
    PS D:\safe\code +\My Site\03 improuve\learn webdesign\04 node.js\file system\07 Promise API\03 stat() lstat() utimes() TEST> node main    
// fsPromises.stat('testSymbLink.txt') // resolved promise ----------------------------
        false                                                                          // the target file is referenced not the symbolic-link 
// fsPromises.lstat('testSymbLink.txt') // resolved promise ---------------------------
        true                                                                           // symbolic-link referenced   
// fsPromises.utimes('testFile.txt', 60, 120) -----------------------------------------
        1000000
        2000000
    PS D:\safe\code +\My Site\03 improuve\learn webdesign\04 node.js\file system\07 Promise API\03 stat() lstat() utimes() TEST>     
    </pre>
</details>
<!------------------------------------------------------------------------------------------------------------------>
<hr>
<h2 style="color:darkblue;"><u> Directories <mark>mkdir()</mark> / <mark>mkdtemp()</mark> / <mark>opendir()</mark> / <mark>readdir()</mark> / <mark>rmdir() </u></h2>
    <pre class="syntax">
SYNTAX :    <strong>fsPromises</strong>.mkdir(<strong>path:str|buf|urlObj</strong>, <i class="openable">option:obj<div>
                <p> recursive: <strong>bol</strong> - overrides existing directories and can create subdirectories (Default: <mark>false</mark>) </p>
                <p> mode: <strong>str</strong> - not supported on Windows (Default: <mark>0o777</mark>) </p>
            </div></i>)                         // returns a Promise which creates a directory (by default cannot overirde existing directories) (rejected Promise = error) (LINUX <mark>mkdir()</mark>)    
            <strong>fsPromises</strong>.mkdtemp(<strong>path:str</strong>, <i class="openable">option:obj<div>
                <p> recursive: <strong>bol</strong> - overrides existing directories and can create subdirectories (Default: <mark>false</mark>) </p>
                <p> mode: <strong>str</strong> - not supported on Windows (Default: <mark>0o777</mark>) </p>
            </div></i>))                                 // returns a Promise which creates a temporary directory (by default cannot overirde existing directories) (rejected Promise = error) (LINUX <mark>mkdir()</mark>)    
                                                                                          unique temporary directory is created by appending 6 random characters to the passed path  
            
            <strong>fsPromises</strong>.opendir(<strong>path:str|buf|urlObj</strong>, <i class="openable">option:obj<div>
                <p> encoding: <strong>str</strong> </p>
                <p> bufferSize: <strong>nr</strong> - number of directory entries to be buffered (Default: <mark>32</mark>) </p>
            </div></i>)                       // returns a Promise which opens a directory stream of the passed directory 
                                                                                          the Promise resoves into a <mark>Dir</mark> object which is the directory stream (rejected Promise = error)  
            <strong>fsPromises</strong>.readdir(<strong>path:str|buf|urlObj</strong>, <i class="openable">option:obj<div>
                <p> encoding: <strong>str</strong> </p>
                <p> withFileTypes: <strong>bol</strong> - the Array contains <mark>fs.Dirent</mark> objects </p>
            </div></i>)                       // returns a Promise which reads the passed directory content 
                                                                                          the Promise resolves into an Array which contains directory item names (rejected Promise = error)  
            
            <strong>fsPromises</strong>.rmdir(<strong>path:str|buf|urlObj</strong>, <i class="openable">option:obj<div>
                <p> recursive: <strong>bol</strong> - also removes files, subdirectories and subfiles (Default: <mark>false</mark>) <u style="color:orangered;">(Experimental but works fine on version 12.10.0 [TESTED: 2019-10-03])</u> </p>
                <p> maxRetries: <strong>nr</strong> - number of tries (retries) if an error is encountered (when <mark>recurssive: true</mark>) (Default: <mark>0</mark>) </p>
                <p> retryDelay: <strong>nr</strong> - time (milliseconds) between retries (when <mark>recurssive: true</mark>) (Default: <mark>100</mark>) </p>
            </div></i>)                         // returns a Promise which removes the targeted directory (by Default empty directories only) (rejceted Promise = error) (LINUX <mark>rmdir()</mark>)  
    </pre>
<details class="example">
<summary> DEMO </summary>
    <pre>
    const fsPromises = require("fs").promises;
    
// mkdir() mkdtemp() --------------------------------------------------------------------
    fsPromises.mkdir('testDir/subDir', {recursive:true})                               // asynchronously creates a directory // -! can overwrite directories and create subdirectories because of the recursive option   
        .catch((rej) => { console.log(rej) });                                         // -> Error               // if rejected promise -> operation failed 
    
    fsPromises.mkdtemp('tempDir')                                                      // asynchronously creates a temporary directory by appending 6 random characters to the passed path    
        .then((res) => { console.log(res) })                                           // -> 'tempDirTcTyKZ'     // if resolved promise -> created directory name returned 
        .catch((rej) => { console.log(rej) });                                         // -> Error               // if rejected promise -> operation failed 
    
// opendir() / readdir() --------------------------------------------------------------
    fsPromises.opendir('./')                                                           // asynchronously opens a directory stream of the current directory  
        .then((res) => {console.log(res)})                                             // -> Dir {...}           // if resolved promise -> directory stream object returned 
        .catch((rej) => { console.log(rej) });                                         // -> Error               // if rejected promise -> operation failed 
    
    fsPromises.readdir('./', {withFileTypes:true})                                     // asynchronously reads the current directory's items 
        .then((res) => { console.log(res) })                                           // -> [Dirent{...}, Dirent{...}]     // if promise resolved -> Array returned with the directory itmes (each Dirent object represents an item)   
        .catch((rej) => { console.log(rej) });                                         // -> Error               // if rejected promise -> operation failed 
        
// rmdir() ----------------------------------------------------------------------------
    fsPromises.rmdir('tempDirTcTyKZ', {recursive:true})                                // asynchronously removes the targeted directory // -! recursive option allows to remove files and subdirectories as well 
        .catch((rej) => { console.log(rej) });                                         // -> Error               // if rejected promise -> operation failed 
    </pre>
</details>
<details class="example">
<summary> Example : </summary>
<h4 style="color:darkblue;"><u> <mark>mkdir()</mark> / <mark>mkdtemp()</mark> / <mark>readdir()</mark> / <mark>rmdir()</mark> TEST </u></h4>
    <pre style="margin-bottom:1px;">
    const fsPromises = require("fs").promises;
        
// mkdir() / mkdtemp() ----------------------------------------------------------------
    fsPromises.mkdir('testDirectory/subDirectory', {recursive:true})                   // directory and subdirectory created 
        .catch((rej) => { console.log(rej) });
    
    fsPromises.mkdtemp('testDir')                                                      // temporary directory created 
        .then((res) => { console.log(res) })                                           // -> 'testDiryf82Uc'           // created temporary directory name returned 
        .catch((rej) => { console.log(rej) });
    
// readdir() --------------------------------------------------------------------------
    fsPromises.readdir('./', {withFileTypes:true})                                     // reads the itmes in the current directory    
        .then((res) => { console.log(res) })                                           // [Dirent{...}, Dirent{...}]   // each item is represented by a Dirent object (withFileTypes option)
        .catch((rej) => { console.log(rej) });
    
// rmdir() ----------------------------------------------------------------------------
    fsPromises.rmdir('testDirectory2', {withFileTypes:true})                           // removes the targeted directory 
        .catch((rej) => { console.log(rej) });
    </pre>
    <pre class="cmd" style="margin-top:1px;">
    PS D:\safe\code +\My Site\03 improuve\learn webdesign\04 node.js\file system\07 Promise API\04 mkdir() mkdtemp() readdir() rmdir() TEST> node main   
// fsPromises.readdir('./', {withFileTypes:true}) // resolved promise -----------------
        [
        Dirent { name: 'main.js', [Symbol(type)]: 1 },
        Dirent { name: 'testDirectory2', [Symbol(type)]: 2 }
        ]
// fsPromises.mkdtemp('testDir') // resolved promise ----------------------------------
        testDiryf82Uc
    PS D:\safe\code +\My Site\03 improuve\learn webdesign\04 node.js\file system\07 Promise API\04 mkdir() mkdtemp() readdir() rmdir() TEST>    
    </pre>
</details>
<!------------------------------------------------------------------------------------------------------------------>
<hr>
<h2 style="color:darkblue;"><u> File Management <mark>realpath()</mark> / <mark>access()</mark> / <mark>chmod()</mark> / <mark>copyFile()</mark> / <mark>rename()</mark> / <mark>unlink()</mark> </u></h2>
    <pre class="syntax">
SYNTAX :    <strong>fsPromises</strong>.realpath(<strong>path:str|buf|urlObj</strong>, <i class="openable">option:obj<div>
                <p> encoding: <strong>str</strong> (Default: <mark>utf-8</mark>) </p>
            </div></i>)                      // returns a Promise which resolves the passed path to a real path (LINUX <mark>realpath()</mark>)
                                                                                          the Promise resolves into the resolved path (rejected Promise = error) 
                                                                                          resolves <mark>..</mark> and <mark>.</mark>, <u>symbolic-links are resolved to their original file path</u> (uses the <mark>fs.realpath.native()</mark> semantics) (UTF-8 convertable paths only)   
                
            <strong>fsPromises</strong>.access(<strong>path:str|buf|urlObj</strong>, <i>access:nr</i>)                          // returns a Promise what tests the file or directory access permission   
                                                                                          the Promise resolves into a number which indicates the access permission (rejected Promise = error)    
                                                                                          (<mark>0</mark> = visible (Default)) (<mark>1</mark> = executable (on Windows falls back to <mark>0</mark>)) (<mark>2</mark> = writable) (<mark>4</mark> = readable) <u>(values can be grouped ex: <mark>2|4</mark>)</u>   
            <strong>fsPromises</strong>.chmod(<strong>path:str|buf|urlObj</strong>, <i class="openable">mode:str|nr<div>
                <p> - on Windows only the writing permission can be changed (<mark>0o666</mark> read-write) (<mark>0o400</mark> read-only) </p>
                <p> - linux file access mechanism used (ex: <mark>744</mark> = owner has full permission but the gropu and others can read only) </p>
                <p> <mark>7</mark> - read, write, and execute </p>
                <p> <mark>6</mark> - read and write </p>
                <p> <mark>5</mark> - read and execute </p>
                <p> <mark>4</mark> - read only </p>
                <p> <mark>3</mark> - write and execute </p>
                <p> <mark>2</mark> - write only </p>
                <p> <mark>1</mark> - execute only </p>
                <p> <mark>0</mark> - no permission </p>
            </div></i>)                        // returns a Promise which changes the access permissions of the passed item (rejected Promise = error) (LINUX <mark>chmod()</mark>)    
            
            <strong>fsPromises</strong>.chown(<strong>path:str|buf|urlObj</strong>, <strong>uid:nr</strong>, <strong>gid:nr</strong>)                      // returns a Promise which changes the owner and the group of the passed file (LINUX <mark>chdown()</mark>) (rejected Promise = error)
            
            <strong>fsPromises</strong>.rename(<strong>oldPath:str|buf|urlObj</strong>, <strong>newPath:str|buf|urlObj</strong>)          // returns a Promise which <u>moves and renames</u> the passed item (cannot override existing items) (rejected Promise = error) (LINUX <mark>rename()</mark>)    
            
            <strong>fsPromises</strong>.copyFile(<strong>srcPath:str|buf|urlObj</strong>, <strong>destPath:str|buf|urlObj</strong>, <i class="openable">copyMode:nr<div>
                <p><b> - values can be grouped ex: <mark>2|4</mark> </b></p>
                <p> - <mark>0</mark> = overwrites existing (Default) </p>
                <p> - <mark>1</mark> = error if destination exist </p>
                <p> - <mark>2</mark> = copy-on-write (default if COW not supported) </p> 
                <p> - <mark>4</mark> = copy-on-write (error if COW not suported) </p>
            </div></i>)   // returns a Promise which copies <u>and renames</u> the source file (cannot copy directories) (rejected Promise = error)
           
            <strong>fsPromises</strong>.unlink(<strong>path:str|buf|urlObj</strong>)                                     // returns a Promise which removes (deletes) a file or symbolic-link (cannot remove directories) (rejected Promise = error) (LINUX <mark>unlink()</mark>)  
    </pre>
<details class="example">
<summary> DEMO </summary>
    <pre>
    const fsPromises = require("fs").promises;
    
// realpath() -------------------------------------------------------------------------
    fsPromises.realpath('./')                                                          // asynchronously returns the real path of the current location 
        .then((res) => { console.log(res) })                                           // -> 'D:\'               // if resolved promise -> location returned 
        .catch((rej) => { console.log(rej) })                                          // -> Error               // if rejected promise -> operation failed 
        
// access() / chmod() -----------------------------------------------------------------
    fsPromises.chmod('testFile.txt', 0o666)                                            // asynchronously changes the file access to read-write  
        .catch((rej) => { console.log(rej) })                                          // -> Error               // if rejected promise -> operation failed 
    
    fsPromises.access('testFile.txt', 2|4)                                             // asynchronously tests the read and write permission of the file  
        .catch((rej) => { console.log(rej) })                                          // -> Error               // if rejected promise -> file not readable or writable    
    
// copyFile() / rename() --------------------------------------------------------------
    fsPromises.copyFile('testFile.txt', 'TEST/testFile_.txt')                          // asynchronously copies the file to the destination and renames it (overwrites if the file exist (Default))
        .catch((rej) => { console.log(rej) })                                          // -> Error               // if rejected promise -> operation failed   
                
    fsPromises.rename('testFile2.txt', 'TEST/testFile2_.txt')                          // asynchronously moves the file to the destination and renames it 
        .catch((rej) => { console.log(rej) })                                          // -> Error               // if rejected promise -> operation failed   
        
// unlink() ---------------------------------------------------------------------------
    fsPromises.unlink('testFile.txt')                                                  // asynchronously removes (deletes) the file 
        .catch((rej) => { console.log(rej) })                                          // -> Error               // if rejected promise -> operation failed   
    </pre>
</details>
<details class="example">
<summary> Example : </summary>
<h4 style="color:darkblue;"><u> <mark>realpath()</mark> / <mark>access()</mark> / <mark>chmod()</mark> TEST </u></h4>
    <pre style="margin-bottom:1px;">
    const fsPromises = require("fs").promises;
    
// realpath() -------------------------------------------------------------------------
    fsPromises.realpath('./')                                                          // resolves the current directory's path 
        .then((res) => { console.log(res) })                                           // -> 'D:\Safe\CODE +\My Site\03 Improuve\Learn WebDesign\04 Node.js\File System\07 Promise API\05 realpath() access() chmode() TEST'  
        .catch((rej) => { console.log(rej) });
        
// chmod() / access() -----------------------------------------------------------------
    fsPromises.chmod('testFile.txt', 0o400)                                            // file access changed to read-only 
        .catch((rej) => { console.log(rej) });
    
    fsPromises.access('testFile.txt', 2)                                               // write access check fails = promise is rejected 
        .catch((rej) => { console.log(rej) });
    </pre>
    <pre class="cmd" style="margin-top:1px;">
    PS D:\safe\code +\My Site\03 improuve\learn webdesign\04 node.js\file system\07 Promise API\05 realpath() access() chmode() TEST> node main  
// fsPromises.access('testFile.txt', 2) // rejected promise ---------------------------
        [Error: EPERM: operation not permitted, access 'D:\safe\code +\My Site\03 improuve\learn webdesign\04 node.js\file system\07 Promise API\05 realpath() access() chmode() TEST\testFile.txt'] {
        errno: -4048,
        code: 'EPERM',
        syscall: 'access',
        path: 'D:\\safe\\code +\\My Site\\03 improuve\\learn webdesign\\04 node.js\\file system\\07 Promise API\\05 realpath() access() chmode() TEST\\testFile.txt'
        }
// fsPromises.realpath('./') // resolved promise --------------------------------------
        D:\Safe\CODE +\My Site\03 Improuve\Learn WebDesign\04 Node.js\File System\07 Promise API\05 realpath() access() chmode() TEST
    PS D:\safe\code +\My Site\03 improuve\learn webdesign\04 node.js\file system\07 Promise API\05 realpath() access() chmode() TEST>
    </pre>
<!------------------------------------------------------------------------------------------------------------------>
<hr>
<h4 style="color:darkblue;"><u> <mark>copyFile()</mark> / <mark>rename()</mark> / <mark>unlink()</mark> TEST </u></h4>
    <pre style="margin-bottom:1px;">
    const fsPromises = require("fs").promises;
    
// copyFile() -------------------------------------------------------------------------
    fsPromises.copyFile('testFile1.txt', 'testDir/testFileA.txt')                      // copies and renames the file to the destinations (overwrites the file at the destination (Default))
        .catch((rej) => { console.log(rej) });
        
// rename() ---------------------------------------------------------------------------
    fsPromises.rename('testFile2.txt', 'testDir/testFileB.txt')                        // moves and the file to the targeted directory and renames it 
        .catch((rej) => { console.log(rej) });
    
// unlink() ---------------------------------------------------------------------------
    fsPromises.unlink('testFile3.txt')                                                 // removes the targeted file 
        .catch((rej) => { console.log(rej) });
    </pre>
    <pre class="cmd" style="margin-top:1px;">
    PS D:\safe\code +\My Site\03 improuve\learn webdesign\04 node.js\file system\07 Promise API\06 copyFile() rename() unlink() TEST> node main  
    PS D:\safe\code +\My Site\03 improuve\learn webdesign\04 node.js\file system\07 Promise API\06 copyFile() rename() unlink() TEST>     
    </pre>
</details>
<!------------------------------------------------------------------------------------------------------------------>
<hr>
<h2 style="color:darkblue;"><u> Hard-Link and Symbolic-Link <mark>link()</mark> / <mark>symlink()</mark> / <mark>readlink()</mark> </u></h2>
    <pre class="syntax">
SYNTAX :    <strong>fsPromises</strong>.link(<strong>path:str|buf|urlObj</strong>, <strong>hardLink:str|buf|urlObj</strong>)              // returns a Promise which creates a hard-link of the original file (directory hard-links are not allowed) (rejected Promise = error)   
    
            <strong>fsPromises</strong>.symlink(<strong>targetPath:str|buf|urlObj</strong>, <strong>symLinkPath:str|buf|urlObj</strong>)  // returns a Promise which creates a symbolic-link to the passed file or directory (rejceted Promise = error)
                                                                                          <strong>targetPath</strong> = path used by the symbolic-link to reference the file <u>(relative path = relative from the created symbolic-link)</u>
            
            <strong>fsPromises</strong>.readlink(<strong>symLinkPath:str|buf|urlObj</strong>, <i>encode:str</i>)                // returns a Promise which resolves the path where the symbolic-link is pointing to 
                                                                                          the Promise resolves into the pointing path (rejected Promise = error)   
    </pre>
<details class="example">
<summary> DEMO </summary>
    <pre>
    const fsPromises = require("fs").promises;
    
// link() -----------------------------------------------------------------------------
    fsPromises.link('testFile.txt', '../hardLink.txt')                                 // asynchronously creates a hard-link in the parent directory 
        .catch((rej) => { console.log(rej) })                                          // -> Error               // if rejected promise -> operation failed 
        
// symlink() / readlink() -------------------------------------------------------------
    fsPromises.symlink('testDir/testFile.txt', '../testFile.txt')                      // asynchronously creates a symbolic-link in the parent directory   // -! 1st argument is relative to the created symbolic-link    
        .catch((rej) => { console.log(rej) })                                          // -> Error               // if rejected promise -> operation failed 
    
    fsPromises.readlink('../testFile.txt')                                             // asynchronously reads a symbolic-link where it is pointing to 
        .then((res) => { console.log(res) })                                           // -> 'testDir/testFile.txt' // if promise resolved = path where the symbolic-link is pointing to is returned   
        .catch((rej) => { console.log(rej) })                                          // -> Error               // if rejected promise -> operation failed 
    </pre>
</details>
<details class="example">
<summary> Example : </summary>
<h4 style="color:darkblue;"><u> <mark>link()</mark> / <mark>symlink()</mark> / <mark>readlink()</mark> TEST </u></h4>
    <pre style="margin-bottom:1px;">
    const fsPromises = require('fs').promises;
    
// link() -----------------------------------------------------------------------------
    fsPromises.link('testFile.txt', 'testDir/hardLink.txt')                            // creating a hard link in the subdirectory 
        .catch((rej) => { console.log(rej) });
        
// symlink() / readlink() -------------------------------------------------------------
    fsPromises.symlink('../testFile.txt', 'testDir/symbolicLink.txt')                  // creating a symbolic-link in the subdirectory
        .catch((rej) => { console.log(rej) });
    
    fsPromises.readlink('testDir/symbolicLink.txt')                                    // read the symbolic-link (where it is pointing to)
        .then((res) => { console.log(res) })                                           // -> '..\testFile.txt'
        .catch((rej) => { console.log(rej) });
    </pre>
    <pre class="cmd" style="margin-top:1px;">
    PS D:\safe\code +\My Site\03 improuve\learn webdesign\04 node.js\file system\07 Promise API\07 link() symlink() readlink() TEST> node main
// fsPromises.readlink('testDir/symbolicLink.txt') // resolved promise ---------------
        ..\testFile.txt
    PS D:\safe\code +\My Site\03 improuve\learn webdesign\04 node.js\file system\07 Promise API\07 link() symlink() readlink() TEST>    
    </pre>
</details>
<!------------------------------------------------------------------------------------------------------------------>
<hr>
<h2 class="headerExtra"><u> The <mark>FileHandle</mark> object </u></h2>    
    <p> - the <mark>FileHandle</mark> object is a <u>file descriptor wrapper</u> for Promise based File System methods, it is created by the <mark>open()</mark> method </p>
    <p> - the main purpose of the <mark>FileHandle</mark> object is the ability to close the file descriptor <u>even after the Promise is resolved or rejected</u></p>
    <pre>
    const fsPromises = require("fs").promises;
    var fileHandle;                                                                    // once the promise has been resolved the filehandle object is assigned and can be used AFTER the promise has been closed   
    
    fsPromises.open('testFile.txt')                                                    // open file descriptor 
        .then((res) => {fileHandle = res})                                             // resolved promise returns the filehandle object  
        .catch((rej) => {console.log(rej)})
    </pre>
    <pre class="syntax">
SYNTAX:     <strong>filehandle</strong>.fd                                                              // returns the file descriptor wrapped by the filehandle   
            <strong>filehandle</strong>.close()                                                         // returns a Promise which closes the underlying file descriptor (rejecte Promise = error)
            
<span style="color:darkgrey;">// read / write -----------------------------------------------------------------------</span>
            <strong>filehandle</strong>.readFile(<i class="openable">option:obj<div>
                <p> encoding: <strong>str</strong> </p>
            </div></i>)                                           // returns a Promise which read the entire content of the fileHandle  
                                                                                          the Promise is resolved into the read data (rejected Promise = error)
            
            <strong>filehandle</strong>.read(<strong class="openable">buf:buf|Uint8Array, stBuf:nr, length:nr, pos:nr<div>
                <p> - <strong>buf</strong> - the buffer object where to stored the read data </p>
                <p> - <strong>stBuf</strong> - offset position where to write the data in to the passed buffer </p>
                <p> - <strong>length</strong> - number of bytes to read from the source </p>
                <p> - <strong>pos</strong> - offeste position where to start reading the data from the source (if <mark>null</mark> the data is read from the current position) </p>
            </div></strong>)          // returns a Promise which reads a content protion of the fileHandle and writes it to the passed buffer (<strong>buf:buf|Uint8Array</strong>)  
                                                                                          the Promise is resolved into an object <mark>{bytesRead:nr, buffer:buffer}</mark> (rejected Promise = error)  
            <strong>filehandle</strong>.readv(<strong class="openable">buf:view<div>
                <p> - <strong>buf</strong> - any TypedArray (ex: <mark>Uint16Array</mark>) or <mark>DavaView</mark> </p>
            </div></strong>, <i class="openable">pos:nr<div>
                <p> - offset position where to start reading the data from the source filehandle </p>
            </div></i>)                                       // returns a Promise which reads a content protion of the fileHandle and writes it to the passed buffer view   
                                                                                          the Promise is resolved into an object <mark>{bytesRead:nr, buffer:buffer}</mark> (rejected Promise = error)  
                                                                                          does the same as <mark>read()</mark> but the <strong>buf</strong> argument can be any ArrayBuffer view (ex: <mark>DataView</mark> / <mark>Uint16Array</mark> etc...)
            
            <strong>filehandle</strong>.writeFile(<strong>data:str|buf|Uint8Array</strong>, <i class="openable">option:obj<div>
                <p> flag: <strong>str</strong> - (Default: <mark>w</mark> read-write re-create file) </p>
                <p> encoding: <strong>str</strong> - (Default: <mark>utf-8</mark>) </p>
                <p> mode: <strong>nr</strong> - (Default: <mark>0o666</mark>) </p>
            </div></i>)                 // returns a Promise which replaces the entire content of fileHandle (rejected Promise = error) 
            <strong>filehandle</strong>.appendFile(<strong>data:str|buf</strong>, <i class="openable">option:obj<div>
                <p> flag: <strong>str</strong> - (Default: <mark>a</mark> append-data / read-write) </p>
                <p> encoding: <strong>str</strong> - (Default: <mark>utf-8</mark>) </p>
                <p> mode: <strong>nr</strong> - (Default: <mark>0o666</mark>) </p>
            </div></i>)                           // returns a Promise which appends the data to the fileHandle (rejcted Promise = error)  
            
            <strong>filehandle</strong>.write(<strong>buf:buf|Uint8Array</strong>, <i class="openable">stBuf:nr, length:nr, pos:nr<div>
                <p> - <i>stBuf</i> - index where to start reading the passed buffer </p>
                <p> - <i>length</i> - how many bytes to read from the buffer </p>
                <p> - <i>pos</i> - where to start writting the fileHandle </p>
            </div></i>)         // returns a Promise which writes the passed buffer|string to the fileHandle (re-write existing content)   
            <strong>filehandle</strong>.write(<strong>data:str</strong>, <i>pos:nr</i>, <i>encode:str</i>)                                the Promise resolves into an object <mark>{bitesWritten:nr, buffer:buffer}</mark> (rejected Promise = error) 
            <strong>filehandle</strong>.writev(<strong class="openable">buf:view<div>
                <p> - <strong>buf</strong> - any TypedArray (ex: <mark>Uint16Array</mark>) or <mark>DavaView</mark> </p>
            </div></strong>, <i class="openable">pos:nr<div>
                <p> - offset position where to start writing the data from the source filehandle </p>
            </div></i>)                                      // returns a Promise which writes the passed ArrayBuffer view to the file handle (re-write existing content) 
                                                                                          the Promise resolves into an object <mark>{bitesWritten:nr, buffer:buffer}</mark> (rejected Promise = error)   
                                                                                          does the same as <mark>write()</mark> but the <strong>buf</strong> argument can be any ArrayBuffer view type (ex: <mark>DataView</mark> / <mark>Uint8Array</mark> etc... )
            
            <strong>filehandle</strong>.truncate(<i>length:nr</i>)                                             // returns a Promise which truncates the fileHandle <u>(truncates as bytes)</u> (rejected Promise = error) 
                                                                                          if <i>length:nr</i> is bigger than the file's content the remaining space is filled with <mark>\0</mark> characters) (Default: <mark>0</mark>) 
            
<span style="color:darkgrey;">// watching files ---------------------------------------------------------------------</span>    
            <strong>filehandle</strong>.stat(<i class="openable">option:obj<div>
                <p> bigint: <strong>bol</strong> - the <mark>Stats</mark> object values will be represented as bigint values indtead of number (Default: <mark>false</mark>) </p>
            </div></i>)                                               // returns a Promise which resolves into a <mark>Stats</mark> object (holds the stats of the item) (rejected Promise = error)    
            
            <strong>filehandle</strong>.utimes(<strong>atime:nr|str|Date</strong>, <strong>mtime:nr|str|Date</strong>)                    // returns a Promise which sets the access and modified times of the fileHandle (rejected Promise = error)
            <strong>filehandle</strong>.lutimes(<strong>atime:nr|str|Date</strong>, <strong>mtime:nr|str|Date</strong>)                   // returns a Promise which sets the access and modified times of the fileHandle (rejected Promise = error)
                                                                                          does the same as <mark>utimes()</mark> but if a symbolic-link is targeted modifies the times of the symbolic-link itself <span class="openable">[TESTED: 2020-07-11 no really working]<div>
                <p> - attempts to change the time of the symbolic-link itself but it doesn't work, does not changes the original file's time either </p>
            </div></span>    
            
<span style="color:darkgrey;">// file management --------------------------------------------------------------------</span>    
            <strong>filehandle</strong>.chmod(<i class="openable">mode:str|nr<div>
                <p> - on Windows only the writing permission can be changed (<mark>0o666</mark> read-write) (<mark>0o400</mark> read-only) </p>
                <p> - linux file access mechanism used (ex: <mark>744</mark> = owner has full permission but the gropu and others can read only) </p>
                <p> <mark>7</mark> - read, write, and execute </p>
                <p> <mark>6</mark> - read and write </p>
                <p> <mark>5</mark> - read and execute </p>
                <p> <mark>4</mark> - read only </p>
                <p> <mark>3</mark> - write and execute </p>
                <p> <mark>2</mark> - write only </p>
                <p> <mark>1</mark> - execute only </p>
                <p> <mark>0</mark> - no permission </p>
            </div></i>)                                             // returns a Promise which changes the access permissions of the fileHandle (rejected Promise = error)    
            
            <strong>filehandle</strong>.chown(<strong>path:str|buf|urlObj</strong>, <strong>uid:nr</strong>, <strong>gid:nr</strong>)                      // returns a Promise which changes the owner and the group of the fileHandle (LINUX <mark>chdown()</mark>) (rejected Promise = error)
    </pre>
<details class="example">
<summary> DEMO </summary>
    <pre>
    const fsPromises = require("fs").promises;
    var buffer = new Buffer.alloc(17, 'kicsi kutya tarka');
    
    fsPromises.open('testFile.txt', 'r')                                               // allocates (opens) a file descriptor      // !! the system flag must support subsequent operations (Default: 'r')    
        .then(function(fileHandle){                                                    // resolved promise returns the file descriptor wrapped in the FileHandle object    
// fd / close() -----------------------------------------------------------------------
            fileHandle.fd;                                                             // -> 3                                     // returns the wrapped file descriptor 
            fileHandle.close()                                                         // asynchronously closes wrapped file descriptor by using the Promise API 
                .catch((rej) => {console.log(rej)});                                    
            
// readFile() / read() ----------------------------------------------------------------
            fileHandle.readFile()                                                      // (file descriptor flag should be 'r') asynchronously reads the entire content of the file by using the Promise API    
                .then((res) => {console.log(res)})                                     // -> &lt;Buffer ...&gt;                          // the read data is returned here  
                .catch((rej) => {console.log(rej)});
                
            fileHandle.read(buffer, 0, 17, 0)                                          // (file descriptor flag should be 'r') asynchronously reads the first 17 bytes of the file content (we cannot read more bytes than the passed buffer size)    
                .then((res) => {console.log(res)})                                     // -> {bytesRead:17, buffer:&lt;Buffer ...&gt;}   // returned object holds the passed buffer object with the read data     
                .catch((rej) => {console.log(rej)});
    
// writeFile() / appendFile() / write() -----------------------------------------------
            fileHandle.writeFile('write this data')                                    // (file descriptor flag should be 'w') asynchronously rewrites the entire content of the file by using the Promise API   
                .catch((rej) => {console.log(rej)});
                
            fileHandle.appendFile('append this data')                                  // (file descriptor flag should be 'a') asynchronously appends the string to the file's content by using the Promise API   
                .catch((rej) => {console.log(rej)});
                
            fileHandle.write(buffer, 0, null, 10)                                      // (file descriptor flag should be 'r+') asynchronously writes the buffer data to the file's content (from the 10th position)   
                .then((res) => {console.log(res)})                                     // -> {bytesWritten:17, buffer:&lt;Buffer ...&gt;} // returned object holds the passed buffer  
                .catch((rej) => {console.log(rej)});
            
// truncate() -------------------------------------------------------------------------
            fileHandle.truncate(70)                                                    // (file descriptor flag should be writable) asynchronously truncates the file's content (if content is shorter then the remaining space is filled with '\0' characters)    
                .catch((rej) => {console.log(rej)});
        
// stat() / utimes() ------------------------------------------------------------------
            fileHandle.utimes(1571416406, 1571416406)                                  // (file descriptor flag should be writable) asynchronously modifies the last access and modified time of the file (Epoch times passed)   
                .catch((rej) => {console.log(rej)});
        
            fileHandle.stat({bigint:true})                                             // (file descriptor flag doesn't matter) asynchronously returns the stast of the file (Stats object)    
                .then((res) => {console.log(res)})                                     // -> Stats{...}                            // Stats object values are in bigint numbers    
                .catch((rej) => {console.log(rej)});
        
// chmod() ----------------------------------------------------------------------------
            fileHandle.chmod(0o666)                                                    // (file descriptor flag doesn't matter) asynchronously changes the access permission of the file to read-write 
                .then((res) => {console.log(res)})
                .catch((rej) => {console.log(rej)});

        }).catch((rej) => {console.log(rej)});
    </pre>
</details>
<details class="example">
<summary> Example : </summary>
<h4 style="color:darkblue;"><u> <mark>fd</mark> / <mark>close()</mark> TEST </u></h4>
    <pre style="margin-bottom:1px;">
    const fs = require('fs');
    
    fs.promises.open('testFile.txt')
        .then(function(fileHandle){
            console.log( fileHandle.fd );                                              // file descriptor opened and wrapped by the filehandle 
            fileHandle.close().catch((rej) => {console.log(rej)});                     // closes the file descriptor by using the Promise API 
        }).catch((rej) => {console.log(rej)});
        
    setTimeout(function(){                                                             // delayed half second to avoid race condition problems  
        console.log( fs.readFileSync(3, 'utf-8') );                                    // -! throws an error because file descriptor close by now   
    }, 500);    
    </pre>
    <pre class="cmd" style="margin-top:1px;">
    PS D:\safe\code +\my site\03 improuve\learn webdesign\04 node.js\file system\07 promise API\08 fd close() TEST> node main      
        3                                                                              // fileHandle.fd 
        fs.js:168                                                                      // -! error is thrown because the file descriptor is closed   
        return (stats[1/* mode */] & S_IFMT) === fileType;
                    ^
        TypeError: Cannot read property '1' of undefined
            at isFileType (fs.js:168:16)
            at Object.readFileSync (fs.js:345:16)
            at Timeout._onTimeout (D:\safe\code +\my site\03 improuve\learn webdesign\04 node.js\file system\07 promise API\08 fd close() TEST\main.js:10:21)
            at listOnTimeout (internal/timers.js:531:17)
            at processTimers (internal/timers.js:475:7)
    PS D:\safe\code +\my site\03 improuve\learn webdesign\04 node.js\file system\07 promise API\08 fd close() TEST>    
    </pre>
<!------------------------------------------------------------------------------------------------------------------>
<hr>
<h4 style="color:darkblue;"><u> <mark>writeFile()</mark> / <mark>appendFile()</mark> / <mark>write()</mark> / <mark>readFile()</mark> / <mark>read()</mark> TEST </u></h4>
    <pre style="margin-bottom:1px;">
    const fsPromises = require('fs').promises;
    
// readFile() / writeFile() ------------------------------------------------------------
    fsPromises.open('testFile1.txt', 'w')                                               // file descriptor must support the subsequet file operation 
        .then(function(fileHandle){
            fileHandle.writeFile('write this data to the file \nand this one too')      // asynchronosly (re(writes the e
                .then(function(){
                    fsPromises.open('testFile1.txt', 'r')                               // new file descriptor had to be opened because once the file is written the file descriptor's position is at the end of the written data   
                        .then(function(fileHandle){
                            fileHandle.readFile('utf-8')                                // asynchronously reads the entire content of the file 
                                .then((res) => {console.log(res)})                      // -> data returned here 
                                .catch((rej) => {console.log(rej)});
                        }).catch((rej) => {console.log(rej)});                
                }).catch((rej) => {console.log(rej)});
        }).catch((rej) => {console.log(rej)});
        
// appendFile() / read() ----------------------------------------------------------------
    var buffer = new Buffer.alloc(10);
    
    fsPromises.open('testFile2.txt', 'a')                                                // file descriptor must support the subsequet file operation
        .then(function(fileHandle){
            fileHandle.appendFile('append this data!\n')                                 // appends data to the file's content 
                .then(function(){
                    fsPromises.open('testFile2.txt', 'r')                                // new file descriptor had to be opened because once the file is written the file descriptor's position is at the end of the written data
                        .then(function(fileHandle){
                            fileHandle.read(buffer, 0, 10, 2)                            // reading a portion of the file (10 characters from 2nd position)
                                .then((res) => {console.log(res.buffer.toString())})     // -> data returned here 
                                .catch((rej) => {console.log(rej)});
                        }).catch((rej) => {console.log(rej)});
                }).catch((rej) => {console.log(rej)});
        }).catch((rej) => {console.log(rej)});
        
// write() -------------------------------------------------------------------------------
    var buffer2 = new Buffer.alloc(17, 'kicsi kutya tarka');
    
    fsPromises.open('testFile3.txt', 'w')
        .then(function(fileHandle){
            fileHandle.write(buffer2)
                .then((res) => {console.log(res)})                                         // -> written data returned here  
                .catch((rej) => {console.log(rej)});
        }).catch((rej) => {console.log(rej)});
        
// truncate() ----------------------------------------------------------------------------
    fsPromises.open('testFile4.txt', 'r+')
        .then(function(fileHandle){
            fileHandle.truncate(100)                                                      // asynchronously truncates the file to 100 bytes  
                .catch((rej) => {console.log(rej)});  
        }).catch((rej) => {console.log(rej)});
    </pre>
    <pre class="cmd" style="margin-top:1px;">
    PS D:\safe\code +\my site\03 improuve\learn webdesign\04 node.js\file system\07 promise API\09 writeFile() appendFile() write() readFile() read() truncate() TEST> node main     
// filehandle.write(buffer2) // resolved promise -----------------------------------------
        {
        bytesWritten: 17,
        buffer: &lt;Buffer 6b 69 63 73 69 20 6b 75 74 79 61 20 74 61 72 6b 61&gt;
        }
// fileHandle.read(buffer, 0, 10, 2) // resolved promise ---------------------------------
        pend this
// fileHandle.readFile('utf-8') // resolved promise --------------------------------------
        write this data to the file
        and this one too
    PS D:\safe\code +\my site\03 improuve\learn webdesign\04 node.js\file system\07 promise API\09 writeFile() appendFile() write() readFile() read() truncate() TEST>    
    </pre>
<!------------------------------------------------------------------------------------------------------------------>
<hr>
<h4 style="color:darkblue;"><u> <mark>stat()</mark> / <mark>utimes()</mark> TEST </u></h4>
    <pre style="margin-bottom:1px;">
    const fsPromises = require('fs').promises;
    
    fsPromises.open('testFile.txt', 'r+')
        .then(function(fileHandle){
            fileHandle.utimes(0, 0)                                                    // last access and last modified time updated here 
                .then(function(){
                    fileHandle.stat()                                                  // gets the Stats object 
                        .then((res) => {console.log(res)})                             // -> Stats {...}       // Stats object returned here  
                        .catch((rej) => {console.log(rej)});
                }).catch((rej) => {console.log(rej)});
        }).catch((rej) => {console.log(rej)});    
    </pre>
    <pre class="cmd" style="margin-top:1px;">
    PS D:\safe\code +\my site\03 improuve\learn webdesign\04 node.js\file system\07 promise API\10 stat() utimes() TEST> node main             
        Stats {
        dev: 3535051015,
        mode: 33206,
        nlink: 1,
        uid: 0,
        gid: 0,
        rdev: 0,
        blksize: 4096,
        ino: 844424930150422,
        size: 13,
        blocks: 0,
        atimeMs: 0,                                                                    // time updated 
        mtimeMs: 0,                                                                    // time updated
        ctimeMs: 1571406302260.8997,
        birthtimeMs: 1571405677597.835,
        atime: 1970-01-01T00:00:00.000Z,
        mtime: 1970-01-01T00:00:00.000Z,
        ctime: 2019-10-18T13:45:02.261Z,
        birthtime: 2019-10-18T13:34:37.598Z
        }
    PS D:\safe\code +\my site\03 improuve\learn webdesign\04 node.js\file system\07 promise API\10 stat() utimes() TEST>    
    </pre>
<!------------------------------------------------------------------------------------------------------------------>
<hr>
<h4 style="color:darkblue;"><u> <mark>chmod()</mark> TEST </u></h4>
    <pre style="margin-bottom:1px;">
    const fsPromises = require('fs').promises;

    fsPromises.open('testFile.txt')
        .then(function(fileHandle){
            fileHandle.chmod(0o400)                                                    // file access restricted to read-only 
                .catch((rej) => {console.log(rej)});
        }).catch((rej) => {console.log(rej)});    
    </pre>
    <pre class="cmd" style="margin-top:1px;">
    PS D:\safe\code +\my site\03 improuve\learn webdesign\04 node.js\file system\07 promise API\11 chmod() TEST> node main   
    PS D:\safe\code +\my site\03 improuve\learn webdesign\04 node.js\file system\07 promise API\11 chmod() TEST>    
    </pre>
</details>
    <br><br>
</body>
</html>