<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title> REPL </title> 
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.3.1/css/all.css" integrity="sha384-mzrmE5qonljUremFsqc01SB46JvROS7bZs3IO2EmfFsd15uHvIt+Y8vEf7N7fWAU" crossorigin="anonymous"> 
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <link rel="stylesheet" href="../../Assets/stylesPages.css"> 
    <script src="../../Assets/scriptPages.js"></script>
</head>
<body>
<h1> REPL (ver 4.0.0) </h1>
    <p> Updated ( 2019-09-01 / 2021-06-09 )</p>
    <p class="sitenav"> <a href="../../index.html">MySite></a>
        <a href="../index.html">Node.js></a> REPL   
    </p>
<table class="table">
<caption> 
    REPL Commands and Key Combinations 
    <span class="changeListOrder">[Ordered: <span>Alphabetically</span>]</span>
</caption>
    <tr>
        <th style="width:30%;"> Command / Key Combination </th>
        <th> Description </th>
    </tr>
    <tr class="30.01">
        <td> _ </td>
        <td> 
            - returns the most recently evaluated expression 
            <span id="browserSupport" title="Updated: 2021-06-09">
                <span><i class="fab fa-node-js"></i> 0.1.14 </span>
            </span>
        </td>
    </tr>
    <tr class="30.02">
        <td> _error </td>
        <td> 
            - returns the last seen (thrown) error
            <span id="browserSupport" title="updated : 2019-09-05">
                <span><i class="fab fa-node-js"></i> 9.8.0 </span>
            </span>
        </td>
    </tr>
    <tr class="25.01">
        <td> .break </td>
        <td> 
            - aborts further input or processing ( <mark style="background-color:lightskyblue;">Ctrl + C</mark> ) 
            <span id="browserSupport" title="Updated: 2021-06-09">
                <span><i class="fab fa-node-js"></i> 0.1.14 </span>
            </span>
        </td>
    </tr>
    <tr class="15.01">
        <td> .clear </td>
        <td> 
            - resets (deletes) the REPL <mark>context</mark> property (empties REPL local scope) <u>(works only if REPL was launched by a Node.js process [TESTED : 2019-09-05]</u>)    
            <span id="browserSupport" title="Updated: 2021-06-09">
                <span><i class="fab fa-node-js"></i> 0.1.14 </span>
            </span>
        </td>
    </tr>
    <tr class="20.01">
        <td> .editor </td>
        <td> 
            - enter editor mode (multiline expressions can be typed) (<mark style="background-color:lightskyblue;">Ctrl + D</mark> = finish | <mark style="background-color:lightskyblue;">Ctrl + C</mark> = cancel)  
            <span id="browserSupport" title="Updated: 2021-06-09">
                <span><i class="fab fa-node-js"></i> 0.1.14 </span>
            </span>
        </td>
    </tr>
    <tr class="10.01">
        <td> .exit </td>
        <td> 
            - closes the I/O stream, causing REPL to exit ( <mark style="background-color:lightskyblue;">Ctrl + C</mark> ) 
            <span id="browserSupport" title="Updated: 2021-06-09">
                <span><i class="fab fa-node-js"></i> 0.1.14 </span>
            </span>
        </td>
    </tr>
    <tr class="05.01">
        <td> .help </td>
        <td> 
            - show available REPL commands 
            <span id="browserSupport" title="Updated: 2021-06-09">
                <span><i class="fab fa-node-js"></i> 0.1.14 </span>
            </span>
        </td>
    </tr>
    <tr class="35.01">
        <td> .load <strong>file|URL</strong> </td>
        <td> 
            - loads the targeted file into the current REPL session 
            <span id="browserSupport" title="Updated: 2021-06-09">
                <span><i class="fab fa-node-js"></i> 0.1.14 </span>
            </span>
        </td>
    </tr>
    <tr class="35.02">
        <td> .save <strong>file|URL</strong> </td>
        <td> 
            - saves the current REPL session to the targeted file 
            <span id="browserSupport" title="Updated: 2021-06-09">
                <span><i class="fab fa-node-js"></i> 0.1.14 </span>
            </span>
        </td>
    </tr>
    <tr class="40.01">
        <td colspan="2"> Key Combinations </td>
    </tr>
    <tr class="40.02">
        <td> Ctrl + C </td>
        <td> 
            - <u>one press</u> = abort further input or processing (same as <mark>.break</mark> command)  |  <u>second press</u> = exit REPL (same as <mark>.exit</mark> command) 
            <span id="browserSupport" title="Updated: 2021-06-09">
                <span><i class="fab fa-node-js"></i> 0.1.14 </span>
            </span>
        </td>
    </tr>
    <tr class="40.03">
        <td> Ctrl + D </td>
        <td> 
            - closes the I/O stream, causing REPL to exit (same as <mark>.exit</mark> command) 
            <span id="browserSupport" title="Updated: 2021-06-09">
                <span><i class="fab fa-node-js"></i> 0.1.14 </span>
            </span>
        </td>
    </tr>
    <tr class="40.04">
        <td> Tab </td>
        <td> 
            - displays global and local scope variables  
            <span id="browserSupport" title="Updated: 2021-06-09">
                <span><i class="fab fa-node-js"></i> 0.1.14 </span>
            </span>
        </td>
    </tr>
</table>
    <br>
<table class="table">
<caption> 
    Methods and Events 
    <span class="changeListOrder">[Ordered: <span>Alphabetically</span>]</span>
</caption>
    <tr>
        <th style="width:30%;"> Method / Event </th>
        <th> Description </th>
    </tr>
    <tr class="25.01">
        <td> <strong>replServer</strong>.clearBufferedCommand() </td>
        <td> 
            - this suppose to clear buffered commands (clear custom added commands as I understod that) but it's not working, maybe I'm not using as it sholud be [TESTED : 2019-09-05] <a href="https://nodejs.org/dist/latest-v12.x/docs/api/repl.html#repl_replserver_clearbufferedcommand" target="_blank">Node.js 'clearBufferedCommand()' method</a>  
            <span id="browserSupport" title="updated : 2019-09-05">
                <span><i class="fab fa-node-js"></i> 9.0.0 </span>
            </span>
        </td>
    </tr>
    <tr class="10.01">
        <td> <strong>replServer</strong>.context </td>
        <td> 
            - holds the properties of the current replServer (this is where we can add properties and methods to the REPL environment) 
            <span id="browserSupport" title="updated : 2019-09-05">
                <span><i class="fab fa-node-js"></i> 0.1.19 </span>
            </span>
        </td>
    </tr>
    <tr class="15.01">
        <td>  
            <strong>replServer</strong>.defineCommand(<strong>cmd:str</strong>, <strong>fn</strong>) 
        </td>
        <td> 
            - defines a custom REPL command (function called in REPL when <mark>.<strong>cmd</strong> entered </mark>)
            <span id="browserSupport" title="updated : 2019-09-05">
                <span><i class="fab fa-node-js"></i> 0.3.0 </span>
            </span>
        </td>
    </tr>
        <tr class="15.02"><td></td><td></td></tr>
    <tr class="15.03">
        <td>  
            <strong>replServer</strong>.defineCommand(<strong>cmd:str</strong>, <i class="openable">option:obj<div>
                <p> help: <strong>str</strong> - message when <mark>.help</mark> entered in REPL </p>
                <p> action: <strong>fn</strong> - function to execute when the command is entered </p>
            </div></i>) 
        </td>
        <td> </td>
    </tr>
    <tr class="20.01">
        <td> <strong>replServer</strong>.displayPrompt(<i>bol</i>) </td>
        <td> 
            - prints the prompt line in REPL (when tested the argument does nothing maybe I'm not using it as it sholud be used [TESTED : 2019-09-05])
            <span id="browserSupport" title="updated : 2019-09-05">
                <span><i class="fab fa-node-js"></i> 0.1.91 </span>
            </span>
        </td>
    </tr>
    <tr class="30.01">
        <td> <strong>replServer</strong>.setupHistory(<strong>file|URL</strong>, <strong>fr(err, replServer)</strong>) </td>
        <td> 
            - initializes a history log file (history log file = data never overridden, new data added on top) for this REPL instance
            <span id="browserSupport" title="updated : 2019-09-05">
                <span><i class="fab fa-node-js"></i> 11.10.0 </span>
            </span>
        </td>
    </tr>
    <tr class="05.01">
        <td> 
            <strong>repl</strong>.start(<i class="openable">option:obj|prompt:str<div>
                <p> <i>prompt:str</i> </p>
                <p> - prompt to display (Default: <mark>&gt;</mark>) </p>
                <hr>
                <p> <i>option:obj</i> </p>
                <p> prompt: <strong>str</strong> - pormpt to display (Default: <mark>&gt;</mark>) </p>
                <p> input: <strong>readableStream</strong> - stream from which REPL input will be read (Default: <mark>process.stdin</mark>) </p>
                <p> output: <strong>writableStream</strong> - stream to which REPL outputs (Default: <mark>process.stdout</mark>) </p>
                <p> terminal: <strong>bol</strong> - if <mark>true</mark> the output is treated as TTY terminal </p>
                <p> eval: <strong>fn</strong> - function used to evaluate each line of input </p>
                <p> useColors: <strong>bol</strong> - if <mark>true</mark> ANSI color styles REPL output </p>
                <p> useGlobal: <strong>bol</strong> - uses the <mark>global</mark> object instead of creating a separate REPL context (Default: <mark>false</mark>) </p>
                <p> ignoreUndefined: <strong>bol</strong> - if <mark>true</mark> undefined utput is not printed (Default: <mark>false</mark>) </p>
                <p> writer: <strong>fn</strong> - function to invoke to format the output (Default: <mark>util.inspect()</mark>) </p>
                <p> completer: <strong>fn</strong> - optional custom tab auto completition </p>
                <p> replMode: <strong>symbol</strong> - strict or 'sloppy' mode each line (possible values: <mark>repl.REPL_MODE_SLOPPY</mark> or <mark>repl.REPL_MODE_STRICT</mark> symbols) </p>
                <p> breakEvalOnSiging: <strong>bol</strong> - stops evaluating the current piece of code when <mark>SIGINT</mark> is received (Default: <mark>false</mark>) </p>
                <p> preview: <strong>bol</strong> - autocomplete and preview in REPl (Default: <mark>true</mark>) </p>
            </div></i>) 
        </td>
        <td> 
            - creates and returns a <strong>replServer</strong> instance and launches REPL 
            <span id="browserSupport" title="Updated: 2021-06-09">
                <span><i class="fab fa-node-js"></i> 0.1.19 </span>
                <span class="openable"> more... <div>
                    <p> v5.8.0</p>
                    <p> - the <i>option:obj</i> is optional </p>
                    <p> v13.4.0 / 12.17.0 </p>
                    <p> - the <i>preview</i> option available </p>
                </div></span>
            </span>
        </td>
    </tr>
    <tr class="35.01">
        <td colspan="2"> Events </td>
    </tr>
    <tr class="35.02">
        <td> <strong>replServer.listener</strong><em>(</em>'exit', <strong>fn</strong><em>)</em> </td>
        <td> 
            - event emitted when this REPL instance exit
            <span id="browserSupport" title="updated : 2019-09-05">
                <span><i class="fab fa-node-js"></i> 0.7.7 </span>
            </span>
        </td>
    </tr>
    <tr class="35.03">
        <td> <strong>replServer.listener</strong><em>(</em>'reset', <strong>fn(replContext)</strong><em>)</em> </td>
        <td> 
            - event emitted when the repl context resets (when the <mark>.clear</mark> command is received)
            <span id="browserSupport" title="updated : 2019-09-05">
                <span><i class="fab fa-node-js"></i> 0.11.0 </span>
            </span>
        </td>
    </tr>
</table>
<h2 style="color:green;"><u> Notes : </u></h2>
    <details class="example" id="notes">
    <summary> Notes :</summary>
    <p> - the <mark>await</mark> keyword is in experimental stage now [TESTED : 2019-09-05] <a href="https://nodejs.org/dist/latest-v12.x/docs/api/repl.html#repl_await_keyword" target="_blanc"> REPL await keyword (link) </a></p>
    </details>
<h2 style="color:green;"><u> Useful Links : </u></h2>
    <p><a href="https://nodejs.org/dist/latest-v12.x/docs/api/repl.html" target="_blanc">Node.js REPL</a></p>
<h2 style="color:green;"><u> Remember This : </u></h2>
    <p> - in REPL all Node.js built-in modules available without calling them (like <mark>os</mark>, <mark>assert</mark>, ect...) </p>
<h2 style="color:green;"><u> Description and Demonstration : </u></h2>
    <p> - REPL (<b>R</b>ead <b>E</b>val <b>P</b>rint <b>L</b>oop) is a JavaScript runtime environment within Node.js (like the console in the browser), it is used to run and test JS code, REPL is an instance of <mark>repl.replServer</mark> </p>
    <p> - REPL is available as standalone program or can be created and launched within a node.js process (by default it uses the standard <mark>stdin</mark> and <mark>stdout</mark> as I/O)</p>
    <pre class='cmd'style="margin-bottom:1px;">
    PS D:\safe\code +\my site\03 improuve\learn webdesign\04 node.js\repl> node  // launching REPL from the command line (standalone program)
        Welcome to Node.js v12.4.0.
        Type ".help" for more information.
        >                                                                        // we're in REPL here 
    </pre>
    <pre style="margin-top:1px;">
    const repl = require('repl');
    repl.start();                                                                // launching repl from an application (from a node.js process)
    </pre>
    <p> - the default REPL evaluator provides access to all global varialbes and <u style='color:yellow;'>all built-in modules are available without requiring them (like <mark>os</mark>, <mark>assert</mark>, ect...)</u> </p>
    <p> - the <mark>context</mark> property holds REPL local variables </p>
    <pre style="margin-bottom:1px;">
    const repl = require('repl');
    
    var x = 22;                                                                  // variable local to this module 
    global.y = 23;                                                               // global variable 
    
    repl.start({prompt:"> "}).context.z = 24;                                    // property local to this REPL 
    </pre>
    <pre class="cmd" style="margin-top:1px;">
    PS D:\safe\code +\my site\03 improuve\learn webdesign\04 node.js\repl> node main
        > x                                                                      // module varialbe not available in REPL
        Thrown:
        ReferenceError: x is not defined                                         
        > y                                                                      // global variable available 
        23                                                                       
        > z                                                                      // REPL context property available 
        24                                                                       
        > os.arch()                                                              // built-in module available (without requiring it)
        'x64'
        >  
    </pre>
    <p> - the <mark>domain</mark> module handles REPL exceptions (this prevents blocking the REPL thread in case of errors) but the <mark>setUncaughtExceptionCaptureCallback()</mark> method <u>cannot be used in the application</u></p>
    <pre>
    const repl = require('repl');                                                // the REPL module contains the 'domain' module  
    
    process.setUncaughtExceptionCaptureCallback(function(err){ });               // -! this is not allowed if we want to use REPL or the domain module     // !! error thrown   
    </pre>
<details class="example">
<summary> Example : </summary>
<h4 style="color:darkblue;"><u> REPL uncaughtException TEST </u></h4>
    <pre style="margin-bottom:1px;">
    const repl = require('repl');
    
    process.setUncaughtExceptionCaptureCallback(()=>{});                         // causes an error because of the domain module 
    </pre>
    <pre class="cmd" style="margin-top:1px;">
    PS D:\safe\code +\my site\03 improuve\learn webdesign\04 node.js\repl\01 REPL uncaughtException TEST> node main
        domain.js:104                                                            // -> domain module handles REPL exceptions   
        throw err;
        ^
    
        Error [ERR_DOMAIN_CANNOT_SET_UNCAUGHT_EXCEPTION_CAPTURE]: The `domain` module is in use, which is mutually exclusive with calling process.setUncaughtExceptionCaptureCallback()
        [90m    at process.setUncaughtExceptionCaptureCallback (domain.js:102:15)[39m
            at Object.&lt;anonymous&gt; (D:\safe\code +\my site\03 improuve\learn webdesign\04 node.js\repl\01 REPL uncaughtException TEST\main.js:3:9)
        [90m    at Module._compile (internal/modules/cjs/loader.js:774:30)[39m
        [90m    at Object.Module._extensions..js (internal/modules/cjs/loader.js:785:10)[39m
        [90m    at Module.load (internal/modules/cjs/loader.js:641:32)[39m
        [90m    at Function.Module._load (internal/modules/cjs/loader.js:556:12)[39m
        [90m    at Function.Module.runMain (internal/modules/cjs/loader.js:837:10)[39m
        [90m    at internal/main/run_main_module.js:17:11[39m
        ----------------------------------------
        Error: require(`domain`) at this point
        [90m    at domain.js:98:28[39m
        [90m    at NativeModule.compile (internal/bootstrap/loaders.js:300:5)[39m
        [90m    at nativeModuleRequire (internal/bootstrap/loaders.js:189:14)[39m
        [90m    at repl.js:69:16[39m
        [90m    at NativeModule.compile (internal/bootstrap/loaders.js:300:5)[39m
        [90m    at NativeModule.compileForPublicLoader (internal/bootstrap/loaders.js:217:8)[39m
        [90m    at Function.Module._load (internal/modules/cjs/loader.js:538:16)[39m
        [90m    at Module.require (internal/modules/cjs/loader.js:681:19)[39m
        [90m    at require (internal/modules/cjs/helpers.js:16:16)[39m
            at Object.&lt;anonymous&gt; (D:\safe\code +\my site\03 improuve\learn webdesign\04 node.js\repl\01 REPL uncaughtException TEST\main.js:1:14)
    PS D:\safe\code +\my site\03 improuve\learn webdesign\04 node.js\repl\01 REPL uncaughtException TEST>
    </pre>
</details>
<!------------------------------------------------------------------------------------------------------------------------>
<hr>
<h2 class="headerExtra"><u> Commands and Key Combinations in REPL </u></h2>
<h3 style="color:darkblue;"><u> The <mark>.help</mark> / <mark>.exit</mark> / <mark>.clear</mark> / <mark>.editor</mark> / <mark>.break</mark> / <mark>_</mark> / <mark>_error</mark> / <mark>.load</mark> / <mark>.save</mark> commands and <mark>Ctrl + C</mark> / <mark>Ctrl + D</mark> / <mark>Tab</mark> key combinations </u></h3>
<details class="example">
<summary> DEMO </summary>
    <pre class="cmd">
    PS D:\safe\code +\my site\03 improuve\learn webdesign\04 node.js\repl\03 .save .load TEST> node                  
        Welcome to Node.js v12.4.0.
        Type ".help" for more information.
// .help ------------------------------------------------------------------------
        > .help                                                                  // prints available commands 
        .break    Sometimes you get stuck, this gets you out
        .clear    Alias for .break
        .editor   Enter editor mode
        .exit     Exit the repl
        .help     Print this help message
        .load     Load JS from a file into the REPL session
        .save     Save all evaluated commands in this REPL session to a file                                                     
        
// .editor ----------------------------------------------------------------------
        > .editor                                                                // editor mode allows to type multiline code within REPL 
        // Entering editor mode (^D to finish, ^C to cancel)
        var add = function(a, b){
          return a + b;
        }                                                                        // Ctrl + D pressed here 
        > add(2, 2);                                                             // above multiline code executed 
        4
        
// .clear -----------------------------------------------------------------------   
        > .clear                                                                 // !! this clears the curent REPL context (REPL scope) but only if REPL is launched by a Node.js process (what is not the case here!)   
        > add(2, 2);                                                             // -! REPL scope not cleared (because REPL runs as standalone program)   
        4
        
// .load / .save ----------------------------------------------------------------
        > .load test.js                                                          // loads the targeted script in the current REPL session 
        var myVar = 11;                                                          // -> loaded script 
        > myVar                                                                  // loaded script available 
        11
        > .save myScript.js                                                      // save the current REPL session (scope) in the targeted file   
        
// _ / _error -------------------------------------------------------------------
        > throw new SyntaxError('some error');
        Thrown:
        SyntaxError: some error
        > _                                                                      // returns the last expression 
        11
        > _error                                                                 // returns the last thrown error 
        [SyntaxError: some error]
    
// .exit ------------------------------------------------------------------------
        > .exit                                                                  // exit REPL 
        PS D:\safe\code +\my site\03 improuve\learn webdesign\04 node.js\repl\03 .save .load TEST>
    </pre>
</details>
<details class="example">
<summary> Example : </summary>
<h4 style="color:darkblue;"><u> REPL Commands <mark>.clear</mark> / <mark>.help</mark> / <mark>.editor</mark> / <mark>.exit</mark> TEST </u></h4> 
    <pre style="margin-bottom:1px;">
    const repl = require('repl');
    
    var myRepl = repl.start();
    
    myRepl.context.getValueBack = function(val){                                 // adding a propety (method) to the REPL local scope 
        return val;
    }    
    </pre>
    <pre class="cmd" style="margin-top:1px;">
    PS D:\safe\code +\my site\03 improuve\learn webdesign\04 node.js\repl\02 REPL Commands .clear .help .editor . exit TEST> node main       
// .clear -----------------------------------------------------------------------
        > x = 21;                                                                // variable added to the REPL scope   
        21
        > getValueBack(21);                                                      // REPL local method 
        21
        > x
        21  
        > .clear                                                                 // clear the 'context' property (REPL local scope)
        Clearing context...
        > x                                                                      // REPL local scope empty 
        Thrown:
        ReferenceError: x is not defined
        > getValueBack(22);                                                      // REPL local scope empty 
        Thrown:
        ReferenceError: getValueBack is not defined
// .help ------------------------------------------------------------------------
        > .help                                                                  // print available REPL commands 
        .break    Sometimes you get stuck, this gets you out
        .clear    Break, and also clear the local context
        .editor   Enter editor mode
        .exit     Exit the repl
        .help     Print this help message
        .load     Load JS from a file into the REPL session
        .save     Save all evaluated commands in this REPL session to a file
// .editor ----------------------------------------------------------------------
        Press ^C to abort current expression, ^D to exit the repl                // entering editor mode 
        > .editor
        // Entering editor mode (^D to finish, ^C to cancel)
        function myFunc(a, b) {                                                  // we can type multiline expressions here 
          return a - b;
        }
        undefined                                                                // exit editor mode (Ctrl + D pressed here)   
        > myFunc(21, 10);
        11
// .exit ------------------------------------------------------------------------
        > .exit                                                                  // exit REPL
    PS D:\safe\code +\my site\03 improuve\learn webdesign\04 node.js\repl\02 REPL Commands .clear .help .editor . exit TEST>     
    </pre>
<!------------------------------------------------------------------------------------------------------------------------>
<hr>
<h4 style="color:darkblue;"><u> REPL Commands <mark>_</mark>(undersocre) Tab TEST </u></h4> 
    <pre class="cmd">
    PS D:\safe\code +\my site\03 improuve\learn webdesign\04 node.js\repl> node                           Welcome to Node.js v12.4.0.
        Type ".help" for more information.
        > var x = 2;
        undefined
        > _                                                                      // no expression to return yet 
        undefined
        > '23' + 1;
        '231'
        > _                                                                      // returns the last expression  
        '231'
        > throw new Error('myError');
        Thrown:
        Error: myError
        > throw new EvalError('someEvalError');
        Thrown:
        EvalError: someEvalError
        > _error                                                                 // returns the last thrown error  
        [EvalError: someEvalError]
        >                                                                        // -! pressing Tab twice      // list global and local variables  
        Array                 ArrayBuffer           Atomics               BigInt
        BigInt64Array         BigUint64Array        Boolean               Buffer
        DataView              Date                  Error                 EvalError
        Float32Array          Float64Array          Function              GLOBAL
        Infinity              Int16Array            Int32Array            Int8Array
        Intl                  JSON                  Map                   Math
        NaN                   Number                Object                Promise
        Proxy                 RangeError            ReferenceError        Reflect
        RegExp                Set                   SharedArrayBuffer     String
        Symbol                SyntaxError           TextDecoder           TextEncoder
        TypeError             URIError              URL                   URLSearchParams
        Uint16Array           Uint32Array           Uint8Array            Uint8ClampedArray
        WeakMap               WeakSet               WebAssembly           _
        _error                assert                async_hooks           buffer
        child_process         clearImmediate        clearInterval         clearTimeout
        cluster               console               crypto                decodeURI
        decodeURIComponent    dgram                 dns                   domain
        encodeURI             encodeURIComponent    escape                eval
        events                fs                    global                globalThis
        http                  http2                 https                 inspector
        isFinite              isNaN                 module                net
        os                    parseFloat            parseInt              path
        perf_hooks            process               punycode              querystring
        queueMicrotask        readline              repl                  require
        root                  setImmediate          setInterval           setTimeout
        stream                string_decoder        tls                   trace_events
        tty                   undefined             unescape              url
        util                  v8                    vm                    worker_threads
        x                     zlib                                                                              // 'x' is a REPL local varialbe 
        
        __defineGetter__      __defineSetter__      __lookupGetter__      __lookupSetter__
        __proto__             hasOwnProperty        isPrototypeOf         propertyIsEnumerable
        toLocaleString        toString              valueOf
        
        constructor
        
        >             
    </pre>
<!------------------------------------------------------------------------------------------------------------------------>
<hr>
<h4 style="color:darkblue;"><u> REPL Commands <mark>.save</mark> / <mark>.load</mark> TEST </u></h4> 
    <pre class="cmd" style="margin-top:1px;">
    PS D:\safe\code +\my site\03 improuve\learn webdesign\04 node.js\repl\03 .save .load TEST> node
        Welcome to Node.js v12.4.0.
        Type ".help" for more information.
        > .load main.js                                                          // loading JS file from the current directory 
        var helloWord = function(data) {
            return `hello word my name is ${data}`;
            };

        undefined
        > .load folder1/subfolder1/node_module.js                                // loading JS file from child dirrectories 
        var add = function(a, b) {
            return a + b;
            }

        undefined
        > helloWord('Pall');                                                     // loaded script available in this REPL session   
        'hello word my name is Pall'
        > add(2, 2);                                                             // loaded script available in this REPL session   
        4
        > .clear                                                                 // -! we cannot clear this REPL socpe because it is launched as standalone program   
        > add(2, 2);                                                             // loaded script is still available despite clearing this REPL session    
        4
        > .exit
    PS D:\safe\code +\my site\03 improuve\learn webdesign\04 node.js\repl\03 .save .load TEST> node
        Welcome to Node.js v12.4.0.
        Type ".help" for more information.
        > .editor
        // Entering editor mode (^D to finish, ^C to cancel)
        var divideFn = function(a, b) {
        return a / b;
        }
        undefined
        > .save divide_module.js                                                 // saving the script of this REPL session in the targeted file    
        Session saved to: divide_module.js
        >                             
    </pre>
</details>
<!------------------------------------------------------------------------------------------------------------------------>
<hr>
<h2 class="headerExtra"><u> Methods and Events </u></h2>
<h3 style="color:darkblue;"><u> Methods <mark>start()</mark> / <mark>context</mark> / <mark>defineCommand()</mark> / <mark>displayPrompt()</mark> / <mark>clearBufferedCommand()</mark> / <mark>setupHistory()</mark> </u></h3>
<details class="example">
<summary> DEMO </summary>
    <pre>
    const repl = require('repl');
    
// start() / context ------------------------------------------------------------
    var replServer = repl.start('> ');                                           // returns a replServer instance and launches REPL on the command line   
    
    replServer.context.data1 = 'some data';                                      // data will be available in this REPL session 
    replServer.context.add = function(a, b) { return a + b; }
    
// defineCommand() / displayPrompt() / clearBufferedCommand() -------------------
    replServer.defineCommand('cmd1', function(arg){                              // 'cmd1' command defined (called as '.cmd1' in REPL)
        console.log( arg );
        replServer.displayPrompt();                                              // once the command function is executed in REPL this makes sure that the prompt is displayed on the new line ('> ' in this case)    
    });
    
    replServer.defineCommand('cmd2', {                                           // 'cmd2' command defined (called as '.cmd2' in REPL)
        help:'command 2 instructions',      
        action() { 
            replServer.clearBufferedCommand();                                   // -! this suppose to clear buffered commands (custom commands I far as I understod) but this has no effect in this case [TESTED : 2019-09-05]   
            replServer.displayPrompt();
        }
    });    
    
// setUpHistory() ---------------------------------------------------------------
    replServer.setupHistory('repl_log.txt', function(err, replServer){           // this REPL history will be saved in 'repl_log.txt' 
        err                                                                      // error in case of error thrown ('null' if not)   
        replServer                                                               // current replServer instance 
    });
    </pre>
</details>
<details class="example">
<summary> Example : </summary>
<h4 style="color:darkblue"><u> <mark>start()</mark> / <mark>context</mark> TEST </u></h4>
    <pre style="margin-bottom:1px;">
    const repl = require('repl');
    
    var repServer = repl.start({propt:'-> '});                                   // custom prompt line set (same as repl.start('->'))
    
    repServer.context.myVar = 10;                                                // property added to the curent replServer session  
    repServer.context.add = function(a, b) { return a + b };                     // method added to the curent replServer session
    </pre>
    <pre class="cmd" style="margin-top:1px;">
    PS D:\safe\code +\my site\03 improuve\learn webdesign\04 node.js\repl\04 start() context TEST> node main
        -> myVar                                                                 // available property in the curent REPL context 
        10
        -> add(2, 3);                                                            // available method in the curent REPL context 
        5
        -> .clear                                                                // clear REPL context 
        Clearing context...
        -> myVar                                                                 // initialized REPL properties are not available any more 
        Thrown:
        ReferenceError: myVar is not defined
        -> add
        Thrown:
        ReferenceError: add is not defined
        ->       
    </pre>
<!------------------------------------------------------------------------------------------------------------------------>
<hr>
<h4 style="color:darkblue"><u> <mark>defineCommand()</mark> / <mark>clearBufferedCommand()</mark> / <mark>displayPrompt()</mark> TEST </u></h4>
    <pre style="margin-bottom:1px;">
    const repl = require('repl');
    
    var replServer = repl.start();
    
// define a custom command using simple function --------------------------------
    replServer.defineCommand('getContext', function(){                           // command prints the content of this REPL context 
        console.log( replServer.context );
        replServer.displayPrompt();                                              // this makes sure that the set prompt will be displayed after executing the command
    });
    
// define a custom command using object -----------------------------------------
    replServer.defineCommand('delAddedCommands',                                 // command suppose to clear buffered commands (but it doesn't)
        {help:'delete added commands', 
        action:function(){
            replServer.clearBufferedCommand();                                   // !! this is not working (maybe I'm not using it in the right way but the description is very vague in the Node.js specification)   
            replServer.displayPrompt();
        }});
        
// custom command function argument TEST ----------------------------------------
    replServer.defineCommand('printMessage',                                     // command displays the passed argument 
        {help:'print the entered message', 
        action(message){ 
            console.log(message);
            replServer.displayPrompt();
        }});
    </pre>
    <pre class="cmd" style="margin-top:1px;">
    PS D:\safe\code +\my site\03 improuve\learn webdesign\04 node.js\repl\05 defineCommand() clearBufferedCommand() displayPrompt() TEST> node main     
        var x = 10;
        undefined
        > .help
        .break              Sometimes you get stuck, this gets you out
        .clear              Break, and also clear the local context
        .delAddedCommands   delete added commands                                // custom command 
        .editor             Enter editor mode
        .exit               Exit the repl
        .getContext                                                              // custom command
        .help               Print this help message
        .load               Load JS from a file into the REPL session
        .printMessage       print the entered message                            // custom command
        .save               Save all evaluated commands in this REPL session to a file
    
        Press ^C to abort current expression, ^D to exit the repl
        > .printMessage 'F@szagyerek'                                            // custom command prints the passed message   
        'F@szagyerek'
        > .getContext                                                            // custom command prints the content of this REPL session ()
        {
        global: [Circular],
        clearInterval: [Function: clearInterval],
        clearTimeout: [Function: clearTimeout],
        setInterval: [Function: setInterval],
        setTimeout: [Function: setTimeout] { [Symbol(util.promisify.custom)]: [Function] },
        queueMicrotask: [Function: queueMicrotask],
        clearImmediate: [Function: clearImmediate],
        setImmediate: [Function: setImmediate] {
            [Symbol(util.promisify.custom)]: [Function]
        x: 10                                                                    // varialbe added to this context at the top of the scope 
        }
        }
        > .delAddedCommands                                                      // -! this suppose to clear buffered commands (my custom commands if I understand it right) but it didn't work here [TESTED : 2019-09-05]    
        > .printMessage 'myMessage'                                              // custom commands are not cleared 
        'myMessage'
        >             
    </pre>
<!------------------------------------------------------------------------------------------------------------------------>
<hr>
<h4 style="color:darkblue"><u> <mark>setUpHistory()</mark> TEST </u></h4>
    <pre style="margin-bottom:1px;">
// main.js ----------------------------------------------------------------------
    const repl = require('repl');
    const assert = require('assert');
    
    var replServer = repl.start('> ');
    
    replServer.setupHistory('replHistory.txt', function(err, replSvr){           // history log file set 
        replServer.displayPrompt();
    });
    
// replHistory.txt --------------------------------------------------------------
    .exit                                                                        // history log file saves the most recent activity on top 
    subtractFn(10, 3);
    }
    return a - b;
    var subtractFn = function(a, b){
    .editor
    }
    returns a - b:
    var subtractFn = function(a, b) {
    .editor
    var x = 10;
    </pre>
    <pre class="cmd" style="margin-top:1px;">
    PS D:\safe\code +\my site\03 improuve\learn webdesign\04 node.js\repl\06 setUpHistory() TEST> node main
        > var x = 10;
        undefined
        > .editor
        // Entering editor mode (^D to finish, ^C to cancel)
        var subtractFn = function(a, b) {
        returns a - b:
        }
        Thrown:
        returns a - b:
                ^

        SyntaxError: Unexpected identifier
        > .editor
        // Entering editor mode (^D to finish, ^C to cancel)
        var subtractFn = function(a, b){
        return a - b;
        }
        undefined
        > subtractFn(10, 3);
        7
        > .exit
    PS D:\safe\code +\my site\03 improuve\learn webdesign\04 node.js\repl\06 setUpHistory() TEST>    
    </pre>
<!------------------------------------------------------------------------------------------------------------------------>
<hr>
<h4 style="color:darkblue"><u> create REPL instance with a <mark>useGlobal</mark> option TEST </u></h4>
    <p> - REPL instances created with the <mark>useGlobal:true</mark> option will use the global scope as their context, but if we assign some data to their <mark>context</mark> property the data still will be available</p> 
    <pre style="margin-bottom:1px;">
    const repl = require('repl');
    
    var replServer = repl.start({prompt:'>> ', useGlobal:true});
    
    replServer.context.data1 = 'context data';                                   // this data is still available in REPL (but cannot be cleared)
    </pre>
    <pre class="cmd" style="margin-top:1px;">
    PS D:\safe\code +\my site\03 improuve\learn webdesign\04 node.js\repl\08 repl instance with 'useGlobal' TEST> node main   
        >> data1                                                                 // available context data   
        'context data'
        >> var x = 10;                                                           // this will be declared on the global scope 
        undefined
        >> x
        10
        >> .clear                                                                // REPL context cannot be cleared because REPL uses the global scope as its context 
        >> x
        10
        >> data1                                                                 // data still available 
        'context data'
        >>       
    </pre>
</details>
<!------------------------------------------------------------------------------------------------------------------------>
<hr>
<h3 style="color:darkblue;"><u> Events <mark>exit</mark> / <mark>reset</mark> </u></h3>
<details class="example">
<summary> DEMO </summary>
    <pre>
    const repl = require('repl');
     
    var replServer = repl.start('> ');
     
    replServer.on('exit', function(){});                                         // listener function invoked when this REPL session exits   
    replServer.on('reset', function(ctx){                                        // listener function invoked when this REPL session restarts (.clear command entered in REPL)        
        ctx                                                                      // context of this REPL session ('replServer.context')
    });                                            
    </pre>
</details>
<details class="example">
<summary> Example : </summary>
<h4 style="color:darkblue;"><u> <mark>exit</mark> / <mark>reset</mark> events TEST </u></h4>
    <pre style="margin-bottom:1px;">
    const repl = require('repl');
    
    var replServer = repl.start();
    replServer.context.defaultProperty = 'default data';
    
    replServer.on('exit', function(){                                            // listener executed when REPL exits   
        console.log( 'REPL exited!');                                            
    });
    
    replServer.on('reset', function(context){                                    // listener executed when REPL context resets 
        context.defaultProperty = 'default data';                                // this defines a sort-of default data for this REPL context   
        console.log( 'REPL is reset!' );
    });    
    </pre>
    <pre class="cmd" style="margin-top:1px;">
    PS D:\safe\code +\my site\03 improuve\learn webdesign\04 node.js\repl\07 exit reset events TEST> node main       
        > defaultProperty                                                       
        'default data'
        > .clear
        Clearing context...
        REPL is reset!                                                           // 'reset' listener function executed here 
        > defaultProperty                                                        // data available after context reset 
        'default data'
        > .exit
        REPL exited!                                                             // 'exit' listener function executed here 
    PS D:\safe\code +\my site\03 improuve\learn webdesign\04 node.js\repl\07 exit reset events TEST>    
    </pre>
</details>
    
    <br><br>
</body>
</html>