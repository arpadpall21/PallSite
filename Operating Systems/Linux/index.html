<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title> Linux (Ubuntu) </title> 
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.3.1/css/all.css" integrity="sha384-mzrmE5qonljUremFsqc01SB46JvROS7bZs3IO2EmfFsd15uHvIt+Y8vEf7N7fWAU" crossorigin="anonymous"> 
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <link rel="stylesheet" href="../../Assets/stylesPages.css"> 
    <script src="../../Assets/scriptPages.js"></script>
    <link rel="stylesheet" href="./styles.css"> 
</head>
<body>
<h1> Linux (Ubuntu) </h1>
    <p> Updated ( 2020-03-10 / 2020-03-30 )</p>
    <p class="sitenav"> <a href="../../index.html" title="home">MySite></a>
        <a href="../index.html" title="Learn WebDesign">Operating Systems></a> Linux
    </p>
<table class="table">
<caption> File System </caption>
    <tr>
        <th style="width:30%;"> Folder </th>
        <th> Description </th>
    </tr>
    <tr>
        <td> / </td>
        <td> root directory </td>
    </tr>
    <tr>
        <td> /bin </td>
        <td> (binary) holds <u>essential</u> binaries (booting, system emergency, single user mode, etc..)</td>
    </tr>
    <tr>
        <td> /boot </td>
        <td> (boot) Linux boot loader files </td>
    </tr>
    <tr>
        <td> /cdrom </td>
        <td> (CD-ROM) for cd-rom devices </td>
    </tr>
    <tr>
        <td> /dev </td>
        <td> (devices) device files (in Linux every device is depicted as a file, like mouse, keyboard, etc...) </td>
    </tr>
    <tr>
        <td> /etc </td>
        <td> (etcetera) system-wide configuration files, these configurations are valid for all users </td>
    </tr>
    <tr>
        <td class="indent"> /etc/enviroment  </td>
        <td> 
             - file contains system-wide environment variables <br>
        </td>
    </tr>
    <tr>
        <td class="indent"> /etc/group </td>
        <td> 
             - file contains all groups in the system <br>
             - each entry represents a group (<strong>groupName</strong> : <em class="openable">x<div> 
                <p> - the 'x' represents the encrypted password </p>
            </div></em> : <strong>gid</strong> : <strong>groupMember</strong><i><small>,</small>...</i>) 
        </td>
    </tr>
    <tr>
        <td class="indent"> /etc/hosts </td>
        <td> 
             - hosts file (local domain to IP address mapping file) <br>
             - (column1 = ip address) (column2 = domain) (column3 = domain alias) 
        </td>
    </tr>
    <tr>
        <td class="indent"> /etc/passwd </td>
        <td> 
             - file contains all users in the system <br>
             - each entry represents a user (<strong>userName</strong> : <em class="openable">x<div> 
                <p> - the 'x' represents the encrypted password </p>
            </div></em> : <strong>uid</strong> : <strong>gid</strong> : <strong>fullName</strong> : <strong>homeDirPath</strong> :  <strong>loginShellPath</strong>) 
        </td>
    </tr>
    <tr>
       <td> /home </td> 
       <td> 
            - (home) user(s) home folder <br>
            - each user has its own home folder and cannot access other home folders without superuser permissions <br>
            - holds the current user application configurations setting caching
       </td>
    </tr>
    <tr>
        <td class="indent"> /home/<strong>user</strong>/.bash_aliases </td>
        <td>  
            - (file) we can add <u>permanent command aliases</u> <span class="openable">at the bottom of this file<div>
                <p><mark>alias <strong>aliasCmd</strong>=<strong>cmd</strong></mark> </p>
                <p><mark><i>...</i></mark></p>
                <hr>
                <p><u> EX: </u></p>
                <p><mark>alias test="ls | grep test"</mark> (list all <mark>test</mark> files in the current directory) </p>
            </div></span> <br>
            - make sure that <span class="openable">this line<div>
              <pre>
              if [ -f ~/.bash_aliases ]; then
              . ~/.bash_aliases
              fi
              </pre>
            </div></span> is present in the <makr>~/.bashrc</makr> file <br>
            - takes effect after the system is restarted or after the <mark>source ~/.profile</mark> command 
        </td>
    </tr>
    <tr>
        <td class="indent"> /home/<strong>user</strong>/.profile </td>
        <td>  
            - (file) we can add <u>permanent user environment varialbes</u> <span class="openable">at the bottom of this file<div>
                <p><mark>export <strong>key</strong>=<strong>val</strong></mark> </p>
                <p><mark><i>...</i></mark></p>
                <hr>
                <p><u> EX: </u></p>
                <p><mark>export TEST1=21</mark></p>
                <p><mark>export TEST2=test</mark></p>
                <p><mark>export TEST2='new val'</mark> (use quotes if the string contains spaces)</p>
            </div></span> <br>
            - takes effect after the system is restarted or after the <mark>source ~/.profile</mark> command 
        </td>
    </tr>
    <tr>
        <td> /lib<small>nr</small> </td>
        <td> (libraries) kernel modules and libraries what binaries can use  </td>
    </tr>
    <tr>
        <td> /media </td>
        <td> (removable media) external storage devices are mounted her by the OS (like USB sticks, SD cards, etc...) </td>
    </tr>
    <tr>
        <td> /mnt </td>
        <td> (mount) manually mounted storage and partitions </td>
    </tr>
    <tr>
        <td> /opt </td>
        <td> (optional) manually installed softwares which are not part of the default installation </td>
    </tr>
    <tr>
        <td> /proc </td>
        <td> (process) process and kernel information files, the OS keeps track of running processes and other OS functionalities in files here </td>
    </tr>
    <tr>
        <td> /root </td>
        <td> (root) superuser's directory </td>
    </tr>
    <tr>
        <td> /run </td>
        <td> (run-time variables) initial runing system files since the last boot (OS creates this directory on every boot up) </td>
    </tr>
    <tr>
        <td> /sbin </td>
        <td> (system binaryes) holds system binary files which are accessible only for the superuser </td>
    </tr>
    <tr>
       <td> /snap </td> 
       <td> (snap packages) Ubuntu snap packages </td>
    </tr>
    <tr>
       <td> /srv </td> 
       <td> (server) server data is sotred here </td>
    </tr>
    <tr>
       <td> /sys </td> 
       <td> (system) kernel configuration files (OS creates this directory on every boot up) </td>
    </tr>
    <tr>
       <td> /tmp </td> 
       <td> (temporary) temporary files stored by applications </td>
    </tr>
    <tr>
       <td> /usr </td> 
       <td> (user) user applications (non-essential for system operations) </td>
    </tr>
    <tr>
       <td class="indent"> /usr/bin </td> 
       <td> user binaries (non required by the system) </td>
    </tr>
    <tr>
       <td class="indent"> /usr/share </td> 
       <td> sharable architecture independend files (icons, fonts, docs, etc..) </td>
    </tr>
    <tr>
       <td class="indent"> /usr/share/doc </td> 
       <td> package documentations, configurations, utilities, etc... </td>
    </tr>
    <tr>
       <td> /var </td> 
       <td> (varialbes) variable data files, log files, cache data, waiting tasks, etc... </td>
    </tr>
    <tr>
        <td style="text-indent: 10px;"> /var/spool/cron/crontabs </td>
        <td> directory contains user crontab files </td>
    </tr>
</table>
    <br>
<table class="table">
<caption> Cron daemon </caption>
    <tr>
        <th style="width:30%;"> Command / Syntax </th>
        <th> Description </th>
    </tr>
    <tr>
        <td> crontab <small>[-e] [-l] [-r] [-i]</small> </td>
        <td>  
             - <u>(option required)</u> users' crontab (crontab = cron table) <br>
             - (<small>-e</small>) edit the user's crontab file <br>
             - (<small>-l</small>) print the user's crontab file <br>
             - (<small>-r</small>) removes the user's crontab file from the <mark>/var/spool/cron/crontabs</mark> directory (doesn't prompt) <br>
             - (<small>-i</small>) prompts when removing crontab files 
        </td>
    </tr>
    <tr>
        <td colspan="2"> Scheduling Cron Jobs </td>
    </tr>
    <tr>
        <td> <strong class="openable">min<div>
                <p> - minute <mark>0 - 59</mark></p>
            </div></strong> <strong class="openable">hour<div>
                <p> - hour <mark>0 - 23</mark></p>
            </div></strong> <strong class="openable">day<div>
                <p> - day of month <mark>1 - 31</mark>
            </div></strong> <strong class="openable">month<div>
                <p> - month <mark>1 - 12</mark></p>
            </div></strong> <strong class="openable">weekDay<div>
                <p> - day of week <mark>0 - 7</mark> (<mark>0</mark> and <mark>7</mark> = Sunday) </p>
            </div></strong>  <strong>cmd</strong> 
        </td>
        <td>  
             - schedules the passed command(s) <br>
             - <mark>*</mark> = every (ex: <mark>* * * * *</mark> = every minutes | <mark>0 * * * *</mark> = every hour | <mark>0 0 * * *</mark> = every day) <br>
             - <mark><strong>nr</strong>,<strong>nr</strong></mark> = specifying multiple values (ex: <mark>5,10,15 * * * *</mark> = 5, 10 and 15 minutes) <br>
             - <mark><strong>nr</strong>-<strong>nr</strong></mark> = specifying a range (ex: <mark>5-15 * * * *</mark> = every minutes between 5 and 15 minutes <br>
             - <mark><strong>nr</strong>/<strong>nr</strong></mark> = repeat an interval (ex: <mark>0 */4 * * *</mark> = every 4 hours)
        </td>
    </tr>
    <tr>
        <td> <span class="openable">@yearly | @anually<div>
                <p> - same as = <mark>0 0 1 1 *</mark> (runs the task at every 00:00 hours 1st of January) </p>
            </div></span> | <span class="openable">@monthy<div>
                <p> - same as = <mark>0 0 1 * *</mark> (runs the task at every 00:00 hours 1st of every month) </p>
            </div></span> | <span class="openable">@weekly<div>
                <p> - same as = <mark>0 0 * * 0</mark> (runs the task at 00:00 hours every Sunday) </p>
            </div></span> | <span class="openable">@daily<div>
                <p> - same as = <mark>0 0 * * *</mark> </p>
            </div></span> | <span class="openable">@hourly<div>
                <p> - same as = <mark>0 * * * *</mark> </p>
            </div></span> | <span class="openable">@reboot<div>
                <p> - runs the task at every system startup </p>
            </div></span> 
        </td>
        <td> 1 predefined macro (schedule) can replace all the 5 values <u>[TESTED: 2020-04-13 <mark>@reboot</mark> not working on Ubuntu 19.10]</u> </td>
    </tr>
</table>
    <br>
<table class="table">
<caption> File Permission </caption>
    <tr>
        <th style="width:10%;"> Number </th>
        <th style="width:10%;"> Symbol </th>
        <th> Permission Type </th>
    </tr>
    <tr>
        <td> 0 </td>
        <td> --- </td>
        <td> No Permission </td>
    </tr>
    <tr>
        <td> 1 </td>
        <td> --x </td>
        <td> Execute </td>
    </tr>
    <tr>
        <td> 2 </td>
        <td> -w- </td>
        <td> Write </td>
    </tr>
    <tr>
        <td> 3 </td>
        <td> -wx </td>
        <td> Write + Execute </td>
    </tr>
    <tr>
        <td> 4 </td>
        <td> r-- </td>
        <td> Read </td>
    </tr>
    <tr>
        <td> 5 </td>
        <td> r-x </td>
        <td> Read + Execute </td>
    </tr>
    <tr>
        <td> 6 </td>
        <td> rw- </td>
        <td> Read + Write </td>
    </tr>
    <tr>
        <td> 7 </td>
        <td> rwx </td>
        <td> Read + Write + Execute </td>
    </tr>
</table>
<h2 style="color:green;"><u> Notes : </u></h2>
    <details class="example" id="notes">
    <summary> Notes :</summary>
        <!-- <p> - paragraph removes the 'empty' message from the detail TAG -->
    </details>
<h2 style="color:green;"><u> Useful Links : </u></h2>
    <p><a href="https://www.gnome-look.org" target="_blank">Themes for Gnome (gnome-look.org) </a></p>
<h2 style="color:green;"><u> Remember This : </u></h2>
    
<h2 style="color:green;"><u> Description and Demonstration : </u></h2>
    <p> - Linux is a multiuser system, several users can be logged-in at the same time (users can be logged-in remotely) </p>
<h2 id="linuxFS"><u> Users and Groups </u></h2>
<h2 style="color:darkblue;"><u> Users </u></h2>
    <p> - all users are listend in the <mark>/etc/passwd</mark> file </p>
    <p><u> Standard (normal) User </u></p>
    <p style="text-indent:25px;"> - a standard user is 'guests' who have 'normal' access to the system funcitonalities (standard users' UIDs are higher than <mark>1000</mark>) </p>
    <p style="text-indent:25px;"> - the 'root' user is the superuser who have <u>access to everything</u> in the system </p>
    <p style="text-indent:25px;"> - the 'administrator' is basically a standard user who is <u>part of the 'sudo' (system) group</u> so it can use the <mark>sudo</mark> command which gives it root (superuser) privileges in the system </p>
    <p><u> System User </u></p>
    <p style="text-indent:25px;"> - system users are special kind of users who have access to more of the system funcionalities (system users' UIDs are lower than <mark>1000</mark>) <u>(system users are NOT Administartors)</u></p>
    <p style="text-indent:25px;"> - system users are not shown on the login screen, they are mostly used by applications in order to access some funcionalities in the system (we rarely use them for 'normal' use) </p>
<h2 style="color:darkblue;"><u> Groups </u></h2>
    <p> - groups is a way to give a group of users a set of permission to the specified item </p>
    <p> - each item (file or directory) belongs to an owner and a group, those users who are members of the item group have group permission on the item </p>
    <p> - all groups are listend in the <mark>/etc/group</mark> file </p>
    <p><u> Primary Groups </u></p>
    <p style="text-indent:25px;"> - each user must have <u>one</u> primary group, this group is basically the user's group (primary groups' GIDs are higher than <mark>1000</mark>) </p>
    <p><u> Secondary Groups </u></p>
    <p style="text-indent:25px;"> - a user can be member of <u>zero or more</u> (1000) groups, group members have group permission on itmes belonging to that group (secondary groups' GIDs are higher than <mark>1000</mark>) </p>
    <p><u> System Groups </u></p>
    <p style="text-indent:25px;"> - system groups give special system permission to users (ex: the 'sudo' system group gives root permission to the user) (system groups' GIDs are lower than <mark>1000</mark>) </p>
<!-------------------------------------------------------------------------------------------------------------------------------->
<hr>
<h2 class="headerExtra"><u> Hardware Drivers </u></h2>
    <p> - Linux uses open-source hardware drivers, so drivers are automatically detected and installed by Linux Kernel </p>
    <p> - Proprietary drivers also can be used and managed through the "Software &amp; Updates" screen (which was done automatically when installed Linux) </p> 
<!-------------------------------------------------------------------------------------------------------------------------------->
<hr>
<h2 id="linuxFS"><u> File System </u></h2>
    <p style="background-color:yellow;"> - Do Not modify (resize) the partition where the Linux and the swaping area is insalled! Linux will fail to boot [TESTED: 2020-04-23 (cost me 1 day and a Linux reinstallation)] </p>
    <p> - Linux uses a logical file system, disks and partitions can be "mounted" logically </p>
    <p> - in Linux everything is a file! files are files, a directories are files, devices are files, etc... <u>hidden files are preceded with a dot (ex <mark>.*</mark>)</u> </p>
<!-------------------------------------------------------------------------------------------------------------------------------->
<hr>
<h2 style="color:darkblue;"><u> Inode </u></h2>
    <p> - an Inode is a data structure which describes a file (object) on the Linux file system (metadata of the acutal file)</p>
    <p> - Linux manages inodes and has a data base of inodes "inode table", inodes are limited and unique on the system (can be displayed with the <mark>df -i</mark> command) </p>
    <p> - Hard-Links have the same Inode number, so technically they are the same file </p>
    <p> Inode contains </p>
    <ul> 
        <li> File Type = file, directory, device, pipe, etc... </li>
        <li> Permission = read, write, execute </li>
        <li> Link Count = Number of Hard-Links relative to this Inode </li>
        <li> User Id = file owner </li>
        <li> Group Id = group owner </li>
        <li> Size = file size </li>
        <li> Time Stamp = Access time = file last access, <u>Change time = file last change | Modification time = inode last change</u> </li>
        <li> Attributes = inmutable, etc... </li>
        <li> link to other files = for directories </li>
        <li> link to the actual underlyind data (link to disk blocks) </li>
        <li><u> does not contain the fine name</u> = this makes possible to create hard-links </li>
    </ul>
<!-------------------------------------------------------------------------------------------------------------------------------->
<hr>
<h2 style="color:darkblue;"><u> umask </u></h2>
    <p> - the umask defines file and directory permissions when created, the Default umask value is <mark>0022</mark> <u>(the first value is always <mark>0</mark>)</u> </p>
    <p> - in Linux when creating new items the default permission for files is <mark>0666</mark> and for directories is <mark>0777</mark> </p>
    <p> - the umask value is <u>subtracted from the item default permission value</u> when we create new items (ex: the file permission is calculated (<mark>0666</mark> - <mark>0002</mark>) so the new file's permission is <mark>0664</mark>) </p>
<!-------------------------------------------------------------------------------------------------------------------------------->
<hr>
<h2 class="headerExtra"><u> Services (Daemons) </u></h2>
    <p> - services are basically programs running in the background (like Apache) </p>
    <p> - so we can close the terminal regardless the daemon is running or not </p>
<h2 style="color:darkblue;" id="cron"><u> Cron </u></h2>
    <p> - Cron is a daemon tool which schedules commands on Unix-like systems, by default it does interpret commands with the Bourne shell (<mark>/bin/sh</mark>) Not with bash (this could lead somme differences)! </p>
    <p> - by default <mark>/bin/sh</mark> doesn't have the <mark>DISPLAY=:0</mark> enviroment variable set, <u>(so if we want to lauch graphical applications we must set it first!)</u></p>
    <p> - user "Cron Jobs" (tasks) are simply stored in a file in the <mark>/var/spool/cron/crontabs</mark> directory (each user has its own crontab file here), there is system-wide crontabs too but I don't test that now [2020-04-13] </p>
    <p> - use commands to set crontabs (<mark>crontab -e</mark>), it is NOT recommended to modify crontab files directly! </p> 
    <pre class="syntax">
COMMANDS :  crontab <small>[-e] [-l] [-r] [-i]</small>                                                // <u>(option required)</u> users' crontab (crontab = cron table)  
                <small>-e</small>                                                                        // edit the user's crontab file 
                <small>-l</small>                                                                        // print the user's crontab file 
                <small>-r</small>                                                                        // removes the user's crontab file from the <mark>/var/spool/cron/crontabs</mark> directory (doesn't prompt) 
                <small>-i</small>                                                                        // prompts when removing crontab file 
            
<span style="color:darkgrey;">// schedule cron jobs (tasks) in the (bottom of the) user's crontab file --------------</span>
    <strong class="openable">min<div>
        <p> - minute <mark>0 - 59</mark></p>
    </div></strong> <strong class="openable">hour<div>
        <p> - hour <mark>0 - 23</mark></p>
    </div></strong> <strong class="openable">day<div>
        <p> - day of month <mark>1 - 31</mark>
    </div></strong> <strong class="openable">month<div>
        <p> - month <mark>1 - 12</mark></p>
    </div></strong> <strong class="openable">weekDay<div>
        <p> - day of week <mark>0 - 7</mark> (<mark>0</mark> and <mark>7</mark> = Sunday) </p>
    </div></strong>  <strong>cmd</strong>                                             // schedules the passed command(s) 
                                                                                          // * = every (ex: <mark>* * * * *</mark> = every minutes | <mark>0 * * * *</mark> = every hour | <mark>0 0 * * *</mark> = every day)
                                                                                          // <strong>nr</strong>,<strong>nr</strong> = specifying multiple values (ex: <mark>5,10,15 * * * *</mark> = 5, 10 and 15 minutes) 
                                                                                          // <strong>nr</strong>-<strong>nr</strong> = specifying a range (ex: <mark>5-15 * * * *</mark> = every minutes between 5 and 15 minutes 
                                                                                          // <strong>nr</strong>/<strong>nr</strong> = repeat an interval (ex: <mark>0 */4 * * *</mark> = every 4 hours)  
    
    <span class="openable">@yearly | @anually<div>
        <p> - same as = <mark>0 0 1 1 *</mark> (runs the task at every 00:00 hours 1st of January) </p>
    </div></span> | <span class="openable">@monthy<div>
        <p> - same as = <mark>0 0 1 * *</mark> (runs the task at every 00:00 hours 1st of every month) </p>
    </div></span> | <span class="openable">@weekly<div>
        <p> - same as = <mark>0 0 * * 0</mark> (runs the task at 00:00 hours every Sunday) </p>
    </div></span> | <span class="openable">@daily<div>
        <p> - same as = <mark>0 0 * * *</mark> </p>
    </div></span> | <span class="openable">@hourly<div>
        <p> - same as = <mark>0 * * * *</mark> </p>
    </div></span> | <span class="openable">@reboot<div>
        <p> - runs the task at every system startup </p>
    </div></span>        // 1 predefined macro (schedule) can replace all the 5 values <u>[TESTED: 2020-04-13 <mark>@reboot</mark> not working on Ubuntu 19.10]</u>    
    </pre>
    <pre>
// user's crontab file ----------------------------------------------------------------
    DISPLAY=:0                                                                         // !! graphical application won't start without this environment variable   
    
    * */4 * * *  echo 'test' > testFile                                                // run task every minute in every 4 hours 
    
    @reboot  echo 'test' > testFile                                                    // -! run task at every startup [TESTED: 2020-04-13 NOT workink on Ubuntu]   
    
    0 15 * * 1-5  echo 'test' > testFile                                               // run task at 15:00 from Monday to Friday  
    
    0 8-16 * * *  echo 'test' > testFile                                               // run task every hours from 8 to 16 
    
    0 7 1-7 * 1  echo 'test > testFile                                                 // run task on the first Monday of every month at 7 o'clock    
    </pre>
<details class="example">
<summary> Example : </summary>
<h4 style="color:darkblue;"><u> Cron Test-1 </u></h4>
    <p> - the below file is edited through the <mark>crontab -e</mark> command <u>(it is not recommended to edit it directly!)</u> </p>
    <pre>
// (user's crontab file) /var/spool/cron/crontabs/pall --------------------------------
    # Edit this file to introduce tasks to be run by cron.
    # 
    # Each task to run has to be defined through a single line
    # indicating with different fields when the task will be run
    # and what command to run for the task
    # 
    # To define the time you can provide concrete values for
    # minute (m), hour (h), day of month (dom), month (mon),
    # and day of week (dow) or use '*' in these fields (for 'any').
    # 
    # Notice that tasks will be started based on the cron's system
    # daemon's notion of time and timezones.
    # 
    # Output of the crontab jobs (including errors) is sent through
    # email to the user the crontab file belongs to (unless redirected).
    # 
    # For example, you can run a backup of all your user accounts
    # at 5 a.m every week with:
    # 0 5 * * 1 tar -zcf /var/backups/home.tgz /home/
    # 
    # For more information see the manual pages of crontab(5) and cron(8)
    # 
    # m h  dom mon dow   command
    
// ------------------------------------------------------------------------------------
    */1 * * * * /usr/bin/node /home/pall/TestDir/main.js >> /home/pall/TestDir/nodeRes // runs node every minute and outputs the result in the specified file  
    
// ------------------------------------------------------------------------------------
    */1 * * * * node /home/pall/TestDir/main.js >> /home/pall/TestDir/nodeRes          // does the same as above   
    
// ------------------------------------------------------------------------------------
    DISPLAY=:0                                                                         // -! when launching GUI programs we must set the display environment variable 
    16 19 12 4 * firefox                                                               // scheduling graphical applications  
    17 19 12 4 * google-chrome-stable
    @hourly nautilus                                                                   // does open the file manager every hour (at the beginning of every hour)   
    </pre>
</details>
    
    <br><br>
</body>
</html>