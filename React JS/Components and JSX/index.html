<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title> Components and JXS </title> 
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.3.1/css/all.css" integrity="sha384-mzrmE5qonljUremFsqc01SB46JvROS7bZs3IO2EmfFsd15uHvIt+Y8vEf7N7fWAU" crossorigin="anonymous"> 
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <link rel="stylesheet" href="../../Assets/stylesPages.css"> 
    <script src="../../Assets/scriptPages.js"></script>
</head>
<body>
<h1> Components and JXS (ver 3.4.1) </h1>
    <p> Updated ( 2020-10-20 )</p>
    <p class="sitenav"> <a href="../../index.html" title="home">MySite></a>
        <a href="../index.html" title="Learn WebDesign">React JS></a> Components and JSX 
    </p>
<table class="table">
<caption>
    In React Module
    <span class="changeListOrder">[Ordered: <span>Alphabetically</span>]</span>
</caption>
    <tr>
        <th style="width:30%;"> Method </th>
        <th> Description </th>
    </tr>
    <tr class="05.01">
        <td> import <strong>React</strong> from 'react' </td>
        <td> - imports the React framework into the current module (allow to create React components) </td>
    </tr>
    <tr class="05.02">
        <td> import <strong>ReactDOM</strong> from 'react-dom' </td>
        <td> - imports the React DOM render tool into the current module (allows to render React components in the DOM) </td>
    </tr>
    <tr class="06.01">
        <td> <strong>ReactDOM</strong>.render(<strong>JSX</strong>, <strong>targHTMLElement</strong>) </td>
        <td> - renders JXS into the target HTML element </td>
    </tr>
</table>
    <br>
<table class="table">
<caption> 
    Component Lifecycle Methods (<u>called in this order</u>)
    <span class="changeListOrder">[Ordered: <span>Alphabetically</span>]</span>
</caption>
    <tr>
        <th style="width:30%;"> Method </th>
        <th> Description </th>
        <th style="width:5%;"> Calling Order </th>
    </tr>
    <tr class="10.01">
        <td colspan="3"> Mounting (Putting Component elements into the DOM) </td>
    </tr>
    <tr class="10.02">
        <td> constructor(<small>props</small>){super(<small>props</small>) } </td>
        <td> - sets up the initial <mark>state</mark> of the Component (<mark>super()</mark> must be called before anything else) </td>
        <td style="text-align:center;"> 1 </td>
    </tr>
    <tr class="10.03">
        <td> <em>static</em> getDerivedStateFromProps(<strong>props</strong>, <strong>state</strong>){return <strong>state:obj</strong>} </td>
        <td>  
            - here we should set the Component <mark>state</mark> based on the initial <mark>props</mark> <u>(must be called as <mark>static</mark> method)</u> <br>
            - must return an object which represents the updated Component <mark>state</mark>   
        </td>
        <td style="text-align:center;"> 2 </td>
    </tr>
    <tr class="10.04">
        <td> render(){return <strong>JSX</strong>} </td>
        <td> - renders the Component </td>
        <td style="text-align:center;"> 3 </td>
    </tr>
    <tr class="10.05">
        <td> componentDidMount(){} </td>
        <td>
            - called when the Component ellements are fully rendered in the DOM <br>
            - should run statements that requires HTML elements already rendered  
        </td>
        <td style="text-align:center;"> 4 </td>
    </tr>
    <tr class="20.01">
        <td colspan="3"> Updating (when there's a change in <mark>state</mark> or <mark>props</mark>) </td>
    </tr>
    <tr class="20.02">
        <td> <em>static</em> getDerivedStateFromProps(<strong>props</strong>, <strong>state</strong>){return <strong>state:obj</strong>} </td>
        <td>  
            - here we should set the Component <mark>state</mark> based on the initial <mark>props</mark> <u>(must be called as <mark>static</mark> method)</u> <br>
            - must return an object which represents the updated Component <mark>state</mark>   
        </td>
        <td style="text-align:center;"> 1 </td>
    </tr>
    <tr class="20.03">
        <td> shouldComponentUpdate(<strong>nextProps</strong>, <strong>nextState</strong>){return <strong>bol</strong>} </td>
        <td> 
            - should return a boolean indicating that the Component should continue to render or not (Default: <mark>true</mark>) <br>
            - if <mark>false</mark> returned all further Updating metthod calls are stopped 
        </td>
        <td style="text-align:center;"> 2 </td>
    </tr>
    <tr class="20.04">
        <td> render(){return <strong>JSX</strong>} </td>
        <td> re-renders the Component </td>
        <td style="text-align:center;"> 3 </td>
    </tr>
    <tr class="20.05">
        <td> getSnapshotBeforeUpdate(<strong>prevProps</strong>, <strong>prevState</strong>){} </td>
        <td> 
            - gives acces to <mark>props</mark> and <mark>state</mark> values <u>before</u> the Component was updated <br>
            - if set we also must set the <mark>componentDidUpdate()</mark> method
        </td>
        <td style="text-align:center;"> 4 </td>
    </tr>
    <tr class="20.06">
        <td> componentDidUpdate(){} </td>
        <td>  
            - called when the Component elements are fully re-rendered in the DOM <br>
            - should run statements that requires HTML elements already rendered  
        </td>
        <td style="text-align:center;"> 5 </td>
    </tr>
    <tr class="30.01">
        <td colspan="3"> Unmounting (Removing the Component from the DOM) </td>
    </tr>
    <tr class="30.02">
        <td> componentWillUnmount(){} </td>
        <td> called when the Component is about to be removed from the DOM </td>
        <td style="text-align:center;"> 1 </td>
    </tr>
</table>    
<h2 style="color:green;"><u> Notes : </u></h2>
    <details class="example" id="notes">
    <summary> Notes :</summary>
        <!-- <p> - paragraph removes the 'empty' message from the detail TAG -->
    </details>
<h2 style="color:green;"><u> Useful Links : </u></h2>
    
<h2 style="color:green;"><u> Remember This : </u></h2>
    
<h2 style="color:green;"><u> Description and Demonstration : </u></h2>
    <p> - a React Applications is composed of independent React Components </p>
    <p> - a React Component is basically a <u>reusable</u> set of HTML elements building a piece of the application (Component) </p>
    <p> - React does not manipulates the DOM directly instead it maintains a Virtual DOM and only renders HTML elements (Components) when needed, this makes React fast! </p>
<h2 class="headerExtra"><u> JSX and rendering <mark>ReactDOM.render()</mark> </u></h2>
    <p> - JSX (JavaScript XML) is a HTML-like script, React interprets and renders JSX as HTML </p>
    <pre class="syntax">
JXS         &lt;<strong>rootnode</strong>&gt;                                                                         &lt;-- JXS must have ONE root node (Component Container)     
                &lt;<strong>element</strong> /&gt;                                                                    &lt;-- JSX elements follow strict XML rules, every element must be properly closed   
                &lt;<strong>element</strong>&gt;<i>content...</i>{<strong>exp</strong>}<i>content...</i>&lt;/<strong>element</strong>&gt;                                   &lt;-- <span class="openable">expressions<div>
                    <p> - can contain React variable, property or any JavaScript expression </p>
                </div></span> can be written into curly brackets (<mark>{}</mark>)    
                &lt;<strong>Component</strong> /&gt;                                                                  &lt;-- other components can be nested 
                {/*<strong>comment</strong>*/}                                                                  &lt;-- comment (NO other HTML or JS comment syntax allowed)
            &lt;/<strong>rootnode</strong>&gt;
    </pre>
<details class="example">
<summary> DEMO </summary>
    <pre>
// React root script file -------------------------------------------------------------
    import React from 'react';                                                         // React modules have to be imported 
    import ReactDOM from 'react-dom';
    
    function ChildComponent(){
        return &lt;p&gt;Child Component&lt;/p&gt;
    }
    
    function TestComponent(){
        return (
            &lt;div&gt;                                                                      // Component must have ONE root node 
                &lt;p&gt; Test element  &lt;/p&gt;
                &lt;p&gt; Expression result is {1 + 1} &lt;/p&gt;                                  // expressions between curly brackets are resolved and the value is returned    
                &lt;ChildComponent /&gt;                                                     // other Components can be nested 
                {/* some comment */}                                                   // JSX comment (no HTML or JavaScript comments allowed)    
            &lt;/div&gt;
        )
    }
    
    ReactDOM.render(&lt;TestComponent /&gt;, document.getElementById('testElement'));        // 'TestComponent' rendered into 'testElement' HTML element in the DOM   
    ReactDOM.render(&lt;p&gt;some content &lt;p&gt, document.getElementById('testElement2'));     // JSX can be rendered directly but it isn't a common practice    
    </pre>
</details>
<details class="example">
<summary> Example : </summary>
<h4 style="color:darkblue;"><u> <mark>ReactDOM.render()</mark> TEST </u></h4>
    <pre>
// React HTML file &lt;body&gt; -------------------------------------------------------------
    &lt;p id="testElement" /&gt;
    &lt;p id="testElement2" /&gt;
    </pre>
    <pre>
// React root script file -------------------------------------------------------------
    import React from 'react';                                                         // React modules have to be imported 
    import ReactDOM from 'react-dom';
    
    function TestComponent(){
        return &lt;p&gt;Hello World!&lt;/p&gt;
    }
    
    ReactDOM.render(&lt;TestComponent /&gt;, document.getElementById('testElement'));        // the React.render() method renders the JSX into tha target HTML element in the React HTML file 
    ReactDOM.render(&lt;p&gt;Some JXS&lt;/p&gt;, document.getElementById('testElement2'));         // we can directly write JSX into the method  
    </pre>
<hr>
<!------------------------------------------------------------------------------------------------------>
<h4 style="color:darkblue;"><u> JSX TEST </u></h4>
    <pre>
// React root script file -------------------------------------------------------------
    import React from 'react';                                                         // React modules have to be imported 
    import ReactDOM from 'react-dom';
    
    function ChildComponent(){
        return &lt;p&gt;Child Component&lt;/p&gt;
    }
    
    function TestComponent(){
        return (
            &lt;div&gt;                                                                      {/* one root node */}
                &lt;p&gt; Test element  &lt;/p&gt;
                &lt;p&gt; Expression result is {1 + 1} &lt;/p&gt;                                  {/* expression in JSX */}
                &lt;ChildComponent /&gt;                                                     {/* child component */}
            &lt;/div&gt;
        )
    }
    
    ReactDOM.render(&lt;TestComponent /&gt;, document.getElementById('testElement'));
    </pre>



</details>
<hr>
<!--------------------------------------------------------------------------------------------------------->
<h2 class="headerExtra"><u> Components </u></h2>
    <p> - there are 2 types of components in React <u>Function Components</u> and <u>Class Components</u>, <u style="color:yellow;">Component names must start with upper casse letter </u></p>
    <p> - Components can be stored in files (modules) we just need to export... import them where we want to render them </p>
    <pre class="syntax">
SYNTAX:     
  <span style="color:darkgray;">// Class Component ------------------------------------------------------------------</span>
            class <strong>Component</strong> extends React.Component{                                   // Class Component extends the <mark>React.Component</mark> class, so the created component has access to all React.Component functions    
                <small>constructor(){ super() }</small>                                               // if the constructor is present the <mark>super()</mark> is required which calls the parent class constructor   
                render(){ return <small>(</small><strong>JSX</strong><small>)</small> }                                               // render method is required, it must returns a JSX which composes the actual Component   
            }
            
            
  <span style="color:darkgray;">// Function Component ---------------------------------------------------------------</span>
            function <strong>Component</strong>(){                                                      // Function Component is a simple JavaScript function which returns JSX    
                return <small>(</small><strong>JSX</strong><small>)</small>                                                              does not implement <mark>state</mark> and lifecycle methods
            }
    </pre>
<details class="example">
<summary> DEMO </summary>
    <pre>
// React main script file 'index.js' --------------------------------------------------
// ------------------------------------------------------------------------------------
    import React from 'react';
    import ReactDOM from 'react-dom';
    
    import Header from './Header';                                                     // importing component   // -! relative path must be given otherwise node is looking for a node module    
                                                                                                                // 'js' extension because that's default 
    function Footer(){                                                                 // Function Component 
        return &lt;h2&gt;Footer&lt;/h2&gt;
    }
    
    class Page extends React.Component{                                                // Class Component 
        render(){
            return (
                &lt;div&gt;
                    &lt;Header /&gt;                                                         // Imported Component nested 
                    &lt;div&gt; Content &lt;/div&gt;
                    &lt;Footer /&gt;                                                         // Function Component nested 
                &lt;/div&gt;
            );
        }
    };
    
    ReactDOM.render(&lt;Page /&gt;, document.getElementById('testElement'));
    
    
// 'Header.js' file -------------------------------------------------------------------
// ------------------------------------------------------------------------------------
    import React from 'react';
    
    class Header extends React.Component{
        render(){
            return &lt;h1&gt;Header &lt;/h1&gt;
        }
    }
    
    export default Header;                                                             // exporting component    
    </pre>
</details>
<details class="example" >
<summary> Example : </summary>
<h4 style="color:darkblue;"><u> Function and Class Components TEST </u></h4>
    <pre>
    import React from 'react';
    import ReactDOM from 'react-dom';
    
    function Comp1(){                                                                  // Function Component 
        return &lt;p&gt;Hello Wordl!&lt;/p&gt;
    };
    
    class Comp2 extends React.Component{                                               // Class Component 
        render(){
            return &lt;p&gt;Hellow World Again!&lt;/p&gt;
        }
    };
    
    ReactDOM.render(&lt;Comp1 /&gt;, document.getElementById('testElement'));
    ReactDOM.render(&lt;Comp2 /&gt;, document.getElementById('testElement2'));
    </pre>
<hr>
<!--------------------------------------------------------------------------------------------------------->
<h4 style="color:darkblue;"><u> Components Stored in files TEST </u></h4>
    <pre>
// React root script file 'index.js' --------------------------------------------------
// ------------------------------------------------------------------------------------
    import React from 'react';
    import ReactDOM from 'react-dom';
    
    import Header from './Header';                                                     // importing components 
    import Footer from './Footer';                                                     // relative path must be given otherwise node is looking for a module (default extension is 'js' = can be omitted same as './Header.js')
    
    class Page extends React.Component{ 
        render(){
            return (
                &lt;div&gt;
                    &lt;Header /&gt;                                                         // Header Component nested    
                    &lt;div&gt; Content &lt;/div&gt;
                    &lt;Footer /&gt;                                                         // Footer Component nested    
                &lt;/div&gt;    
            );
        }
    };

    ReactDOM.render(&lt;Page /&gt;, document.getElementById('testElement'));
    
// 'Header.js' file -------------------------------------------------------------------
// ------------------------------------------------------------------------------------
    import React from 'react';
    
    class Header extends React.Component{
        render(){
            return &lt;h1&gt;Header&lt;/h1&gt;
        }
    }
    
    export default Header;                                                             // exporting Component 
    
// 'Footer.js' file -------------------------------------------------------------------
// ------------------------------------------------------------------------------------
    import React from 'react';
    
    class Footer extends React.Component{
        render(){
            return &lt;h2&gt;Footer&lt;/h2&gt;
        }
    }
    
    export default Footer;                                                             // exporting Component 
    </pre>
</details>
<hr>
<!--------------------------------------------------------------------------------------------------------->
<h2 class="headerExtra"><u> Component Lifecycle (Methods) </u></h2>
    <p> - a React Component has a lifecycle of 3 phases <u>Mounting</u>, <u>Updating</u> and <u>Unmounting</u> </p>
    <p> - each phase tirggers a specific series of methods inside the component <u style="color:yellow">(lifecycle methods are only available in class Components)</u></p>     
<details class="example">
<summary> DEMO </summary>
    <pre>
// main React script file (index.js) --------------------------------------------------
    import React from 'react';
    import ReactDOM from 'react-dom';
    
    class Mount extends React.Component{ 
    // -! CALLED WHEN : Mounting | -------- | -----------------------------------------
        constructor(props){                                                            // sets the initial Component state 
            super(props);
            this.state = {baseColor:'green'} 
        }
        
    // -! CALLED WHEN : Mounting | Updating | ------------------------------------------
        static getDerivedStateFromProps(props, state){                                 // sets the state based on the initial props 
            return {baseColor:props.color}                                               // the returned object represents the state   
        }
        
    // -! CALLED WHEN : -------- | Updating | ------------------------------------------
        shouldComponentUpdate(){                                                       // should the Component continue to re-render 
            return true;                                                                 // if false further Updating methods won't be called    
        }
        
    // -! CALLED WHEN : Mounting | Updating | -----------------------------------------
        render()                                                                       // renders the Component elements 
            return &lt;p&gt; some element {this.state.baseColor}&lt;/p&gt; 
        }
    // -! CALLED WHEN : Mounting | -------- | -----------------------------------------
        componentDidMount(){                                                           // called when the Component elements are fully rendered into the DOM   
            console.log('rendered');                                                     // should run some code after the Component elements are rendered   
        };
        
    // -! CALLED WHEN : -------- | Updating | ------------------------------------------
        getSnapshotBeforeUpdate(prevProps, prevState){                                 // state and props value before the Component elements are re-rendered    
            prevProps;                                                                   // props value before the Component was updated    
            prevState;                                                                   // state value before the Component was updated    
        }
        
    // -! CALLED WHEN : -------- | Updating | ------------------------------------------
        componentDidUpdate(){                                                          // called when the Component elements are fully re-rendered   
            console.log('updated');                                                      // should run some code after the Component elements are re-rendered   
        }
        
    // -! CALLED WHEN : -------- | -------- | Unmounting--------------------------------
        componentWillUnmount(){                                                        // called when the Component elements are about to be removed from the DOM    
            console.log('unmounting');                                                   // should run some code when the Component is about the be removed from the DOM    
        }
    }
    
    ReactDOM.render(&lt;Mount color="red" /&gt;, document.getElementById('testElement'));    
    </pre>
</details>
<details class="example">
<summary> Example : </summary>
<h4 style="color:darkblue;"><u> Component Lifecycle: Mounting TEST </u></h4>
    <pre>
// main React script file (index.js) --------------------------------------------------
    import React from 'react';
    import ReactDOM from 'react-dom';
    
    class Mount extends React.Component{ 
        constructor(props){                                                            // called 1st  (initiates the component state and props)
            super(props);
            this.state = {baseColor:'green'}
        }
        
        static getDerivedStateFromProps(props, state){                                 // called 2nd (changes the Component state based on the passed props (property))    
            return {baseColor:props.color}                                             // Component state changed based on the passed props (property)
        }
                    
        render(){                                                                      // called 3rd (renders the Component)   
            return &lt;p&gt;my element is {this.state.baseColor}&lt;/p&gt;      
        }
        
        componentDidMount(){                                                           // called 4rd (should run some code that requires HTML elements to be rendered)
            console.log('some code that requires HTML elements to be rendered in DOM');
        };
    }
    
    ReactDOM.render(&lt;Mount color="red" /&gt;, document.getElementById('testElement'));
    </pre>
<hr>
<!--------------------------------------------------------------------------------------------------------->
<h4 style="color:darkblue;"><u> Component Lifecycle: Updating TEST </u></h4>
    <pre>
// main React script file (index.js) --------------------------------------------------
    import React from 'react';
    import ReactDOM from 'react-dom';
    
    class Mount extends React.Component{ 
        constructor(props){
            super(props);
            this.state = {baseColor:'green', count:0};
        }
        
        static getDerivedStateFromProps(props, state){
            if(state.count == 0){                                                      // this little code prevents the return of the state object when the Component is Mounting 
                state.count++;
            } else {
                return {baseColor: props.color}                                        // sets the state value based on the props (2nd time this method is called)  
            }
        }
                    
        shouldComponentUpdate(){                                                       // can prevent Component to further Update 
            return true;
        }
                    
        render(){   
            return &lt;button type="button" onClick={this.changeColor}&gt; I'm {this.state.baseColor} (click) &lt;/button&gt;     
        }
        
        getSnapshotBeforeUpdate(prevProps, prevState) {                                // props and state values before the Component is updated  
            console.log(prevProps);                                                    // -> {color:'yellow'}
            console.log(prevState);                                                    // -> {baseColor:'green', count:1}
        }
        
        componentDidUpdate(){                                                          // runs when the Component is fully re-rendered 
            console.log('Mount Component Updated!');    
        };
        
        changeColor = ()=>{
            this.setState({baseColor:'red'});                                          // setState method updates the Component 
        }
    }
    
    ReactDOM.render(&lt;Mount color="yellow"/&gt;, document.getElementById('testElement'));
    </pre>
<hr>
<!--------------------------------------------------------------------------------------------------------->
<h4 style="color:darkblue;"><u> Component Lifecycle: Unmounting TEST </u></h4>
    <pre>
    import React from 'react';
    import ReactDOM from 'react-dom';
    
    class Mount extends React.Component{                                     
        constructor(props){
            super(props);
            this.state = {show:true}
        }
        render(){   
            let child;
            if(this.state.show){
                child = &lt;Child /&gt;;
            }
            return(
                &lt;div&gt;
                    &lt;p&gt;Element 1 &lt;/p&gt;
                    {child}
                &lt;/div&gt;
            )
        }
        componentDidMount(){
            setTimeout(()=&gt;{
                this.setState({show:false});                                           // after 3 seconds the Component is updated without the Child component 
            }, 3000);
        }
    }
    
    class Child extends React.Component{
        render(){
            return &lt;p&gt;child element&lt;/p&gt;
        }
        
        componentWillUnmount(){                                                        // triggered when the Component is Unmounted 
            console.log( 'Child Component Unmounted' );
        }
    }
    
    ReactDOM.render(&lt;Mount color="yellow"/&gt;, document.getElementById('testElement'));
    </pre>
</details>

    <br><br>
</body>
</html>
